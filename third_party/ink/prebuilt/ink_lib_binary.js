var g,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ca=function(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}},da=function(){da=function(){};ba.Symbol||(ba.Symbol=
ea)},ea=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}(),ha=function(){da();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return fa(this)}});ha=function(){}},fa=function(a){var b=0;return ia(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},ia=function(a){ha();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a},
ja=function(a){ha();var b=a[Symbol.iterator];return b?b.call(a):fa(a)},k=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
ca("WeakMap",function(a){function b(a){k(a,d)||aa(a,d,{value:{}})}function c(a){var c=Object[a];c&&(Object[a]=function(a){b(a);return c(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(C){return!1}}())return a;var d="$jscomp_hidden_"+Math.random();c("freeze");c("preventExtensions");c("seal");var e=0,f=function(a){this.a=(e+=Math.random()+
1).toString();if(a){da();ha();a=ja(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};f.prototype.set=function(a,c){b(a);if(!k(a,d))throw Error("WeakMap key fail: "+a);a[d][this.a]=c;return this};f.prototype.get=function(a){return k(a,d)?a[d][this.a]:void 0};f.prototype.has=function(a){return k(a,d)&&k(a[d],this.a)};f.prototype.delete=function(a){return k(a,d)&&k(a[d],this.a)?delete a[d][this.a]:!1};return f});
ca("Map",function(a){if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(ja([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(N){return!1}}())return a;da();ha();var b=new WeakMap,c=function(a){this.f={};this.a=f();this.size=
0;if(a){a=ja(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.f[c.id]=[]);c.o?c.o.value=b:(c.o={next:this.a,D:this.a.D,head:this.a,key:a,value:b},c.list.push(c.o),this.a.D.next=c.o,this.a.D=c.o,this.size++);return this};c.prototype.delete=function(a){a=d(this,a);return a.o&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.f[a.id],a.o.D.next=a.o.next,a.o.next.D=a.o.D,a.o.head=null,this.size--,!0):!1};c.prototype.clear=
function(){this.f={};this.a=this.a.D=f();this.size=0};c.prototype.has=function(a){return!!d(this,a).o};c.prototype.get=function(a){return(a=d(this,a).o)&&a.value};c.prototype.entries=function(){return e(this,function(a){return[a.key,a.value]})};c.prototype.keys=function(){return e(this,function(a){return a.key})};c.prototype.values=function(){return e(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};
c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(a,c){var d=c&&typeof c;"object"==d||"function"==d?b.has(c)?d=b.get(c):(d=""+ ++h,b.set(c,d)):d="p_"+c;var e=a.f[d];if(e&&k(a.f,d))for(a=0;a<e.length;a++){var f=e[a];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:a,o:f}}return{id:d,list:e,index:-1,o:void 0}},e=function(a,b){var c=a.a;return ia(function(){if(c){for(;c.head!=a.a;)c=c.D;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},
f=function(){var a={};return a.D=a.next=a.head=a},h=0;return c});
ca("Set",function(a){if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a(ja([b]));if(!d.has(b)||1!=d.size||d.add(b)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=b||f.value[1]!=b)return!1;f=e.next();return f.done||f.value[0]==b||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:e.next().done}catch(h){return!1}}())return a;da();ha();var b=function(a){this.a=new Map;if(a){a=ja(a);for(var b;!(b=
a.next()).done;)this.add(b.value)}this.size=this.a.size};b.prototype.add=function(a){this.a.set(a,a);this.size=this.a.size;return this};b.prototype.delete=function(a){a=this.a.delete(a);this.size=this.a.size;return a};b.prototype.clear=function(){this.a.clear();this.size=0};b.prototype.has=function(a){return this.a.has(a)};b.prototype.entries=function(){return this.a.entries()};b.prototype.values=function(){return this.a.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;
b.prototype.forEach=function(a,b){var c=this;this.a.forEach(function(d){return a.call(b,d,d,c)})};return b});
var l=this,m=function(a){return"string"==typeof a},ka=function(a,b){a=a.split(".");var c=l;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b},la=function(){},n=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==
typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ma=function(a){return"array"==n(a)},na=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},oa="closure_uid_"+
(1E9*Math.random()>>>0),pa=0,qa=function(a,b,c){return a.call.apply(a.bind,arguments)},ra=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},sa=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa=qa:sa=ra;return sa.apply(null,arguments)},
q=function(a,b){function c(){}c.prototype=b.prototype;a.R=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.rd=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var ta=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};q(ta,Error);ta.prototype.name="CustomError";var ua;var va=function(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");ta.call(this,c+a[d])};q(va,ta);va.prototype.name="AssertionError";
var wa=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var f=d}else a&&(e+=": "+a,f=b);throw new va(""+e,f||[]);},r=function(a,b,c){a||wa("",null,b,Array.prototype.slice.call(arguments,2));return a},xa=function(a,b){throw new va("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));},ya=function(a,b,c){"number"==typeof a||wa("Expected number but got %s: %s.",[n(a),a],b,Array.prototype.slice.call(arguments,2))},za=function(a,b,c){m(a)||wa("Expected string but got %s: %s.",[n(a),
a],b,Array.prototype.slice.call(arguments,2));return a},Aa=function(a,b,c){na(a)||wa("Expected object but got %s: %s.",[n(a),a],b,Array.prototype.slice.call(arguments,2))};var Ba=Array.prototype.indexOf?function(a,b){r(null!=a.length);return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(m(a))return m(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ca=Array.prototype.forEach?function(a,b,c){r(null!=a.length);Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Da=Array.prototype.filter?function(a,b){r(null!=a.length);return Array.prototype.filter.call(a,
b,void 0)}:function(a,b){for(var c=a.length,d=[],e=0,f=m(a)?a.split(""):a,h=0;h<c;h++)if(h in f){var p=f[h];b.call(void 0,p,h,a)&&(d[e++]=p)}return d},Fa=function(a,b){b=Ba(a,b);var c;(c=0<=b)&&Ea(a,b);return c},Ea=function(a,b){r(null!=a.length);Array.prototype.splice.call(a,b,1)},Ga=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e=d,f=n(e);if("array"==f||"object"==f&&"number"==typeof e.length){e=a.length||0;f=d.length||0;a.length=e+f;for(var h=0;h<f;h++)a[e+h]=d[h]}else a.push(d)}},
Ia=function(a,b,c,d){r(null!=a.length);Array.prototype.splice.apply(a,Ha(arguments,1))},Ha=function(a,b,c){r(null!=a.length);return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)},Ka=function(a,b){a.sort(b||Ja)},Ja=function(a,b){return a>b?1:a<b?-1:0};var La=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},Ta=function(a){if(!Ma.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Na,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Oa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Pa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Qa,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ra,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Sa,"&#0;"));return a},Na=/&/g,Oa=/</g,Pa=/>/g,Qa=/"/g,Ra=/'/g,Sa=/\x00/g,Ma=
/[\x00&<>"']/,Va=function(a,b){var c=0;a=La(String(a)).split(".");b=La(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",h=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;c=Ua(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||Ua(0==f[2].length,0==h[2].length)||Ua(f[2],h[2]);f=f[3];h=h[3]}while(0==c)}return c},Ua=function(a,b){return a<b?-1:a>b?1:
0};var Wa;a:{var Xa=l.navigator;if(Xa){var Ya=Xa.userAgent;if(Ya){Wa=Ya;break a}}Wa=""}var t=function(a){return-1!=Wa.indexOf(a)};var Za=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b},$a="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),ab=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<$a.length;f++)c=$a[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var bb=function(a){bb[" "](a);return a};bb[" "]=la;var cb=function(a,b,c){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:a[b]=c(b)};var db=t("Opera"),eb=t("Trident")||t("MSIE"),fb=t("Edge"),gb=t("Gecko")&&!(-1!=Wa.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),hb=-1!=Wa.toLowerCase().indexOf("webkit")&&!t("Edge"),ib=function(){var a=l.document;return a?a.documentMode:void 0},jb;
a:{var kb="",lb=function(){var a=Wa;if(gb)return/rv:([^\);]+)(\)|;)/.exec(a);if(fb)return/Edge\/([\d\.]+)/.exec(a);if(eb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(hb)return/WebKit\/(\S+)/.exec(a);if(db)return/(?:Version)[ \/]?(\S+)/.exec(a)}();lb&&(kb=lb?lb[1]:"");if(eb){var mb=ib();if(null!=mb&&mb>parseFloat(kb)){jb=String(mb);break a}}jb=kb}var nb=jb,ob={},pb;var qb=l.document;pb=qb&&eb?ib()||("CSS1Compat"==qb.compatMode?parseInt(nb,10):5):void 0;var rb=Object.freeze||function(a){return a};var sb=function(){this.la=this.la;this.Ea=this.Ea};sb.prototype.la=!1;var tb=function(a){if(a.classList)return a.classList;a=a.className;return m(a)&&a.match(/\S+/g)||[]},ub=function(a){a.classList?a=a.classList.contains("fullscreen"):(a=tb(a),a=0<=Ba(a,"fullscreen"));return a},vb=function(a){a.classList?a.classList.remove("fullscreen"):ub(a)&&(a.className=Da(tb(a),function(a){return"fullscreen"!=a}).join(" "))};var xb=function(){this.Da=wb};xb.prototype.toString=function(){return"TrustedResourceUrl{}"};var wb={};var zb=function(){this.ca="";this.Ba=yb};zb.prototype.toString=function(){return"SafeUrl{"+this.ca+"}"};
var Ab=/^(?:audio\/(?:3gpp|3gpp2|aac|midi|mp4|mpeg|ogg|x-m4a|x-wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|text\/csv|video\/(?:mpeg|mp4|ogg|webm))$/i,Cb=function(a){if(Ab.test(a.type)){var b=void 0!==l.URL&&void 0!==l.URL.createObjectURL?l.URL:void 0!==l.webkitURL&&void 0!==l.webkitURL.createObjectURL?l.webkitURL:void 0!==l.createObjectURL?l:null;if(null==b)throw Error("This browser doesn't seem to support blob URLs");a=b.createObjectURL(a)}else a="about:invalid#zClosurez";return Bb(a)},Db=
/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i,Eb=function(a){var b=a.match(Db);b=b&&Ab.test(b[1]);return Bb(b?a:"about:invalid#zClosurez")},yb={},Bb=function(a){var b=new zb;b.ca=a;return b};Bb("about:blank");var Fb=function(a,b){this.width=a;this.height=b};g=Fb.prototype;g.clone=function(){return new Fb(this.width,this.height)};g.toString=function(){return"("+this.width+" x "+this.height+")"};g.aspectRatio=function(){return this.width/this.height};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};var Ib=function(a){return a?new Gb(Hb(a)):ua||(ua=new Gb)},Jb=function(a){return m(a)?document.getElementById(a):a},Hb=function(a){r(a,"Node cannot be null or undefined.");return 9==a.nodeType?a:a.ownerDocument||a.document},Gb=function(a){this.a=a||l.document||document};Gb.prototype.B=function(){return m(void 0)?this.a.getElementById(void 0):void 0};var Kb;(Kb=!eb)||(Kb=9<=Number(pb));var Lb=Kb,Mb=eb&&!cb(ob,"9",function(){return 0<=Va(nb,"9")}),Nb=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});l.addEventListener("test",la,b);l.removeEventListener("test",la,b);return a}();var v=function(a,b){this.type=a;this.a=this.target=b;this.f=!1;this.va=!0};v.prototype.h=function(){this.f=!0;this.va=!1};var Ob=function(a,b){v.call(this,a?a.type:"");this.relatedTarget=this.a=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.j=null;a&&this.init(a,b)};q(Ob,v);var Pb=rb({2:"touch",3:"pen",4:"mouse"});
Ob.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.a=b;if(b=a.relatedTarget){if(gb){a:{try{bb(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=
void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=m(a.pointerType)?a.pointerType:Pb[a.pointerType]||"";this.j=a;a.defaultPrevented&&this.h()};
Ob.prototype.h=function(){Ob.R.h.call(this);var a=this.j;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Mb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Qb="closure_listenable_"+(1E6*Math.random()|0),Rb=0;var Sb=function(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.capture=!!d;this.aa=e;this.key=++Rb;this.P=this.Z=!1},Tb=function(a){a.P=!0;a.listener=null;a.a=null;a.src=null;a.aa=null};var Ub=function(a){this.src=a;this.a={};this.f=0};Ub.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.f++);var h=Vb(a,b,d,e);-1<h?(b=a[h],c||(b.Z=!1)):(b=new Sb(b,this.src,f,!!d,e),b.Z=c,a.push(b));return b};var Wb=function(a,b){var c=b.type;c in a.a&&Fa(a.a[c],b)&&(Tb(b),0==a.a[c].length&&(delete a.a[c],a.f--))},Vb=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.P&&f.listener==b&&f.capture==!!c&&f.aa==d)return e}return-1};var Xb="closure_lm_"+(1E6*Math.random()|0),Yb={},Zb=0,ac=function(a,b,c,d,e){if(d&&d.once)return $b(a,b,c,d,e);if(ma(b)){for(var f=0;f<b.length;f++)ac(a,b[f],c,d,e);return null}c=bc(c);a&&a[Qb]?(d=na(d)?!!d.capture:!!d,cc(a),a=a.w.add(String(b),c,!1,d,e)):a=dc(a,b,c,!1,d,e);return a},dc=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=na(e)?!!e.capture:!!e,p=ec(a);p||(a[Xb]=p=new Ub(a));c=p.add(b,c,d,h,f);if(c.a)return c;d=fc();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)Nb||
(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(gc(b.toString()),d);else if(a.addListener&&a.removeListener)r("change"===b,"MediaQueryList only has a change event"),a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Zb++;return c},fc=function(){var a=hc,b=Lb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},$b=function(a,b,c,d,e){if(ma(b)){for(var f=
0;f<b.length;f++)$b(a,b[f],c,d,e);return null}c=bc(c);return a&&a[Qb]?a.w.add(String(b),c,!0,na(d)?!!d.capture:!!d,e):dc(a,b,c,!0,d,e)},ic=function(a,b,c,d,e){if(ma(b))for(var f=0;f<b.length;f++)ic(a,b[f],c,d,e);else(d=na(d)?!!d.capture:!!d,c=bc(c),a&&a[Qb])?(a=a.w,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Vb(f,c,d,e),-1<c&&(Tb(f[c]),Ea(f,c),0==f.length&&(delete a.a[b],a.f--)))):a&&(a=ec(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Vb(b,c,d,e)),(c=-1<a?b[a]:null)&&jc(c))},jc=function(a){if("number"!=typeof a&&
a&&!a.P){var b=a.src;if(b&&b[Qb])Wb(b.w,a);else{var c=a.type,d=a.a;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(gc(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Zb--;(c=ec(b))?(Wb(c,a),0==c.f&&(c.src=null,b[Xb]=null)):Tb(a)}}},gc=function(a){return a in Yb?Yb[a]:Yb[a]="on"+a},lc=function(a,b,c,d){var e=!0;if(a=ec(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.P&&(f=kc(f,d),e=e&&!1!==f)}return e},
kc=function(a,b){var c=a.listener,d=a.aa||a.src;a.Z&&jc(a);return c.call(d,b)},hc=function(a,b){if(a.P)return!0;if(!Lb){if(!b)a:{b=["window","event"];for(var c=l,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new Ob(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.a;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;0<=e;e--){b.a=d[e];var f=lc(d[e],
a,!0,b);c=c&&f}for(e=0;e<d.length;e++)b.a=d[e],f=lc(d[e],a,!1,b),c=c&&f}return c}return kc(a,new Ob(b,this))},ec=function(a){a=a[Xb];return a instanceof Ub?a:null},mc="__closure_events_fn_"+(1E9*Math.random()>>>0),bc=function(a){r(a,"Listener can not be null.");if("function"==n(a))return a;r(a.handleEvent,"An object listener must have handleEvent method.");a[mc]||(a[mc]=function(b){return a.handleEvent(b)});return a[mc]};var nc=function(a){sb.call(this);this.a=a;this.f={}};q(nc,sb);var oc=[],pc=function(a,b,c,d){ma(c)||(c&&(oc[0]=c.toString()),c=oc);for(var e=0;e<c.length;e++){var f=ac(b,c[e],d||a.handleEvent,!1,a.a||a);if(!f)break;a.f[f.key]=f}},rc=function(a,b,c){qc(a,b,"o",c,void 0)},qc=function(a,b,c,d,e,f){if(ma(c))for(var h=0;h<c.length;h++)qc(a,b,c[h],d,e,f);else(b=$b(b,c,d||a.handleEvent,e,f||a.a||a))&&(a.f[b.key]=b)};
nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var w=function(){sb.call(this);this.w=new Ub(this);this.Aa=this;this.V=null};q(w,sb);w.prototype[Qb]=!0;w.prototype.ba=function(a){this.V=a};w.prototype.removeEventListener=function(a,b,c,d){ic(this,a,b,c,d)};
var x=function(a,b){cc(a);var c=a.V;if(c){var d=[];for(var e=1;c;c=c.V)d.push(c),r(1E3>++e,"infinite loop")}a=a.Aa;c=b.type||b;m(b)?b=new v(b,a):b instanceof v?b.target=b.target||a:(e=b,b=new v(c,a),ab(b,e));e=!0;if(d)for(var f=d.length-1;0<=f;f--){var h=b.a=d[f];e=sc(h,c,!0,b)&&e}h=b.a=a;e=sc(h,c,!0,b)&&e;e=sc(h,c,!1,b)&&e;if(d)for(f=0;f<d.length;f++)h=b.a=d[f],e=sc(h,c,!1,b)&&e;return e},sc=function(a,b,c,d){b=a.w.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];
if(h&&!h.P&&h.capture==c){var p=h.listener,u=h.aa||h.src;h.Z&&Wb(a.w,h);e=!1!==p.call(u,d)&&e}}return e&&0!=d.va},cc=function(a){r(a.w,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};var y=function(a,b){this.a=a|0;this.f=b|0},tc={},uc={},z=function(a){return cb(tc,a,function(a){return new y(a,0>a?-1:0)})},vc=function(a){var b=a|0;r(a===b,"value should be a 32-bit integer");return-128<=b&&128>b?z(b):new y(b,0>b?-1:0)},E=function(a){return isNaN(a)?z(0):a<=-wc?B():a+1>=wc?xc():0>a?D(E(-a)):new y(a%4294967296|0,a/4294967296|0)},F=function(a,b){return new y(a,b)},yc=function(a,b){if(0==a.length)throw Error("number format error: empty string");b=b||10;if(2>b||36<b)throw Error("radix out of range: "+
b);if("-"==a.charAt(0))return D(yc(a.substring(1),b));if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);for(var c=E(Math.pow(b,8)),d=z(0),e=0;e<a.length;e+=8){var f=Math.min(8,a.length-e),h=parseInt(a.substring(e,e+f),b);8>f?(f=E(Math.pow(b,f)),d=G(d,f).add(E(h))):(d=G(d,c),d=d.add(E(h)))}return d},wc=4294967296*4294967296/2,xc=function(){return cb(uc,1,function(){return F(-1,2147483647)})},B=function(){return cb(uc,2,function(){return F(0,-2147483648)})},zc=function(){return cb(uc,
6,function(){return vc(16777216)})};y.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(Ac(this))return"0";if(0>this.f){if(this.s(B())){var b=E(a),c=Bc(this,b);b=Cc(G(c,b),this);return c.toString(a)+b.a.toString(a)}return"-"+D(this).toString(a)}c=E(Math.pow(a,6));b=this;for(var d="";;){var e=Bc(b,c),f=(Cc(b,G(e,c)).a>>>0).toString(a);b=e;if(Ac(b))return f+d;for(;6>f.length;)f="0"+f;d=""+f+d}};
var Dc=function(a){return 0<=a.a?a.a:4294967296+a.a},Ac=function(a){return 0==a.f&&0==a.a};y.prototype.s=function(a){return this.f==a.f&&this.a==a.a};var Fc=function(a){var b=zc();return 0>Ec(a,b)},Ec=function(a,b){if(a.s(b))return 0;var c=0>a.f,d=0>b.f;return c&&!d?-1:!c&&d?1:0>Cc(a,b).f?-1:1},D=function(a){return a.s(B())?B():F(~a.a,~a.f).add(z(1))};
y.prototype.add=function(a){var b=this.f>>>16,c=this.f&65535,d=this.a>>>16,e=a.f>>>16,f=a.f&65535,h=a.a>>>16;a=(this.a&65535)+(a.a&65535);h=(a>>>16)+(d+h);d=h>>>16;d+=c+f;b=(d>>>16)+(b+e)&65535;return F((h&65535)<<16|a&65535,b<<16|d&65535)};
var Cc=function(a,b){return a.add(D(b))},G=function(a,b){if(Ac(a)||Ac(b))return z(0);if(a.s(B()))return 1==(b.a&1)?B():z(0);if(b.s(B()))return 1==(a.a&1)?B():z(0);if(0>a.f)return 0>b.f?G(D(a),D(b)):D(G(D(a),b));if(0>b.f)return D(G(a,D(b)));if(Fc(a)&&Fc(b))return E((4294967296*a.f+Dc(a))*(4294967296*b.f+Dc(b)));var c=a.f>>>16,d=a.f&65535,e=a.a>>>16;a=a.a&65535;var f=b.f>>>16,h=b.f&65535,p=b.a>>>16;b=b.a&65535;var u=a*b;var C=(u>>>16)+e*b;var A=C>>>16;C=(C&65535)+a*p;A+=C>>>16;A+=d*b;var N=A>>>16;A=
(A&65535)+e*p;N+=A>>>16;A=(A&65535)+a*h;N=N+(A>>>16)+(c*b+d*p+e*h+a*f)&65535;return F((C&65535)<<16|u&65535,N<<16|A&65535)},Bc=function(a,b){if(Ac(b))throw Error("division by zero");if(Ac(a))return z(0);if(a.s(B())){if(b.s(z(1))||b.s(z(-1)))return B();if(b.s(B()))return z(1);var c=1;if(0==c)c=a;else{var d=a.f;c=32>c?F(a.a>>>c|d<<32-c,d>>c):F(d>>c-32,0<=d?0:-1)}c=Gc(Bc(c,b),1);if(c.s(z(0)))return 0>b.f?z(1):z(-1);a=Cc(a,G(b,c));return c.add(Bc(a,b))}if(b.s(B()))return z(0);if(0>a.f)return 0>b.f?Bc(D(a),
D(b)):D(Bc(D(a),b));if(0>b.f)return D(Bc(a,D(b)));for(d=z(0);0<=Ec(a,b);){c=Math.max(1,Math.floor((4294967296*a.f+Dc(a))/(4294967296*b.f+Dc(b))));var e=Math.ceil(Math.log(c)/Math.LN2);e=48>=e?1:Math.pow(2,e-48);for(var f=E(c),h=G(f,b);0>h.f||0<Ec(h,a);)c-=e,f=E(c),h=G(f,b);Ac(f)&&(f=z(1));d=d.add(f);a=Cc(a,h)}return d};y.prototype.and=function(a){return F(this.a&a.a,this.f&a.f)};y.prototype.or=function(a){return F(this.a|a.a,this.f|a.f)};y.prototype.xor=function(a){return F(this.a^a.a,this.f^a.f)};
var Gc=function(a,b){b&=63;if(0==b)return a;var c=a.a;return 32>b?F(c<<b,a.f<<b|c>>>32-b):F(0,c<<b-32)},Hc=function(a,b){b&=63;if(0==b)return a;var c=a.f;return 32>b?F(a.a>>>b|c<<32-b,c>>>b):32==b?F(c,0):F(c>>>b-32,0)};var Ic=function(a,b){this.ea=a;this.a={};for(a=0;a<b.length;a++){var c=b[a];this.a[c.a]=c}},Jc=function(a){a=Za(a.a);Ka(a,function(a,c){return a.a-c.a});return a},Kc=function(a,b){r(!/[^0-9]/.test(b));return a.a[parseInt(b,10)]||null};var Lc=function(a,b,c){this.i=a;r(!/[^0-9]/.test(b));this.a=b;this.m=!!c.fa;this.h=!!c.l;this.f=c.b;this.j=c.type;this.w=!1;switch(this.f){case 3:case 4:case 6:case 16:case 18:case 2:case 1:this.w=!0}},Mc=function(a){return 11==a.f||10==a.f};var H=function(){this.u={};this.f=this.c().a;this.a=null};H.prototype.has=function(a){r(a.i.prototype.c()==this.c(),"The current message does not contain the given field");return null!=this.u[a.a]};var Nc=function(a,b){r(b.i.prototype.c()==a.c(),"The current message does not contain the given field");b=b.a;return a.f[b].h?null!=a.u[b]?a.u[b].length:0:null!=a.u[b]?1:0};
H.prototype.get=function(a,b){r(a.i.prototype.c()==this.c(),"The current message does not contain the given field");return Oc(this,a.a,b)};H.prototype.set=function(a,b){r(a.i.prototype.c()==this.c(),"The current message does not contain the given field");I(this,a.a,b)};H.prototype.add=function(a,b){r(a.i.prototype.c()==this.c(),"The current message does not contain the given field");Pc(this,a.a,b)};
H.prototype.s=function(a){if(!a||this.constructor!=a.constructor)return!1;for(var b=Jc(this.c()),c=0;c<b.length;c++){var d=b[c],e=d.a;if(null!=this.u[e]!=(null!=a.u[e]))return!1;if(null!=this.u[e]){var f=Mc(d),h=Qc(this,e);e=Qc(a,e);if(d.h){if(h.length!=e.length)return!1;for(d=0;d<h.length;d++){var p=h[d],u=e[d];if(f?!p.s(u):p!=u)return!1}}else if(f?!h.s(e):h!=e)return!1}}return!0};
var Rc=function(a,b){r(a.constructor==b.constructor,"The source message must have the same type.");for(var c=Jc(a.c()),d=0;d<c.length;d++){var e=c[d],f=e.a;if(null!=b.u[f]){a.a&&delete a.a[e.a];var h=Mc(e);if(e.h){e=Qc(b,f)||[];for(var p=0;p<e.length;p++)Pc(a,f,h?e[p].clone():e[p])}else e=Qc(b,f),h?(h=Qc(a,f))?Rc(h,e):I(a,f,e.clone()):I(a,f,e)}}};
H.prototype.clone=function(){var a=new this.constructor;r(a.constructor==this.constructor,"The source message must have the same type.");a!=this&&(a.u={},a.a&&(a.a={}),Rc(a,this));return a};
var Qc=function(a,b){a=a.u[b];return null==a?null:a},Oc=function(a,b,c){var d=Qc(a,b);return a.f[b].h?(a=c||0,r(0<=a&&a<d.length,"Given index %s is out of bounds.  Repeated field length: %s",a,d.length),d[a]):d},I=function(a,b,c){var d=a.f[b];14==d.f?ya(c):r(Object(c).constructor==d.j);a.u[b]=c;a.a&&(a.a[b]=c)},Pc=function(a,b,c){var d=a.f[b];14==d.f?ya(c):r(Object(c).constructor==d.j);a.u[b]||(a.u[b]=[]);a.u[b].push(c);a.a&&delete a.a[b]},J=function(a,b){var c=[],d;for(d in b)0!=d&&c.push(new Lc(a,
d,b[d]));return new Ic(a,c)};var Sc=function(){};Sc.prototype.j=function(a,b){Mc(a)&&K(this,b)};Sc.prototype.h=function(a,b){if(Mc(a))return b instanceof H||(a=new (a.j.prototype.c().ea),Tc(this,a,b),r(a instanceof H),b=a),b;if(14==a.f)return m(b)&&Uc.test(b)&&(a=Number(b),0<a)?a:b;if(!a.w)return b;a=a.j;if(a===String){if("number"==typeof b)return String(b)}else if(a===Number&&m(b)&&("Infinity"===b||"-Infinity"===b||"NaN"===b||Uc.test(b)))return Number(b);return b};var Uc=/^-?[0-9]+$/;var Vc={sd:!0},Wc={vd:!0},Xc={ud:!0},Yc={td:!0},L=function(){throw Error("Do not instantiate directly");};L.prototype.a=null;L.prototype.toString=function(){return this.T};var Zc=function(){L.call(this)};q(Zc,L);Zc.prototype.H=Vc;var $c=function(){L.call(this)};q($c,L);$c.prototype.H=Wc;$c.prototype.a=1;var ad=function(){L.call(this)};q(ad,L);ad.prototype.H=Xc;ad.prototype.a=1;var ed=function(a,b){r(a,"Soy template may not be null.");b=a(b||bd,void 0,void 0);a=Ib().a.createElement("DIV");b=cd(b);var c=b.match(dd);r(!c,"This template starts with a %s, which cannot be a child of a <div>, as required by soy internals. Consider using goog.soy.renderElement instead.\nTemplate output: %s",c&&c[0],b);a.innerHTML=b;1==a.childNodes.length&&(b=a.firstChild,1==b.nodeType&&(a=b));return a},cd=function(a){if(!na(a))return String(a);if(a instanceof L){if(a.H===Vc)return za(a.T);if(a.H===
Yc)return Ta(a.T)}xa("Soy template output is unsafe for use as HTML: "+a);return"zSoyz"},dd=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,bd={};var fd=function(){};fd.a=void 0;fd.S=function(){return fd.a?fd.a:fd.a=new fd};fd.prototype.a=0;var M=function(a){w.call(this);this.U=a||Ib();this.O=null;this.A=!1;this.f=null;this.ja=void 0;this.N=this.h=this.j=null};q(M,w);M.prototype.na=fd.S();M.prototype.B=function(){return this.f};var gd=function(a){a.ja||(a.ja=new nc(a));return r(a.ja)},hd=function(a,b){if(a==b)throw Error("Unable to set parent component");var c;if(c=b&&a.j&&a.O){var d=a.j;c=a.O;d.N&&c?(d=d.N,c=(null!==d&&c in d?d[c]:void 0)||null):c=null}if(c&&a.j!=b)throw Error("Unable to set parent component");a.j=b;M.R.ba.call(a,b)};
M.prototype.ba=function(a){if(this.j&&this.j!=a)throw Error("Method not supported");M.R.ba.call(this,a)};M.prototype.$=function(){this.f=this.U.a.createElement("DIV")};M.prototype.render=function(a){if(this.A)throw Error("Component already rendered");this.f||this.$();a?a.insertBefore(this.f,null):this.U.a.body.appendChild(this.f);this.j&&!this.j.A||this.v()};M.prototype.v=function(){this.A=!0;id(this,function(a){!a.A&&a.B()&&a.v()})};
var jd=function(a,b){var c=a.h?a.h.length:0;r(!!b,"Provided element must not be null.");if(b.A&&!a.A)throw Error("Component already rendered");if(0>c||c>(a.h?a.h.length:0))throw Error("Child component index out of bounds");a.N&&a.h||(a.N={},a.h=[]);if(b.j==a){var d=b.O||(b.O=":"+(b.na.a++).toString(36));a.N[d]=b;Fa(a.h,b)}else{d=a.N;var e=b.O||(b.O=":"+(b.na.a++).toString(36));if(null!==d&&e in d)throw Error('The object already contains the key "'+e+'"');d[e]=b}hd(b,a);Ia(a.h,c,0,b);b.A&&a.A&&b.j==
a?(a=a.f,c=a.childNodes[c]||null,c!=b.B()&&a.insertBefore(b.B(),c)):a.A&&!b.A&&b.f&&b.f.parentNode&&1==b.f.parentNode.nodeType&&b.v()},id=function(a,b){a.h&&Ca(a.h,b,void 0)};var kd=function(a){function b(a){this.T=a}b.prototype=a.prototype;return function(a,d){a=new b(String(a));void 0!==d&&(a.a=d);return a}}(Zc);(function(a){function b(a){this.T=a}b.prototype=a.prototype;return function(a,d){a=String(a);if(!a)return"";a=new b(a);void 0!==d&&(a.a=d);return a}})(Zc);
var pd=function(a){return null!=a&&a.H===Vc?(r(a.constructor===Zc),String(String(a.T).replace(ld,"").replace(md,"&lt;")).replace(nd,od)):Ta(String(a))},qd=function(a,b,c){a||(a=c instanceof Function?c.displayName||c.name||"unknown type name":c instanceof Object?c.constructor.displayName||c.constructor.name||Object.prototype.toString.call(c):null===c?"null":typeof c,xa("expected param "+b+" of type !goog.soy.data.SanitizedContent|string"+(", but got "+a)+"."));return c},rd={"\x00":"&#0;","\t":"&#9;",
"\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"},od=function(a){return rd[a]},sd={"\x00":"%00","\u0001":"%01","\u0002":"%02","\u0003":"%03","\u0004":"%04","\u0005":"%05","\u0006":"%06","\u0007":"%07","\b":"%08","\t":"%09","\n":"%0A","\x0B":"%0B","\f":"%0C","\r":"%0D","\u000e":"%0E","\u000f":"%0F","\u0010":"%10",
"\u0011":"%11","\u0012":"%12","\u0013":"%13","\u0014":"%14","\u0015":"%15","\u0016":"%16","\u0017":"%17","\u0018":"%18","\u0019":"%19","\u001a":"%1A","\u001b":"%1B","\u001c":"%1C","\u001d":"%1D","\u001e":"%1E","\u001f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\u007f":"%7F","\u0085":"%C2%85","\u00a0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86",
"\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"},td=function(a){return sd[a]},nd=/[\x00\x22\x27\x3c\x3e]/g,ud=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,
vd=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,ld=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,md=/</g;var O=function(){H.call(this)};q(O,H);var wd=null,xd={fd:0,jc:1,KEEP:2,Gb:3,ic:4},yd={kd:0,Sb:1,Uc:2,dc:3,lc:4},P=function(){H.call(this)};q(P,H);var zd=null,Ad={cd:0,Mb:1,OPENED:2,Bc:3,pc:4,Ac:5,Db:6,ad:7,Lc:8,Jb:9,Pc:10,yb:11,gc:12},Bd=function(){H.call(this)};q(Bd,H);var Cd=null,Dd=function(){H.call(this)};q(Dd,H);var Ed=null,Fd=function(){H.call(this)};q(Fd,H);var Gd=null,Hd=function(){H.call(this)};q(Hd,H);var Id=null,Jd=function(){H.call(this)};q(Jd,H);var Kd=null,Ld=function(){H.call(this)};
q(Ld,H);var Md=null,Nd={hd:0,Vc:1,Wc:2,Tc:3,Zc:4,Xc:5,Yc:6,Hb:7,Oc:8},Od={jd:0,Yb:1,wa:2,za:3,ya:4,vc:5},Pd={ed:0,Nc:1,Tb:2,fc:3},Qd=function(){H.call(this)};q(Qd,H);var Rd=null,Sd={dd:0,sc:1,Jc:2},Td=function(){H.call(this)};q(Td,H);var Ud=null,Vd={Lb:0,Kb:1,Sc:2};
O.prototype.c=function(){var a=wd;a||(wd=a=J(O,{0:{name:"InkEvent",g:"logs.proto.research.ink.InkEvent"},1:{name:"host",b:14,defaultValue:0,type:xd},2:{name:"event_type",b:14,defaultValue:0,type:yd},3:{name:"document_event",b:11,type:P},4:{name:"toolbar_event",b:11,type:Ld},5:{name:"engine_event",b:11,type:Qd},6:{name:"gms_event",b:11,type:Td}}));return a};O.c=O.prototype.c;
P.prototype.c=function(){var a=zd;a||(zd=a=J(P,{0:{name:"DocumentEvent",F:O,g:"logs.proto.research.ink.InkEvent.DocumentEvent"},1:{name:"event_type",b:14,defaultValue:0,type:Ad},2:{name:"opened_event",b:11,type:Bd},3:{name:"open_cancelled_event",b:11,type:Dd},4:{name:"error_code",b:3,type:String},5:{name:"brix_error_code",b:3,type:String},6:{name:"collaborator_joined_event",b:11,type:Fd},7:{name:"document_state",b:11,type:Hd}}));return a};P.c=P.prototype.c;
Bd.prototype.c=function(){var a=Cd;a||(Cd=a=J(Bd,{0:{name:"OpenedEvent",F:P,g:"logs.proto.research.ink.InkEvent.DocumentEvent.OpenedEvent"},1:{name:"millis_until_first_byte_loaded",b:3,type:String},2:{name:"millis_until_editable",b:3,type:String},3:{name:"missing_document_bounds",b:8,type:Boolean},4:{name:"was_opened_by_cosmoid",b:8,type:Boolean},5:{name:"active_users",b:3,type:String}}));return a};Bd.c=Bd.prototype.c;
Dd.prototype.c=function(){var a=Ed;a||(Ed=a=J(Dd,{0:{name:"OpenCancelledEvent",F:P,g:"logs.proto.research.ink.InkEvent.DocumentEvent.OpenCancelledEvent"},1:{name:"time_until_cancelled",b:3,type:String}}));return a};Dd.c=Dd.prototype.c;Fd.prototype.c=function(){var a=Gd;a||(Gd=a=J(Fd,{0:{name:"CollaboratorJoined",F:P,g:"logs.proto.research.ink.InkEvent.DocumentEvent.CollaboratorJoined"},1:{name:"is_me",b:8,type:Boolean}}));return a};Fd.c=Fd.prototype.c;
Hd.prototype.c=function(){var a=Id;a||(Id=a=J(Hd,{0:{name:"DocumentState",F:P,g:"logs.proto.research.ink.InkEvent.DocumentEvent.DocumentState"},1:{name:"stroke_count",b:3,type:String},2:{name:"text_field",l:!0,b:11,type:Jd},3:{name:"sticker_count",b:3,type:String}}));return a};Hd.c=Hd.prototype.c;
Jd.prototype.c=function(){var a=Kd;a||(Kd=a=J(Jd,{0:{name:"TextField",F:Hd,g:"logs.proto.research.ink.InkEvent.DocumentEvent.DocumentState.TextField"},1:{name:"character_count",b:3,type:String},2:{name:"line_count",b:3,type:String}}));return a};Jd.c=Jd.prototype.c;
Ld.prototype.c=function(){var a=Md;a||(Md=a=J(Ld,{0:{name:"ToolbarEvent",F:O,g:"logs.proto.research.ink.InkEvent.ToolbarEvent"},1:{name:"tool_event_type",b:14,defaultValue:0,type:Nd},2:{name:"tool_type",b:14,defaultValue:0,type:Od},3:{name:"expand_method",b:14,defaultValue:0,type:Pd},4:{name:"color",b:5,type:Number}}));return a};Ld.c=Ld.prototype.c;
Qd.prototype.c=function(){var a=Rd;a||(Rd=a=J(Qd,{0:{name:"EngineEvent",F:O,g:"logs.proto.research.ink.InkEvent.EngineEvent"},1:{name:"engine_event_type",b:14,defaultValue:0,type:Sd},2:{name:"error_code",b:3,type:String}}));return a};Qd.c=Qd.prototype.c;
Td.prototype.c=function(){var a=Ud;a||(Ud=a=J(Td,{0:{name:"GmsEvent",F:O,g:"logs.proto.research.ink.InkEvent.GmsEvent"},1:{name:"gms_event_type",b:14,defaultValue:0,type:Vd},2:{name:"time_since_connect_start",b:3,type:String},3:{name:"failure_has_resolution",b:8,type:Boolean},4:{name:"gms_error_code",b:3,type:String}}));return a};Td.c=Td.prototype.c;var Wd=function(){this.a=[];this.i={value:0,length:0};this.w={value:z(0),length:0};this.f=new DataView(new ArrayBuffer(8))};q(Wd,Sc);
var K=function(a,b){if(null==b)return[];a.a=[];for(var c=Jc(b.c()),d=0;d<c.length;d++){var e=c[d];if(b.has(e))if(e.h)if(e.m){var f=a,h=b,p=e;e=f.a;Q(f,p.a<<3|2);for(var u=e.length,C=0,A=Nc(h,p);C<A;C++){var N=h.get(p,C);f.j(p,N,!0)}h=e.splice(u,e.length-u);Q(f,h.length);e.splice.apply(e,[e.length,0].concat(h))}else for(f=0,h=Nc(b,e);f<h;f++)p=b.get(e,f),a.j(e,p);else a.j(e,b.get(e))}return a.a};
Wd.prototype.j=function(a,b,c){if(c=!c){a:{switch(a.f){default:c=!1;break a;case 17:case 18:case 8:case 3:case 14:case 5:case 13:case 4:c=0;break;case 6:case 16:case 1:c=1;break;case 9:case 12:case 11:c=2;break;case 10:c=3;break;case 7:case 15:case 2:c=5}Q(this,a.a<<3|c);c=!0}c=!c}if(!c)switch(a.f){default:throw Error("Unknown field type "+a.f);case 17:Q(this,b<<1^-(b>>>31));break;case 18:a=yc(b);a=Gc(a,1).xor(D(Hc(a,63)));Xd(this,a);break;case 8:Q(this,b?1:0);break;case 5:0<b?Q(this,b):Xd(this,vc(b));
break;case 3:case 4:Xd(this,yc(b));break;case 14:case 13:Q(this,b);break;case 6:case 16:Yd(this,yc(b),8);break;case 1:this.f.setFloat64(0,b,!0);for(a=0;8>a;a++)this.a.push(this.f.getUint8(a));break;case 9:if(null!=b)for(a=unescape(encodeURIComponent(b)),Q(this,a.length),b=0;b<a.length;b++)this.a.push(a.charCodeAt(b));break;case 12:if(null!=b)for(Q(this,b.length),a=0;a<b.length;a++)this.a.push(b.charCodeAt(a));break;case 10:b=K(new Wd,b);Ga(this.a,b);Q(this,a.a<<3|4);break;case 11:b=K(new Wd,b);Q(this,
b.length);Ga(this.a,b);break;case 7:Yd(this,E(b),4);break;case 15:Yd(this,vc(b),4);break;case 2:for(this.f.setFloat32(0,b,!0),a=0;4>a;a++)this.a.push(this.f.getUint8(a))}};
var Tc=function(a,b,c){if(null!=c){c instanceof ArrayBuffer&&(c=new Uint8Array(c));for(var d=b.c(),e=0;e<c.length;){var f=Zd(a,c.subarray(e)),h=f.value,p=h>>3;h&=7;e+=f.length;if(f=Kc(d,p))if(f.m)for(p=Zd(a,c.subarray(e)),h=p.value,e+=p.length;0<h&&e<c.length;){p=a.h(f,c.subarray(e));if(!p)throw Error("Expected "+f.f);b.add(f,p.value);e+=p.length;h-=p.length}else{h=a.h(f,c.subarray(e));if(!h)throw Error("Expected "+f.f);e+=h.length;f.h?b.add(f,h.value):b.set(f,h.value)}else{f=e;p=a;e=c.subarray(e);
var u=0;switch(h){case 0:u=$d(p,e).length;break;case 1:u=8;break;case 2:e=$d(p,e);u=e.length+e.value.a;break;case 3:case 4:xa("Error deserializing group");break;case 5:u=4}e=f+u}}}};
Wd.prototype.h=function(a,b){var c=null,d=a.f,e=$d(this,b),f=e.length;switch(d){case 17:a=e.value.a;c=a>>>1^-(a&1);break;case 18:a=e.value;c=Hc(a,1).xor(D(a.and(z(1)))).toString();break;case 8:c=e.value.s(z(1));break;case 3:case 4:c=e.value.toString();break;case 5:c=e.value.a;break;case 14:case 13:c=Dc(e.value);break;case 6:case 16:a=b.subarray(0,8);c=(new y(ae(a.subarray(0,4),!0),ae(a.subarray(4,8),!0))).toString();f=8;break;case 1:a=b.subarray(0,8);for(c=0;8>c;c++)this.f.setUint8(c,a[c]);c=this.f.getFloat64(0,
!0);f=8;break;case 9:a=b.subarray(e.length,e.length+e.value.a);a=be(a);c=decodeURIComponent(escape(a));f=e.length+e.value.a;break;case 12:a=b.subarray(e.length,e.length+e.value.a);c=be(a);f=e.length+e.value.a;break;case 10:f=c=new (a.j.prototype.c().ea);e=b;d=f.c();for(var h=0;;){var p=Zd(this,e),u=p.value;p=p.length;var C=u>>3;if(4==(u&7))break;h+=p;u={value:void 0,length:0};(C=Kc(d,C))&&(u=this.h(C,e.subarray(p)))&&null!==u.value&&(C.h?f.add(C,u.value):f.set(C,u.value));h+=u.length;if(e.length<
p+u.length)break;e=e.subarray(p+u.length)}f=h;b=$d(this,b.subarray(f));r(b.value.a==(a.a<<3|4),"Error deserializing group");f+=b.length;break;case 11:f=e.length+e.value.a;b=b.subarray(e.length,f);c=new (a.j.prototype.c().ea);Tc(this,c,b);break;case 7:case 15:c=ae(b.subarray(0,4),15==d);f=4;break;case 2:a=b.subarray(0,4);for(c=0;4>c;c++)this.f.setUint8(c,a[c]);c=this.f.getFloat32(0,!0);f=4}return{value:c,length:f}};
var Q=function(a,b){do{var c=b&127;b>>>=7;0<b&&(c|=128);a.a.push(c)}while(0<b)},Xd=function(a,b){var c=vc(127);do{var d=b.and(c).a;b=Hc(b,7);0<Ec(b,z(0))&&(d|=128);a.a.push(d)}while(0<Ec(b,z(0)))},$d=function(a,b){a=a.w;for(var c=E(0),d=0;d<b.length;d++){var e=Gc(vc(b[d]&127),7*d);c=c.or(e);if(0==(b[d]&128))break}a.value=c;a.length=d+1;return a},Zd=function(a,b){a=a.i;for(var c=0,d=0;d<b.length&&(c|=(b[d]&127)<<7*d,0!=(b[d]&128));d++);a.value=c;a.length=d+1;return a},Yd=function(a,b,c){for(var d=
vc(255),e=0;e<c;e++){var f=b.and(d).a;a.a.push(f);b=Hc(b,8)}},ae=function(a,b){for(var c=0,d=0;d<a.length;d++)c|=a[d]<<8*d;b||(c>>>=0);return c},be=function(a){var b="";a=new Uint16Array(a);for(var c=0;c<a.length;c+=65536)b+=String.fromCharCode.apply(null,a.subarray(c,c+Math.min(65536,a.length-c)));return b};var ce=function(a){for(var b=a.V;b;)a=b,b=a.V;return a},de=function(a,b){var c=document.createElement("CANVAS"),d=document.createElement("IMG");d.setAttribute("style","position:absolute;visibility:hidden;top:-1000px;left:-1000px;");d.crossOrigin="Anonymous";$b(d,"load",function(){var a=d.width,f=d.height;c.width=a;c.height=f;var h=c.getContext("2d");h.drawImage(d,0,0);h=h.getImageData(0,0,a,f);document.body.removeChild(d);b(h.data,new Fb(a,f))});d.setAttribute("src",a);document.body.appendChild(d)},
ee=function(a,b){var c=new O;I(c,1,a);I(c,2,1);a=new P;I(a,1,b);I(c,3,a);return c};var fe=function(a){v.call(this,"b");this.enabled=a};q(fe,v);var ge=function(){v.call(this,"d")};q(ge,v);var he=function(){v.call(this,"e")};q(he,v);var ie=function(){v.call(this,"f")};q(ie,v);var je=function(a){v.call(this,"g");this.callback=a};q(je,v);var ke=function(a){v.call(this,"h");this.j=a};q(ke,v);var le=function(){v.call(this,"l")};q(le,v);var R=function(){H.call(this)};q(R,H);var me=null;R.prototype.c=function(){var a=me;a||(me=a=J(R,{0:{name:"Rect",g:"sketchology.proto.Rect"},1:{name:"xlow",b:2,type:Number},2:{name:"xhigh",b:2,type:Number},3:{name:"ylow",b:2,type:Number},4:{name:"yhigh",b:2,type:Number}}));return a};R.c=R.prototype.c;var ne={NONE:0,md:1,Qc:2,ec:3,nd:4},oe=function(){H.call(this)};q(oe,H);var pe=null,qe=function(){H.call(this)};q(qe,H);var re=null,se={Y:0,cc:1,nc:2},te=function(){H.call(this)};q(te,H);var ue=null,ve=function(){H.call(this)};q(ve,H);var we=null,xe=function(){H.call(this)};q(xe,H);var ye=null,ze=function(){H.call(this)};q(ze,H);var Ae=null,Be=function(){H.call(this)};q(Be,H);var Ce=null,De=function(){H.call(this)};q(De,H);var Ee=null,S=function(){H.call(this)};q(S,H);var Fe=null,Ge=function(){H.call(this)};
q(Ge,H);var He=null,Ie=function(){H.call(this)};q(Ie,H);var Je=null,Ke=function(){H.call(this)};q(Ke,H);var Le=null,Me=function(){H.call(this)};q(Me,H);var Ne=null,Oe=function(){H.call(this)};q(Oe,H);var Pe=null,T=function(){H.call(this)};q(T,H);var Qe=null;T.prototype.B=function(){return Oc(this,2)};var Re=function(){H.call(this)};q(Re,H);var Se=null,Te={Y:0,xc:1,rc:2,Pb:3,Hc:4,Ib:5},Ue={Eb:1,Mc:2,Rc:3};
oe.prototype.c=function(){var a=pe;a||(pe=a=J(oe,{0:{name:"CallbackFlags",g:"sketchology.proto.CallbackFlags"},1:{name:"mesh_data_ctm",b:8,type:Boolean},2:{name:"uncompressed_outline",b:8,type:Boolean},3:{name:"compressed_input_points",b:8,type:Boolean}}));return a};oe.c=oe.prototype.c;qe.prototype.c=function(){var a=re;a||(re=a=J(qe,{0:{name:"SourceDetails",g:"sketchology.proto.SourceDetails"},1:{name:"origin",b:14,defaultValue:0,type:se},2:{name:"host_source_details",b:13,type:Number}}));return a};
qe.c=qe.prototype.c;te.prototype.c=function(){var a=ue;a||(ue=a=J(te,{0:{name:"BackgroundImageInfo",g:"sketchology.proto.BackgroundImageInfo"},1:{name:"uri",b:9,type:String},3:{name:"bounds",b:11,type:R}}));return a};te.c=te.prototype.c;ve.prototype.c=function(){var a=we;a||(we=a=J(ve,{0:{name:"Border",g:"sketchology.proto.Border"},1:{name:"uri",b:9,type:String},2:{name:"scale",b:2,defaultValue:1,type:Number}}));return a};ve.c=ve.prototype.c;
xe.prototype.c=function(){var a=ye;a||(ye=a=J(xe,{0:{name:"GridInfo",g:"sketchology.proto.GridInfo"},1:{name:"uri",b:9,type:String},2:{name:"rgba_multiplier",b:13,defaultValue:4294967295,type:Number},3:{name:"size_world",b:2,defaultValue:50,type:Number},4:{name:"origin",b:11,type:Oe}}));return a};xe.c=xe.prototype.c;ze.prototype.c=function(){var a=Ae;a||(Ae=a=J(ze,{0:{name:"LOD",g:"sketchology.proto.LOD"},1:{name:"max_coverage",b:2,type:Number},2:{name:"ctm_blob",b:12,type:String}}));return a};
ze.c=ze.prototype.c;Be.prototype.c=function(){var a=Ce;a||(Ce=a=J(Be,{0:{name:"Stroke",g:"sketchology.proto.Stroke"},1:{name:"shader_type",b:14,defaultValue:0,type:ne},3:{name:"lod",l:!0,b:11,type:ze},4:{name:"abgr",b:13,type:Number},5:{name:"point_x",l:!0,fa:!0,b:17,type:Number},6:{name:"point_y",l:!0,fa:!0,b:17,type:Number},7:{name:"point_t_ms",l:!0,fa:!0,b:13,type:Number},8:{name:"deprecated_transform",b:11,type:S},9:{name:"start_time_ms",b:4,type:String}}));return a};Be.c=Be.prototype.c;
De.prototype.c=function(){var a=Ee;a||(Ee=a=J(De,{0:{name:"UncompressedStroke",g:"sketchology.proto.UncompressedStroke"},1:{name:"outline",l:!0,b:11,type:Oe},2:{name:"rgba",b:13,type:Number}}));return a};De.c=De.prototype.c;
S.prototype.c=function(){var a=Fe;a||(Fe=a=J(S,{0:{name:"AffineTransform",g:"sketchology.proto.AffineTransform"},1:{name:"tx",b:2,type:Number},2:{name:"ty",b:2,type:Number},3:{name:"scale_x",b:2,defaultValue:1,type:Number},4:{name:"scale_y",b:2,defaultValue:1,type:Number},5:{name:"rotation_radians",b:2,type:Number}}));return a};S.c=S.prototype.c;
Ge.prototype.c=function(){var a=He;a||(He=a=J(Ge,{0:{name:"Element",g:"sketchology.proto.Element"},4:{name:"deprecated_uuid",b:9,type:String},5:{name:"minimum_serializer_version",b:13,type:Number},6:{name:"stroke",b:11,type:Be},9:{name:"path",b:11,type:Re},10:{name:"attributes",b:11,type:Ie}}));return a};Ge.c=Ge.prototype.c;
Ie.prototype.c=function(){var a=Je;a||(Je=a=J(Ie,{0:{name:"ElementAttributes",g:"sketchology.proto.ElementAttributes"},1:{name:"selectable",b:8,defaultValue:!0,type:Boolean},2:{name:"magic_erasable",b:8,defaultValue:!0,type:Boolean},3:{name:"is_sticker",b:8,defaultValue:!1,type:Boolean},4:{name:"is_text",b:8,defaultValue:!1,type:Boolean}}));return a};Ie.c=Ie.prototype.c;
Ke.prototype.c=function(){var a=Le;a||(Le=a=J(Ke,{0:{name:"UncompressedElement",g:"sketchology.proto.UncompressedElement"},1:{name:"uncompressed_stroke",b:11,type:De}}));return a};Ke.c=Ke.prototype.c;Me.prototype.c=function(){var a=Ne;a||(Ne=a=J(Me,{0:{name:"ElementMutation",g:"sketchology.proto.ElementMutation"},1:{name:"uuid",l:!0,b:9,type:String},2:{name:"transform",l:!0,b:11,type:S}}));return a};Me.c=Me.prototype.c;
Oe.prototype.c=function(){var a=Pe;a||(Pe=a=J(Oe,{0:{name:"Point",g:"sketchology.proto.Point"},1:{name:"x",b:2,type:Number},2:{name:"y",b:2,type:Number}}));return a};Oe.c=Oe.prototype.c;T.prototype.c=function(){var a=Qe;a||(Qe=a=J(T,{0:{name:"ElementBundle",g:"sketchology.proto.ElementBundle"},1:{name:"uuid",b:9,type:String},2:{name:"element",b:11,type:Ge},3:{name:"transform",b:11,type:S},4:{name:"uncompressed_element",b:11,type:Ke}}));return a};T.c=T.prototype.c;
Re.prototype.c=function(){var a=Se;a||(Se=a=J(Re,{0:{name:"Path",g:"sketchology.proto.Path"},1:{name:"segment_types",l:!0,b:14,defaultValue:0,type:Te},2:{name:"segment_counts",l:!0,b:13,type:Number},3:{name:"segment_args",l:!0,b:1,type:Number},4:{name:"radius",b:1,defaultValue:1,type:Number},5:{name:"rgba",b:13,type:Number},6:{name:"end_cap",b:14,defaultValue:2,type:Ue},7:{name:"fill_rgba",b:13,type:Number}}));return a};Re.c=Re.prototype.c;var Ve={ld:0,Vb:1,Ub:2,Wb:3,Qb:4},We=function(){H.call(this)};q(We,H);var Xe=null,Ye=function(){H.call(this)};q(Ye,H);var Ze=null,$e=function(){H.call(this)};q($e,H);var af=null,bf=function(){H.call(this)};q(bf,H);var cf=null;We.prototype.c=function(){var a=Xe;a||(Xe=a=J(We,{0:{name:"AnimationCurve",g:"sketchology.proto.AnimationCurve"},1:{name:"type",b:14,defaultValue:1,type:Ve},2:{name:"params",l:!0,b:2,type:Number}}));return a};We.c=We.prototype.c;
Ye.prototype.c=function(){var a=Ze;a||(Ze=a=J(Ye,{0:{name:"ColorAnimation",g:"sketchology.proto.ColorAnimation"},1:{name:"duration",b:1,defaultValue:.5,type:Number},2:{name:"curve",b:11,type:We},3:{name:"rgba",b:13,type:Number}}));return a};Ye.c=Ye.prototype.c;
$e.prototype.c=function(){var a=af;a||(af=a=J($e,{0:{name:"ScaleAnimation",g:"sketchology.proto.ScaleAnimation"},1:{name:"duration",b:1,defaultValue:.5,type:Number},2:{name:"curve",b:11,type:We},3:{name:"scale_x",b:2,type:Number},4:{name:"scale_y",b:2,type:Number}}));return a};$e.c=$e.prototype.c;
bf.prototype.c=function(){var a=cf;a||(cf=a=J(bf,{0:{name:"ElementAnimation",g:"sketchology.proto.ElementAnimation"},1:{name:"uuid",b:9,type:String},2:{name:"color_animation",b:11,type:Ye},3:{name:"scale_animation",b:11,type:$e},4:{name:"next",b:11,type:bf}}));return a};bf.c=bf.prototype.c;var df={Ab:1,Rb:2},ef=function(){H.call(this)};q(ef,H);var ff=null,gf=function(){H.call(this)};q(gf,H);var hf=null,jf=function(){H.call(this)};q(jf,H);var kf=null,lf=function(){H.call(this)};q(lf,H);var mf=null,nf=function(){H.call(this)};q(nf,H);var of=null,pf=function(){H.call(this)};q(pf,H);var qf=null,rf=function(){H.call(this)};q(rf,H);var sf=null,tf=function(){H.call(this)};q(tf,H);var uf=null,vf=function(){H.call(this)};q(vf,H);var wf=null,xf=function(){H.call(this)};q(xf,H);
var yf=null,U=function(){H.call(this)};q(U,H);var zf=null;U.prototype.B=function(){return Oc(this,2,void 0)};var Af=function(){H.call(this)};q(Af,H);var Bf=null;Af.prototype.B=function(){return Oc(this,2,void 0)};ef.prototype.c=function(){var a=ff;a||(ff=a=J(ef,{0:{name:"Color",g:"sketchology.proto.Color"},1:{name:"argb",b:13,type:Number}}));return a};ef.c=ef.prototype.c;
gf.prototype.c=function(){var a=hf;a||(hf=a=J(gf,{0:{name:"BackgroundColor",g:"sketchology.proto.BackgroundColor"},1:{name:"rgba",b:13,type:Number}}));return a};gf.c=gf.prototype.c;jf.prototype.c=function(){var a=kf;a||(kf=a=J(jf,{0:{name:"PageProperties",g:"sketchology.proto.PageProperties"},1:{name:"background_color",b:11,type:ef},2:{name:"background_image",b:11,type:te},3:{name:"bounds",b:11,type:R},4:{name:"border",b:11,type:ve},5:{name:"grid_info",b:11,type:xe}}));return a};jf.c=jf.prototype.c;
lf.prototype.c=function(){var a=mf;a||(mf=a=J(lf,{0:{name:"AddAction",g:"sketchology.proto.AddAction"},1:{name:"uuid",b:9,type:String},2:{name:"below_element_with_uuid",b:9,type:String}}));return a};lf.c=lf.prototype.c;nf.prototype.c=function(){var a=of;a||(of=a=J(nf,{0:{name:"RemoveAction",g:"sketchology.proto.RemoveAction"},1:{name:"uuid",l:!0,b:9,type:String},2:{name:"was_below_uuid",l:!0,b:9,type:String}}));return a};nf.c=nf.prototype.c;
pf.prototype.c=function(){var a=qf;a||(qf=a=J(pf,{0:{name:"ClearAction",g:"sketchology.proto.ClearAction"},1:{name:"uuid",l:!0,b:9,type:String}}));return a};pf.c=pf.prototype.c;rf.prototype.c=function(){var a=sf;a||(sf=a=J(rf,{0:{name:"ReplaceAction",g:"sketchology.proto.ReplaceAction"},1:{name:"uuid_add",l:!0,b:9,type:String},2:{name:"below_element_with_uuid",b:9,type:String},3:{name:"uuid_remove",l:!0,b:9,type:String},4:{name:"was_below_uuid",l:!0,b:9,type:String}}));return a};rf.c=rf.prototype.c;
tf.prototype.c=function(){var a=uf;a||(uf=a=J(tf,{0:{name:"SetTransformAction",g:"sketchology.proto.SetTransformAction"},1:{name:"uuid",l:!0,b:9,type:String},2:{name:"from_transform",l:!0,b:11,type:S},3:{name:"to_transform",l:!0,b:11,type:S}}));return a};tf.c=tf.prototype.c;vf.prototype.c=function(){var a=wf;a||(wf=a=J(vf,{0:{name:"SetPageBoundsAction",g:"sketchology.proto.SetPageBoundsAction"},1:{name:"old_bounds",b:11,type:R},2:{name:"new_bounds",b:11,type:R}}));return a};vf.c=vf.prototype.c;
xf.prototype.c=function(){var a=yf;a||(yf=a=J(xf,{0:{name:"StorageAction",g:"sketchology.proto.StorageAction"},1:{name:"add_action",b:11,type:lf},2:{name:"remove_action",b:11,type:nf},3:{name:"clear_action",b:11,type:pf},4:{name:"replace_action",b:11,type:rf},5:{name:"set_transform_action",b:11,type:tf},6:{name:"set_page_bounds_action",b:11,type:vf}}));return a};xf.c=xf.prototype.c;
U.prototype.c=function(){var a=zf;a||(zf=a=J(U,{0:{name:"Snapshot",g:"sketchology.proto.Snapshot"},1:{name:"page_properties",b:11,type:jf},2:{name:"element",l:!0,b:11,type:T},3:{name:"dead_element",l:!0,b:11,type:T},4:{name:"undo_action",l:!0,b:11,type:xf},5:{name:"redo_action",l:!0,b:11,type:xf},6:{name:"element_state_index",l:!0,b:14,defaultValue:1,type:df},7:{name:"fingerprint",b:4,type:String}}));return a};U.c=U.prototype.c;
Af.prototype.c=function(){var a=Bf;a||(Bf=a=J(Af,{0:{name:"MutationPacket",g:"sketchology.proto.MutationPacket"},1:{name:"mutation",l:!0,b:11,type:xf},2:{name:"element",l:!0,b:11,type:T}}));return a};Af.c=Af.prototype.c;var Cf={bd:0,wa:1,oc:2,za:3,Bb:4,Dc:5,xa:6,zb:7,ya:8,mc:9,Fb:10,Cb:11},Df={Y:0,Kc:1,$b:2,bc:3,Zb:4,ac:5,tc:6,zc:7,Ob:8,kc:9},V=function(){H.call(this)};q(V,H);var Ef=null,W=function(){H.call(this)};q(W,H);var Ff=null,Gf=function(){H.call(this)};q(Gf,H);var Hf=null,If=function(){H.call(this)};q(If,H);var Jf=null,Kf=function(){H.call(this)};q(Kf,H);var Lf=null,Mf=function(){H.call(this)};q(Mf,H);var Nf=null,Of=function(){H.call(this)};q(Of,H);var Pf=null,Qf=function(){H.call(this)};q(Qf,H);
var Rf=null,Sf={gd:0,od:1,POINTS:2,pd:3,Ec:4,Fc:5},Tf=function(){H.call(this)};q(Tf,H);var Uf=null,Vf=function(){H.call(this)};q(Vf,H);var Wf=null,Xf={Y:0,qc:1,Xb:2,uc:3,Ic:4,yc:5,hc:6,Gc:7,Nb:8},Yf=function(){H.call(this)};q(Yf,H);var Zf=null,$f=function(){H.call(this)};q($f,H);var ag=null,bg=function(){H.call(this)};q(bg,H);var cg=null,dg=function(){H.call(this)};q(dg,H);var eg=null,fg=function(){H.call(this)};q(fg,H);var gg=null,hg={Y:0,wc:1,$c:2,Cc:3,xa:4},ig=function(){H.call(this)};q(ig,H);
var jg=null,kg=function(){H.call(this)};q(kg,H);var lg=null,mg=function(){H.call(this)};q(mg,H);var ng=null,og=function(){H.call(this)};q(og,H);var pg=null,qg=function(){H.call(this)};q(qg,H);var rg=null;
V.prototype.c=function(){var a=Ef;a||(Ef=a=J(V,{0:{name:"Command",g:"sketchology.proto.Command"},1:{name:"set_viewport",b:11,type:Kf},2:{name:"tool_params",b:11,type:Vf},3:{name:"add_path",b:11,type:qg},4:{name:"camera_position",b:11,type:R},5:{name:"page_bounds",b:11,type:R},6:{name:"image_export",b:11,type:Mf},7:{name:"flag_assignment",b:11,type:Yf},8:{name:"set_element_transforms",b:11,type:Me},9:{name:"add_element",b:11,type:$f},10:{name:"background_image",b:11,type:te},11:{name:"background_color",
b:11,type:gf},12:{name:"set_out_of_bounds_color",b:11,type:bg},13:{name:"set_page_border",b:11,type:ve},14:{name:"send_input_stream",b:11,type:dg},15:{name:"sequence_point",b:11,type:ig},16:{name:"set_callback_flags",b:11,type:kg},17:{name:"set_camera_bounds_config",b:11,type:mg},18:{name:"deselect_all",b:11,type:W},19:{name:"add_image_rect",b:11,type:og},21:{name:"clear",b:11,type:W},22:{name:"remove_all_elements",b:11,type:W},23:{name:"undo",b:11,type:W},24:{name:"redo",b:11,type:W},25:{name:"evict_image_data",
b:11,type:If},26:{name:"replace_elements",b:11,type:Gf},27:{name:"commit_crop",b:11,type:W},28:{name:"element_animation",b:11,type:bf},29:{name:"set_grid",b:11,type:xe},30:{name:"clear_grid",b:11,type:W}}));return a};V.c=V.prototype.c;W.prototype.c=function(){var a=Ff;a||(Ff=a=J(W,{0:{name:"NoArgCommand",g:"sketchology.proto.NoArgCommand"}}));return a};W.c=W.prototype.c;
Gf.prototype.c=function(){var a=Hf;a||(Hf=a=J(Gf,{0:{name:"ReplaceElementsCommand",g:"sketchology.proto.ReplaceElementsCommand"},1:{name:"uuids_to_remove",l:!0,b:9,type:String},2:{name:"paths_to_add",l:!0,b:11,type:Re}}));return a};Gf.c=Gf.prototype.c;If.prototype.c=function(){var a=Jf;a||(Jf=a=J(If,{0:{name:"EvictImageData",g:"sketchology.proto.EvictImageData"},1:{name:"uri",b:9,type:String}}));return a};If.c=If.prototype.c;
Kf.prototype.c=function(){var a=Lf;a||(Lf=a=J(Kf,{0:{name:"Viewport",g:"sketchology.proto.Viewport"},1:{name:"width",b:13,type:Number},2:{name:"height",b:13,type:Number},3:{name:"ppi",b:2,type:Number}}));return a};Kf.c=Kf.prototype.c;Mf.prototype.c=function(){var a=Nf;a||(Nf=a=J(Mf,{0:{name:"ImageExport",g:"sketchology.proto.ImageExport"},1:{name:"max_dimension_px",b:13,defaultValue:1024,type:Number},2:{name:"should_draw_background",b:8,defaultValue:!0,type:Boolean}}));return a};Mf.c=Mf.prototype.c;
Of.prototype.c=function(){var a=Pf;a||(Pf=a=J(Of,{0:{name:"LinearPathAnimation",g:"sketchology.proto.LinearPathAnimation"},1:{name:"rgba_from",b:13,type:Number},2:{name:"rgba_seconds",b:1,type:Number},3:{name:"dilation_from",b:2,type:Number},4:{name:"dilation_seconds",b:1,type:Number}}));return a};Of.c=Of.prototype.c;
Qf.prototype.c=function(){var a=Rf;a||(Rf=a=J(Qf,{0:{name:"LineSize",g:"sketchology.proto.LineSize"},7:{name:"stroke_width",b:2,type:Number},8:{name:"units",b:14,defaultValue:1,type:Sf},9:{name:"use_web_sizes",b:8,type:Boolean}}));return a};Qf.c=Qf.prototype.c;Tf.prototype.c=function(){var a=Uf;a||(Uf=a=J(Tf,{0:{name:"PusherToolParams",g:"sketchology.proto.PusherToolParams"},1:{name:"manipulate_stickers",b:8,type:Boolean},2:{name:"manipulate_text",b:8,type:Boolean}}));return a};Tf.c=Tf.prototype.c;
Vf.prototype.c=function(){var a=Wf;a||(Wf=a=J(Vf,{0:{name:"ToolParams",g:"sketchology.proto.ToolParams"},1:{name:"tool",b:14,defaultValue:0,type:Xf},2:{name:"rgba",b:13,type:Number},3:{name:"line_size",b:11,type:Qf},4:{name:"pusher_tool_params",b:11,type:Tf},5:{name:"brush_type",b:14,defaultValue:0,type:Cf},6:{name:"linear_path_animation",b:11,type:Of}}));return a};Vf.c=Vf.prototype.c;
Yf.prototype.c=function(){var a=Zf;a||(Zf=a=J(Yf,{0:{name:"FlagAssignment",g:"sketchology.proto.FlagAssignment"},1:{name:"flag",b:14,defaultValue:0,type:Df},2:{name:"bool_value",b:8,type:Boolean}}));return a};Yf.c=Yf.prototype.c;$f.prototype.c=function(){var a=ag;a||(ag=a=J($f,{0:{name:"AddElement",g:"sketchology.proto.AddElement"},1:{name:"bundle",b:11,type:T},2:{name:"below_element_with_uuid",b:9,type:String}}));return a};$f.c=$f.prototype.c;
bg.prototype.c=function(){var a=cg;a||(cg=a=J(bg,{0:{name:"OutOfBoundsColor",g:"sketchology.proto.OutOfBoundsColor"},1:{name:"rgba",b:13,type:Number}}));return a};bg.c=bg.prototype.c;dg.prototype.c=function(){var a=eg;a||(eg=a=J(dg,{0:{name:"SInputStream",g:"sketchology.proto.SInputStream"},1:{name:"screen_width",b:13,type:Number},2:{name:"screen_height",b:13,type:Number},3:{name:"screen_ppi",b:2,type:Number},4:{name:"input",l:!0,b:11,type:fg}}));return a};dg.c=dg.prototype.c;
fg.prototype.c=function(){var a=gg;a||(gg=a=J(fg,{0:{name:"SInput",g:"sketchology.proto.SInput"},1:{name:"type",b:14,defaultValue:0,type:hg},2:{name:"id",b:13,type:Number},3:{name:"flags",b:13,type:Number},4:{name:"time_s",b:1,type:Number},5:{name:"screen_pos_x",b:2,type:Number},6:{name:"screen_pos_y",b:2,type:Number},7:{name:"pressure",b:2,type:Number},8:{name:"wheel_delta",b:2,type:Number},9:{name:"tilt",b:2,type:Number},10:{name:"orientation",b:2,type:Number}}));return a};fg.c=fg.prototype.c;
ig.prototype.c=function(){var a=jg;a||(jg=a=J(ig,{0:{name:"SequencePoint",g:"sketchology.proto.SequencePoint"},1:{name:"id",b:5,type:Number}}));return a};ig.c=ig.prototype.c;kg.prototype.c=function(){var a=lg;a||(lg=a=J(kg,{0:{name:"SetCallbackFlags",g:"sketchology.proto.SetCallbackFlags"},1:{name:"source_details",b:11,type:qe},2:{name:"callback_flags",b:11,type:oe}}));return a};kg.c=kg.prototype.c;
mg.prototype.c=function(){var a=ng;a||(ng=a=J(mg,{0:{name:"CameraBoundsConfig",g:"sketchology.proto.CameraBoundsConfig"},1:{name:"margin_left_px",b:2,type:Number},2:{name:"margin_right_px",b:2,type:Number},3:{name:"margin_bottom_px",b:2,type:Number},4:{name:"margin_top_px",b:2,type:Number},5:{name:"fraction_padding",b:2,defaultValue:.1,type:Number}}));return a};mg.c=mg.prototype.c;
og.prototype.c=function(){var a=pg;a||(pg=a=J(og,{0:{name:"ImageRect",g:"sketchology.proto.ImageRect"},1:{name:"rect",b:11,type:R},2:{name:"bitmap_uri",b:9,type:String},3:{name:"attributes",b:11,type:Ie},4:{name:"rotation_radians",b:2,type:Number}}));return a};og.c=og.prototype.c;qg.prototype.c=function(){var a=rg;a||(rg=a=J(qg,{0:{name:"AddPath",g:"sketchology.proto.AddPath"},1:{name:"path",b:11,type:Re},2:{name:"uuid",b:9,type:String}}));return a};qg.c=qg.prototype.c;var sg=function(){w.call(this)};q(sg,w);var tg="ink_model_instances_"+Math.random();var X=function(){w.call(this);this.f="#000000";this.j=.6;this.h=!1;this.a=this.i=1;this.m="CALLIGRAPHY"};q(X,sg);(function(a){a.S=function(b){Aa(b);var c=ce(b);(b=c[tg])||(c[tg]=b={});var d=a[oa]||(a[oa]=++pa),e=b[d];e?b=e:(c=new a(c),b=b[d]=c);return b}})(X);
var ug={AIRBRUSH:1,CALLIGRAPHY:1,EDIT:2,ERASER:1,HIGHLIGHTER:1,INKPEN:1,MAGIC_ERASE:3,MARKER:1,PENCIL:1,BALLPOINT:1,BALLPOINT_IN_PEN_MODE_ELSE_MARKER:1,QUERY:4},vg={AIRBRUSH:7,CALLIGRAPHY:1,ERASER:6,HIGHLIGHTER:8,INKPEN:2,MARKER:3,BALLPOINT:4,BALLPOINT_IN_PEN_MODE_ELSE_MARKER:11,PENCIL:5};g=X.prototype;g.Qa=function(a){this.f=a;x(this,"m")};g.Ra=function(a){this.j=a;x(this,"m")};g.wb=function(a){this.h=a;x(this,"m")};
g.xb=function(a){this.i=ug[a];this.a=void 0!==vg[a]?vg[a]:this.a;this.m=a;x(this,"m")};g.La=function(){return this.m};g.Na=function(){return this.f};g.ta=function(){return this.h?"#FFFFFF":this.f};g.ua=function(){return parseInt(this.ta().substring(1),16)};g.Oa=function(){return this.j};g.Ia=function(){return this.h};g.Ma=function(){return this.a};g.Pa=function(){return this.i};var Ag=function(a){this.j=wg(a);this.h=xg(a);this.f=yg(a);this.a=zg(a)},Bg=function(a){return"rgb("+[a.h,a.f,a.a].join()+")"},Cg=function(a){return new Uint32Array([a.h<<24|a.f<<16|a.a<<8|a.j])},Dg=function(a){return function(b){return b>>>a&255}},wg=Dg(24),xg=Dg(16),yg=Dg(8),zg=Dg(0),Eg=new Ag(4278190080),Fg=new Ag(4294967295),Gg=new Ag(4294638330);var Hg=function(){v.call(this,"n")};q(Hg,v);var Ig=function(a,b,c){b=c||b;c=qd(m(a.da)||a.da instanceof L,"manifestUrl",a.da);var d=qd(m(a.ga)||a.ga instanceof L,"useMSAA",a.ga),e=qd(m(a.ha)||a.ha instanceof L,"useSingleBuffer",a.ha);a=qd(m(a.I)||a.I instanceof L,"sengineType",a.I);b="<style"+(b&&b.ia?' nonce="'+pd(b&&b.ia)+'"':"")+'>\n    #ink-engine-hwoverlay {\n      display: none;\n      position: absolute;\n      width: 5px;\n      height: 5px;\n      left: 0px;\n      top: 0px;\n      /* Transforms and semi-transparent color are used to ensure the div\n       * prevents use of a hardware overlay for the underlying canvas element,\n       * despite future optimizations to the hardware overlay eligibility\n       * detection in ChromeOS.  See b/64569245 for details */\n      background-color: rgba(0, 0, 0, 0.01);\n      transform: translate3d(0.33, 0.14, 0);\n    }\n    /* TODO(b/69541198): Hack for hardware overlay in fullscreen mode */\n    #canvas-parent.fullscreen {\n      height: calc(100% - 5px);\n      padding: 0 5px 5px 5px;\n      background-color: transparent;\n    }\n  </style><embed id="ink-engine" use_msaa="'+
pd(d)+'" use_single_buffer="'+pd(e)+'" src="';null!=c&&c.H===Wc?(r(c.constructor===$c),c=String(c).replace(ud,td)):null!=c&&c.H===Xc?(r(c.constructor===ad),c=String(c).replace(ud,td)):c instanceof zb?(c instanceof zb&&c.constructor===zb&&c.Ba===yb?c=c.ca:(xa("expected object of type SafeUrl, got '"+c+"' of type "+n(c)),c="type_error:SafeUrl"),c=String(c).replace(ud,td)):c instanceof xb?(c instanceof xb&&c.constructor===xb&&c.Da===wb?c="":(xa("expected object of type TrustedResourceUrl, got '"+c+"' of type "+
n(c)),c="type_error:TrustedResourceUrl"),c=String(c).replace(ud,td)):(c=String(c),vd.test(c)?c=c.replace(ud,td):(xa("Bad value `%s` for |filterNormalizeUri",[c]),c="about:invalid#zSoyz"));return kd(b+pd(c)+'" type="application/x-nacl" sengine_type="'+pd(a)+'"><div id="ink-engine-hwoverlay"></div>')};Ig.a="ink.soy.nacl.canvasHTML";var Jg=function(a,b,c,d){M.call(this);r(a);this.Ca=a;this.m=b;this.Fa=c;this.J=0;this.L=600;this.K=800;this.G=0;this.i=new Wd;this.C=la;this.oa=this.qa=!1;this.Ga=d;this.ra=[];this.W=[];this.X=[];this.sa=[];this.ma=[];this.ka=[];this.M={};this.pa=0};q(Jg,M);
Jg.prototype.$=function(){var a;if(!(a=!t("Macintosh"))){a=Wa;var b="";t("Windows")?(b=/Windows (?:NT|Phone) ([0-9.]+)/,b=(a=b.exec(a))?a[1]:"0.0"):t("iPhone")&&!t("iPod")&&!t("iPad")||t("iPad")||t("iPod")?(b=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,b=(a=b.exec(a))&&a[1].replace(/_/g,".")):t("Macintosh")?(b=/Mac OS X ([0-9_.]+)/,b=(a=b.exec(a))?a[1].replace(/_/g,"."):"10"):t("Android")?(b=/Android\s+([^\);]+)(\)|;)/,b=(a=b.exec(a))&&a[1]):t("CrOS")&&(b=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,b=(a=
b.exec(a))&&a[1]);a=0<=Va(b||"","10.12.5")}this.f=a=ed(Ig,{da:this.Ca,ga:!!a+"",ha:!!t("CrOS")+"",I:this.Ga});this.a=a.querySelector("#ink-engine")};Jg.prototype.v=function(){var a=this;this.a.addEventListener("load",function(){Kg(a);a.C();Lg(a,5,a.qa)})};var Mg=function(a){v.call(this,"q");this.enabled=a};q(Mg,v);
var Ng=function(a){a.a.postMessage(["poke",""])},Y=function(a,b){b=K(a.i,b);b=new Uint8Array(b);a.a.postMessage(["handleCommand",b.buffer])},Kg=function(a){var b=a.a;Og(a,a.J,a.L,a.K,a.G);a.oa||(a.oa=!0,b.addEventListener("message",sa(function(a){if("event_type"in a.data)switch(a=a.data,a.event_type){case "exit":console.log("Engine requested exit.");break;case "debug":console.log(a.message);break;case "image_export":this.Fa(a.width,a.height,new Uint8ClampedArray(a.bytes));break;case "element_added":if(this.m){var b=
this.m,c=a.uuid,f=a.encoded_element;a=a.encoded_transform;b.G.add(c);x(b,new ge(c,f,a))}break;case "elements_mutated":this.m&&x(this.m,new he(a.uuids,a.encoded_transforms));break;case "elements_removed":this.m&&x(this.m,new ie(a.uuids));break;case "flag_changed":5==a.which&&(this.qa=a.enabled,x(this,new Mg(a.enabled)));break;case "undo_redo_state_changed":x(this,new Hg(!!a.can_undo,!!a.can_redo));break;case "snapshot_gotten":b=new U;Tc(this.i,b,a.snapshot);this.ra.shift().call(null,b);break;case "brix_elements_converted":b=
new U;Tc(this.i,b,a.snapshot);a=new jf;c=new R;this.X.shift();f=null.Ka().get("bounds");I(c,2,f.wd||0);I(c,1,f.xd||0);I(c,4,f.yd||0);I(c,3,f.zd||0);I(a,3,c);I(b,1,a);this.W.shift().call(null,b);break;case "snapshot_has_pending_mutations":this.sa.shift().call(null,a.has_mutations);break;case "extracted_mutation_packet":b=new Af;Tc(this.i,b,a.extraction_packet);this.ma.shift().call(null,b);break;case "cleared_pending_mutations":b=new U;Tc(this.i,b,a.snapshot);this.ka.shift().call(null,b);break;case "hwoverlay":document.querySelector("#ink-engine-hwoverlay").style.display=
a.enable?"none":"block";break;case "single_buffer":this.a.style.transform="scaleY(-1)";break;case "sequence_point_reached":a=a.id,b=this.M[a],delete this.M[a],b()}},a)));x(a,"o")},Pg=function(a,b){var c=new gf;I(c,1,Cg(b)[0]);b=new V;I(b,11,c);Y(a,b)},Qg=function(a,b,c,d,e){a.C=function(){if(1!=d){var f=new Vf;I(f,1,d);var h=new V;I(h,2,f);Y(this,h)}else a.a.postMessage(["updateBrush",{brush:e,rgba:b[0],stroke_width:c}])};a.C()},Lg=function(a,b,c){var d=new Yf;I(d,1,b);I(d,2,!!c);b=new V;I(b,7,d);
Y(a,b)},Og=function(a,b,c,d,e){a.J=b;a.L=c;a.K=d;a.G=e;b=new R;I(b,1,a.J);I(b,3,a.G);I(b,2,a.K);I(b,4,a.L);c=new V;I(c,5,b);Y(a,c)};var Sg=function(a,b){var c=this;M.call(this);this.i=null;this.a=new Jg(a,this,sa(this.X,this),b);jd(this,this.a);rc(gd(this),this.a,sa(function(){this.K();Rg(this);x(this,"c")},this));pc(gd(this),this.a,"p",this.L);pc(gd(this),this.a,"q",function(a){x(c,new fe(a.enabled))});this.m=[];this.G=new Set;this.J=this.W=0;this.C=null;this.M=!1};q(Sg,M);Sg.prototype.v=function(){Sg.R.v.call(this);this.a.render(this.B());var a=gd(this);r(a);this.i=X.S(this);pc(a,this.i,"m",this.K)};
Sg.prototype.X=function(a,b,c){var d=this;if(this.C){try{var e=new ImageData(c,a,b),f=document.createElement("canvas"),h=f.getContext("2d");f.width=a;f.height=b;h.putImageData(e,0,0)}catch(p){this.L(p);return}this.M?(a=function(a){d.C(Cb(a))},f.msToBlob?f.msToBlob(a,"image/png"):f.toBlob(a,"image/png")):this.C(Eb(f.toDataURL()))}};
var Tg=function(a,b,c,d){d=d||{};var e="sketchology://background_"+a.J;a.J++;var f=new te;I(f,1,e);if("none"!=d.bounds){d=d.bounds||{xlow:0,ylow:0,xhigh:c.width,yhigh:c.height};var h=new R;I(h,1,d.xlow);I(h,3,d.ylow);I(h,2,d.xhigh);I(h,4,d.yhigh);I(f,3,h)}a=a.a;a.a.postMessage(["addImageData",{imageData:b.buffer,uri:e,width:c.width,height:c.height,assetType:0}]);b=new V;I(b,10,f);Y(a,b)};
Sg.prototype.K=function(){r(this.i);var a=this.i.i,b=this.i.a,c=this.i.j,d=new Ag(parseInt(this.i.f.substring(1),16));d.j=255;Qg(this.a,Cg(d),c,a,b)};
var Rg=function(a){var b=new ve;I(b,1,"sketchology://border0");I(b,2,1);de("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AgPEBYrHoEFUgAAAw1JREFUeNrt3b9uE0EQBvBvZvd8LURUkVwEkEDAm9AgQYOQKHgZWloqUMoUaVJSpAivQBEhJGhSWiAlKXz7JwXey9nE9vrOgHT3fZKVFM5F/mUyN5tIY8F2EtG/yNYucnZ21keg/57d3V1RMvzdEJjABGYITGACM+1iNz5RxGGPzCIbnT+i3RA1AjgFcADgR4zRDwTVABjHGF8AeJwOaDnYNgd29jGGED6JyMvxeDwZYvVOJpN3FxcXH0TkWfMovQpac6p39jgdMi4A7Ozs/HLOvQkhfEkurW9yDVh47+GcOxgybsre3t5P59y+937OqHUFhxAQQkBVVd85E/yOc+5bcuk0pqWLeO/hvQ+krV289x45yLqqPSRk5xym0yllZ5lOp6iqCiGEtW3C5lZwzq/DUOK9h4jUwK3GtGYFz1oEZa97cA2crJaNapozoiVk5rqCm+2h898ihn487uKiWPMPy2arYG7G7TQHM91CYAITmCEwgQnMEJjABGYITGCGwAQmMENgAhOYITCBCUwCAhOYITCBCcwQmMAEZghMYIbABCYwQ2ACE5ghMIEJzBCYwAyBCUxghsAEJjBDYAIzBP63wFkLcUX4lhAp3nu79Qr23t8lbZ37WwNuLFx7fnJycnvossfHx7dijK+WGLWrYBFBjPHh5eXl/tHR0Z0h41ZV9T7G+EREum/AThcREaiqqOpTAJ8PDw8/VlX11TnnhgArIrYsy3vn5+evy7J8NLNADrJd1xpUFcaY9BBVfSAib2foAPq7GTAZGGNSkcFaC2stjDH161+BLGsrOAEXRYGyLOsNgKqK5hbovgIng/T6R6MRiqKogVtVcPqi5k+tKIo5XOfcYICNMbDWYjQaoSzLP4BXtYqVFayqiDHCWlsjJnDnXPYG0j5UcCqy9LDWtq/gZcipHxVFMbfitec3uMX70FwP7nyTW2zyaSt236v3pipO7UJVs9pDVgU3p4n0jZqwQwBeHFlzYLPn4MXPb4Lt+5i2CJ1zgsuu4GUX2vBNk3qJnvX8jOdwv3h7O1wBYIqaD5lCtYoAAAAASUVORK5CYII=",function(c,
d){var e=a.a,f=new bg;I(f,1,3873892095);var h=new V;I(h,12,f);Y(e,h);e.a.postMessage(["addImageData",{imageData:c.buffer,uri:"sketchology://border0",width:d.width,height:d.height,assetType:1}]);h=new V;I(h,13,b);Y(e,h)})};Sg.prototype.L=function(a){if(x(this,new le(a)))throw a||Error("Unhandled fatal ink error");};var Ug=function(){M.call(this);this.a=null};q(Ug,M);Ug.prototype.v=function(){Ug.R.v.call(this);this.a=X.S(this);var a=gd(this);pc(a,this.a,"m",this.i);pc(a,ce(this),"a",this.m)};Ug.prototype.m=function(a){a.j?this.B().style.cursor="":this.i()};
Ug.prototype.i=function(){var a=this.a.ua(),b=8,c=document.createElement("canvas"),d=c.getContext("2d");a=new Ag(a|4278190080);b=Math.max(b,2);var e=Math.ceil(2*b);c.width=e;c.height=e;d.fillStyle=Bg(127<.5*(Math.max(a.h,a.f,a.a)+Math.min(a.h,a.f,a.a))?Eg:Fg);d.beginPath();d.arc(b,b,b,0,2*Math.PI);d.closePath();d.fill();d.fillStyle=Bg(a);d.beginPath();d.arc(b,b,b-1,0,2*Math.PI);d.closePath();d.fill();b="url("+c.toDataURL()+")8 8, auto";this.B().style.cursor=b};var Vg=function(a,b,c){b=c||b;return kd('<div id="canvas-parent"><style'+(b&&b.ia?' nonce="'+pd(b&&b.ia)+'"':"")+'>\n        #canvas-parent {\n          height: 100%;\n          position: relative;\n          width: 100%;\n        }\n        #layer-container {\n          height: 100%;\n          position: relative;\n          width: 100%;\n        }\n        #ink-engine {\n          height: 100%;\n          left: 0;\n          position: absolute;\n          top: 0;\n          width: 100%;\n          touch-action: none;\n        }\n        .above-ink-canvas {\n          display: none;\n        }\n      </style><div class="above-ink-canvas"></div><div id="layer-container"></div><div class="below-ink-canvas"></div></div>')};
Vg.a="ink.soy.embedContent";var Z=function(a,b){M.call(this);this.i=a;this.m=new Ug;jd(this,this.m);this.a=new Sg(a.f,a.I);jd(this,this.a);this.C=b};q(Z,M);g=Z.prototype;g.Va=function(){var a=new v("k");x(this,a);a.f||this.a.a.a.postMessage(["removeAll",""])};g.ub=function(){var a=new v("i");x(this,a);if(!a.f){a=this.a.a;var b=new V,c=new W;I(b,23,c);Y(a,b)}a=ee(this.i.a,7);x(this,new ke(a))};g.ib=function(){var a=new v("j");x(this,a);if(!a.f){a=this.a.a;var b=new V,c=new W;I(b,24,c);Y(a,b)}a=ee(this.i.a,8);x(this,new ke(a))};
g.mb=function(a,b){var c=this;de(a,function(a,e){Tg(c.a,a,e);b&&b()})};g.qb=function(a,b){var c=this;de(a,function(a,e){Tg(c.a,a,e,{bounds:"none"});b&&b()})};g.lb=function(a){Pg(this.a.a,a)};
g.pb=function(a,b,c,d,e,f){var h=this;de(a,function(a,u){var p=h.a,A=new xe;I(A,1,"sketchology://grid");I(A,2,Cg(b)[0]);I(A,3,c);var N=new Oe;I(N,1,d);I(N,2,e);I(A,4,N);p=p.a;p.a.postMessage(["addImageData",{imageData:a.buffer,uri:"sketchology://grid",width:u.width,height:u.height,assetType:3}]);a=new V;I(a,29,A);Y(p,a);f&&f()})};g.Wa=function(){var a=this.a.a,b=new V,c=new W;I(b,30,c);Y(a,b)};
g.$a=function(a,b,c,d){var e=this.a;e.C=c;e.M=!!d;c=new Mf;I(c,1,a);I(c,2,b);a=e.a;b=new V;I(b,6,c);Y(a,b)};g.nb=function(a){var b=this.a.a,c=new V;I(c,16,a);Y(b,c)};g.rb=function(a,b,c,d){Og(this.a.a,a,b,c,d)};g.Za=function(){throw Error("deselectAll not yet implemented for NaCl.");};g.$=function(){this.f=ed(Vg)};
g.v=function(){Z.R.v.call(this);var a=Jb("layer-container");this.a.render(a);var b=this.m;if(b.A)throw Error("Component already rendered");if(a){var c=Hb(a);b.U&&b.U.a==c||(b.U=Ib(a));b.f=a;b.v()}else throw Error("Invalid element to decorate");pc(gd(this),this.a,"c",sa(this.C,this,this))};g.vb=function(a){var b=Jb("canvas-parent");a?b.classList?b.classList.add("fullscreen"):ub(b)||(b.className+=0<b.className.length?" fullscreen":"fullscreen"):vb(b)};
g.Sa=function(a,b){var c=this.a;a.id||(a.id="local-"+c.W++);var d=a.id;Ia(c.m,b,0,d);c.G.has(d)?c.G.delete(d):b<c.m.length-1?(d=c.a,b=c.m[b+1],r(a),d.a.postMessage(["addElementToEngineBelow",{bundle:a,below_uuid:b}])):(b=c.a,r(a),b.a.postMessage(["addElementToEngine",{bundle:a}]));Ng(c.a)};g.jb=function(a,b){for(var c=this.a,d=0;d<b;d++)c.a.a.postMessage(["removeElement",c.m[a]]),Ea(c.m,a);Ng(c.a)};g.kb=function(){var a=this.a;a.a.a.postMessage(["clear",""]);Pg(a.a,Gg);a.G.clear();a.m=[];Ng(a.a)};
g.sb=function(a){Lg(this.a.a,1,!!a)};g.ob=function(a,b){if(a.length!==b.length)throw Error("mismatch in transform array lengths");this.a.a.a.postMessage(["setElementTransforms",{uuids:a,encoded_transforms:b}])};g.gb=function(a){var b=new je(a);x(this,b);b.f||a(void 0)};g.Ha=function(){var a=this.a.f;r(a,"Can not call getElementStrict before rendering/decorating.");a=a.querySelector("canvas,embed");return new Fb(a.clientWidth,a.clientHeight)};g.Ja=function(){return this.i.a};
g.Ua=function(a,b){Lg(this.a.a,a,b)};g.eb=function(a){if("makeSEngineInMemory"!==this.i.I)throw Error("Can't getSnapshot without sengineType IN_MEMORY.");var b=this.a.a;b.ra.push(a);b.a.postMessage(["getSnapshot"])};g.hb=function(a){if("makeSEngineInMemory"!==this.i.I)throw Error("Can't loadFromSnapshot without sengineType IN_MEMORY.");var b=this.a.a;a=K(b.i,a);a=new Uint8Array(a);b.a.postMessage(["loadFromSnapshot",a.buffer])};g.fb=function(a){Y(this.a.a,a)};
g.cb=function(){throw Error("getRawEngineObject not supported for NaCl.");};g.Ya=function(a,b){var c=this.a.a,d=null.Ka().get("pages").get(0);if(!d)throw Error("unable to get page from brix document.");d=d.get("elements").qd();for(var e=[],f=0;f<d.length;f++){var h=d[f];e.push({id:h.get("id"),proto:h.get("proto"),transform:h.get("transform")})}c.X.push(a);c.W.push(b);c.a.postMessage(["convertBrixElements",e])};
g.tb=function(a,b){var c=this.a.a;a=K(c.i,a);a=new Uint8Array(a);c.sa.push(b);c.a.postMessage(["snapshotHasPendingMutations",a.buffer])};g.ab=function(a,b){var c=this.a.a;a=K(c.i,a);a=new Uint8Array(a);c.ma.push(b);c.a.postMessage(["extractMutationPacket",a.buffer])};g.Xa=function(a,b){var c=this.a.a;a=K(c.i,a);a=new Uint8Array(a);c.ka.push(b);c.a.postMessage(["clearPendingMutations",a.buffer])};g.bb=function(a){var b=this.a.a,c=new V,d=new ig;I(d,1,b.pa);b.M[b.pa++]=a;I(c,15,d);Y(b,c)};
g.Ta=function(a){de(a,function(){throw Error("stickers not implemented on nacl yet");})};ka("ink.embed.Config",function(a){a=a||{};this.j=a.parentEl||null;this.h=a.parentComponent||null;this.f=a.nativeClientManifestUrl||null;this.a=a.logsHost||0;this.I=a.sengineType||"makeSEnginePassthroughDocument"});ka("ink.embed.EmbedComponent",Z);Z.execute=function(a,b){b=new Z(a,b);hd(b,a.h);b.render(a.j)};Z.prototype.clear=Z.prototype.Va;Z.prototype.undo=Z.prototype.ub;Z.prototype.redo=Z.prototype.ib;Z.prototype.setBackgroundImage=Z.prototype.mb;Z.prototype.setImageToUseForPageBackground=Z.prototype.qb;
Z.prototype.setBackgroundColor=Z.prototype.lb;Z.prototype.setGrid=Z.prototype.pb;Z.prototype.clearGrid=Z.prototype.Wa;Z.prototype.exportPng=Z.prototype.$a;Z.prototype.setCallbackFlags=Z.prototype.nb;Z.prototype.setPageBounds=Z.prototype.rb;Z.prototype.deselectAll=Z.prototype.Za;Z.prototype.createDom=Z.prototype.$;Z.prototype.enterDocument=Z.prototype.v;Z.prototype.setFullscreen=Z.prototype.vb;Z.prototype.addElement=Z.prototype.Sa;Z.prototype.removeElements=Z.prototype.jb;Z.prototype.resetCanvas=Z.prototype.kb;
Z.prototype.setReadOnly=Z.prototype.sb;Z.prototype.setElementTransforms=Z.prototype.ob;Z.prototype.isEmpty=Z.prototype.gb;Z.prototype.getCanvasDimensions=Z.prototype.Ha;Z.prototype.getLogsHost=Z.prototype.Ja;Z.prototype.assignFlag=Z.prototype.Ua;Z.prototype.getSnapshot=Z.prototype.eb;Z.prototype.loadFromSnapshot=Z.prototype.hb;Z.prototype.handleCommand=Z.prototype.fb;Z.prototype.getRawEngineObject=Z.prototype.cb;Z.prototype.convertBrixDocumentToSnapshot=Z.prototype.Ya;
Z.prototype.snapshotHasPendingMutations=Z.prototype.tb;Z.prototype.extractMutationPacket=Z.prototype.ab;Z.prototype.clearPendingMutations=Z.prototype.Xa;Z.prototype.flush=Z.prototype.bb;Z.prototype.addSticker=Z.prototype.Ta;ka("ink.BrushModel",X);X.getInstance=X.S;X.prototype.setColor=X.prototype.Qa;X.prototype.setStrokeWidth=X.prototype.Ra;X.prototype.setIsErasing=X.prototype.wb;X.prototype.setShape=X.prototype.xb;X.prototype.getShape=X.prototype.La;X.prototype.getColor=X.prototype.Na;
X.prototype.getActiveColor=X.prototype.ta;X.prototype.getActiveColorNumericRbg=X.prototype.ua;X.prototype.getStrokeWidth=X.prototype.Oa;X.prototype.getIsErasing=X.prototype.Ia;X.prototype.getBrushType=X.prototype.Ma;X.prototype.getToolType=X.prototype.Pa;

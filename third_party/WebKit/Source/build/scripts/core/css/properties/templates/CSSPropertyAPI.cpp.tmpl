// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

{% from 'templates/macros.tmpl' import source_files_for_generated_file %}
{{source_files_for_generated_file(template_file, input_files)}}
// clang-format off

#include "core/css/properties/CSSPropertyAPI.h"

{% for api_class in api_classnames %}
#include "core/css/properties/{{api_class}}.h"
{% endfor %}

namespace blink {

namespace {

{% for _, property_id, classname in api_classes_by_property_id %}
static constexpr {{classname}} api_{{property_id.lower()}}({{property_id}});
{% endfor %}

const CSSPropertyAPI& GetAPI(CSSPropertyID id) {
  static constexpr const CSSPropertyAPI* const property_apis[] = {
    {% for api_class_data in api_classes_by_property_id %}
    &api_{{api_class_data.property_id.lower()}},  // {{api_class_data.property_id}}
    {% endfor %}
  };
  // Subtract 1 because CSSPropertyInvalid does not appear in the array.
  return *property_apis[id - 1];
}

} // namespace

{% for api_class_data in api_classes_by_property_id %}
const CSSPropertyAPI& Get{{api_class_data.property_id}}API() {
  return api_{{api_class_data.property_id.lower()}};
}
{% endfor %}

const CSSPropertyAPI& CSSPropertyAPI::Get(CSSPropertyID id) {
  DCHECK_NE(id, CSSPropertyInvalid);
  DCHECK_LE(id, {{last_property_id}});  // last_property_id
  return GetAPI(id);
}

}  // namespace blink


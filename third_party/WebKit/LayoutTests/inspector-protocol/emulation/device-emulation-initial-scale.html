<html>
<head>

<script src="../../http/tests/inspector-protocol/resources/inspector-protocol-test.js"></script>
<script src="../resources/device-emulation-test.js"></script>

<script>
// This test is based on http://jsbin.com/urowoh/latest.
setMetaViewport();
</script>

<style>
html {
    overflow-x: hidden;
}

body {
    margin: 0;
    min-height: 1000px;
    overflow-x: hidden;
}
</style>

<script>
function test()
{
    // 980px viewport loaded into a 490x320 screen should load at 0.5 scale.
    InspectorTest.testDeviceEmulation("device-emulation-initial-scale.html", 490, 320, 3, "w=980");
}
</script>

</head>
<body onload="runTest()">
<p>
Tests that turning on device emulation with a non-1 device pixel ratio sets the
appropriate initial scale. Page scale is reflected by the innerWidth and
innerHeight properties. Since the layout width is set to 980 (in the viewport
meta tag), and the emulated viewport width is 490 px, the initial scale should
be 490/980 = 0.5. i.e. innerWidth=980 innerHeight=640.
</p>
</body>
</html>

<html>

<body>
initial selected:<br>
<select name="component" size="4">
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option selected=selected>this should be selected</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
</select>
<br>
dynamic selected change:<br>
<select size="4">
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option id='x'>this should be selected</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
</select>
<script>
document.getElementById('x').selected = 'selected';
</script>
<br>
dynamic insert of selected option:<br>
<script>
var sel = document.createElement('select');
sel.setAttribute('size','4');
document.body.appendChild(sel);
var opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'this should be selected';
opt.selected = 'selected';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
</script>
<br>
initial selected:<br>
<select name="component" size="1">
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option selected=selected>this should be selected</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
</select>
<br>
dynamic selected change:<br>
<select size="1">
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
    <option id='xx'>this should be selected</option>
    <option>opt</option>
    <option>opt</option>
    <option>opt</option>
</select>
<script>
document.getElementById('xx').selected = 'selected';
</script>
<br>
dynamic insert of selected option:<br>
<script>
var sel = document.createElement('select');
sel.setAttribute('size','1');
document.body.appendChild(sel);
var opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'this should be selected';
opt.selected = 'selected';
sel.appendChild(opt);
opt = document.createElement('option')
opt.innerHTML = 'opt';
sel.appendChild(opt);
</script>

<p>Display 'none' to 'inline-block'</p>
<select style="display:none;" id="select-none" size="4">
<option>option1</option>
<option>option2</option>
<option>option3</option>
<option>option4</option>
<option>option5</option>
<option>option6</option>
<option selected>This should be selected and visible.</option>
</select>
<script>
// Force layout with display:none.
document.body.offsetHeight;
if (window.testRunner)
  testRunner.waitUntilDone();
requestAnimationFrame(() => {
  document.querySelector('#select-none').style.display = 'inline-block';
  testRunner.notifyDone();
});
</script>

</body>
</html>

<!DOCTYPE html>
<style>
#alignSelfBaseline {
    align-self: baseline;
}

#alignSelfFirstBaseline {
    align-self: first baseline;
}

#alignSelfLastBaseline {
    align-self: last baseline;
}

#alignSelfStretch {
    align-self: stretch;
}

#alignSelfNormal {
    align-self: normal;
}

#alignSelfStart {
    align-self: start;
}

#alignSelfEnd {
    align-self: end;
}

#alignSelfCenter {
    align-self: center;
}

#alignSelfSelfStart {
    align-self: self-start;
}

#alignSelfSelfEnd {
    align-self: self-end;
}

#alignSelfLeft {
    align-self: left;
}

#alignSelfRight {
    align-self: right;
}

#alignSelfFlexStart {
    align-self: flex-start;
}

#alignSelfFlexEnd {
    align-self: flex-end;
}

#alignSelfEndUnsafe {
    align-self: end unsafe;
}

#alignSelfCenterUnsafe {
    align-self: center unsafe;
}

#alignSelfSelfEndSafe {
    align-self: self-end safe;
}

#alignSelfSelfStartSafe {
    align-self: self-start safe;
}

#alignSelfRightSafe {
    align-self: right safe;
}

#alignSelfLeftUnsafe {
    align-self: left unsafe;
}

#alignSelfFlexStartUnsafe {
    align-self: flex-start unsafe;
}

#alignSelfFlexEndSafe {
    align-self: flex-end safe;
}
</style>
<p>Test that setting and getting align-self works as expected</p>
<div id="alignSelfBaseline"></div>
<div id="alignSelfFirstBaseline"></div>
<div id="alignSelfLastBaseline"></div>
<div id="alignSelfStretch"></div>
<div id="alignSelfNormal"></div>
<div id="alignSelfStart"></div>
<div id="alignSelfEnd"></div>
<div id="alignSelfCenter"></div>
<div id="alignSelfSelfStart"></div>
<div id="alignSelfSelfEnd"></div>
<div id="alignSelfLeft"></div>
<div id="alignSelfRight"></div>
<div id="alignSelfFlexStart"></div>
<div id="alignSelfFlexEnd"></div>

<div id="alignSelfEndUnsafe"></div>
<div id="alignSelfCenterUnsafe"></div>
<div id="alignSelfSelfEndSafe"></div>
<div id="alignSelfSelfStartSafe"></div>
<div id="alignSelfRightSafe"></div>
<div id="alignSelfLeftUnsafe"></div>
<div id="alignSelfFlexStartUnsafe"></div>
<div id="alignSelfFlexEndSafe"></div>
<script src="../../resources/testharness.js"></script>
<script src="../../resources/testharnessreport.js"></script>
<script src="resources/alignment-parsing-utils-th.js"></script>
<script>
test(function() {
    var alignSelfBaseline = document.getElementById("alignSelfBaseline");
    checkValues(alignSelfBaseline, "alignSelf", "align-self", "", "baseline");
    var alignSelfFirstBaseline = document.getElementById("alignSelfFirstBaseline");
    checkValues(alignSelfFirstBaseline, "alignSelf", "align-self", "", "baseline");
    var alignSelfLastBaseline = document.getElementById("alignSelfLastBaseline");
    checkValues(alignSelfLastBaseline, "alignSelf", "align-self", "", "last baseline");
    var alignSelfStretch = document.getElementById("alignSelfStretch");
    checkValues(alignSelfStretch, "alignSelf", "align-self", "", "stretch");
    var alignSelfNormal = document.getElementById("alignSelfNormal");
    checkValues(alignSelfNormal, "alignSelf", "align-self", "", "normal");
    var alignSelfStart = document.getElementById("alignSelfStart");
    checkValues(alignSelfStart, "alignSelf", "align-self", "", "start");
    var alignSelfEnd = document.getElementById("alignSelfEnd");
    checkValues(alignSelfEnd, "alignSelf", "align-self", "", "end");
    var alignSelfCenter = document.getElementById("alignSelfCenter");
    checkValues(alignSelfCenter, "alignSelf", "align-self", "", "center");
    var alignSelfSelfEnd = document.getElementById("alignSelfSelfEnd");
    checkValues(alignSelfSelfEnd, "alignSelf", "align-self", "", "self-end");
    var alignSelfSelfStart = document.getElementById("alignSelfSelfStart");
    checkValues(alignSelfSelfStart, "alignSelf", "align-self", "", "self-start");
    var alignSelfLeft = document.getElementById("alignSelfLeft");
    checkValues(alignSelfLeft, "alignSelf", "align-self", "", "left");
    var alignSelfRight = document.getElementById("alignSelfRight");
    checkValues(alignSelfRight, "alignSelf", "align-self", "", "right");
    var alignSelfFlexStart = document.getElementById("alignSelfFlexStart");
    checkValues(alignSelfFlexStart, "alignSelf", "align-self", "", "flex-start");
    var alignSelfFlexEnd = document.getElementById("alignSelfFlexEnd");
    checkValues(alignSelfFlexEnd, "alignSelf", "align-self", "", "flex-end");

    var alignSelfEndUnsafe = document.getElementById("alignSelfEndUnsafe");
    checkValues(alignSelfEndUnsafe, "alignSelf", "align-self", "", "end unsafe");
    var alignSelfCenterUnsafe = document.getElementById("alignSelfCenterUnsafe");
    checkValues(alignSelfCenterUnsafe, "alignSelf", "align-self", "", "center unsafe");
    var alignSelfSelfEndSafe = document.getElementById("alignSelfSelfEndSafe");
    checkValues(alignSelfSelfEndSafe, "alignSelf", "align-self", "", "self-end safe");
    var alignSelfSelfStartSafe = document.getElementById("alignSelfSelfStartSafe");
    checkValues(alignSelfSelfStartSafe, "alignSelf", "align-self", "", "self-start safe");
    var alignSelfRightSafe = document.getElementById("alignSelfRightSafe");
    checkValues(alignSelfRightSafe, "alignSelf", "align-self", "", "right safe");
    var alignSelfLeftUnsafe = document.getElementById("alignSelfLeftUnsafe");
    checkValues(alignSelfLeftUnsafe, "alignSelf", "align-self", "", "left unsafe");
    var alignSelfFlexStartUnsafe = document.getElementById("alignSelfFlexStartUnsafe");
    checkValues(alignSelfFlexStartUnsafe, "alignSelf", "align-self", "", "flex-start unsafe");
    var alignSelfFlexEndSafe = document.getElementById("alignSelfFlexEndSafe");
    checkValues(alignSelfFlexEndSafe, "alignSelf", "align-self", "", "flex-end safe");
}, "Test getting align-self set through CSS.");

test(function() {
    element = document.createElement("div");
    document.body.appendChild(element);
    checkValues(element, "alignSelf", "align-self", "", "auto");
}, "Test initial value of align-self through JS");

test(function() {
    container = document.createElement("div");
    element = document.createElement("div");
    container.appendChild(element);
    document.body.appendChild(container);
    element.style.alignSelf = "center";
    checkValues(element, "alignSelf", "align-self",  "center", "center");

    element.style.alignSelf = "unsafe start";
    checkValues(element, "alignSelf", "align-self",  "start unsafe", "start unsafe");

    element.style.alignSelf = "flex-end safe";
    checkValues(element, "alignSelf", "align-self",  "flex-end safe", "flex-end safe");

    element.style.alignSelf = "right";
    checkValues(element, "alignSelf", "align-self",  "right", "right");

    element.style.alignSelf = "center";
    checkValues(element, "alignSelf", "align-self",  "center", "center");

    element.style.alignSelf = "self-start";
    checkValues(element, "alignSelf", "align-self",  "self-start", "self-start");

    element.style.alignSelf = "normal";
    checkValues(element, "alignSelf", "align-self",  "normal", "normal");

    element.style.alignSelf = "auto";
    checkValues(element, "alignSelf", "align-self",  "auto", "auto");

    container.style.display = "flex";
    element.style.alignSelf = "auto";
    checkValues(element, "alignSelf", "align-self",  "auto", "auto");

    container.style.display = "grid";
    element.style.alignSelf = "auto";
    checkValues(element, "alignSelf", "align-self",  "auto", "auto");

    element.style.alignSelf = "self-end";
    checkValues(element, "alignSelf", "align-self",  "self-end", "self-end");
}, "Test getting and setting align-self through JS");

test(function() {
    document.documentElement.style.alignSelf = "auto";
    checkValues(document.documentElement, "alignSelf", "align-self",  "auto", "auto");
}, "Test 'auto' value resolution for the root node");

test(function() {
    container = document.createElement("div");
    element = document.createElement("div");
    container.appendChild(element);
    document.body.appendChild(container);

    checkBadValues(element, "alignSelf", "align-self",  "auto safe");
    checkBadValues(element, "alignSelf", "align-self",  "auto left");
    checkBadValues(element, "alignSelf", "align-self",  "normal unsafe");
    checkBadValues(element, "alignSelf", "align-self",  "normal stretch");
    checkBadValues(element, "alignSelf", "align-self",  "baseline normal");
    checkBadValues(element, "alignSelf", "align-self",  "baseline safe");
    checkBadValues(element, "alignSelf", "align-self",  "baseline center");
    checkBadValues(element, "alignSelf", "align-self",  "stretch unsafe");
    checkBadValues(element, "alignSelf", "align-self",  "stretch right");
    checkBadValues(element, "alignSelf", "align-self",  "unsafe unsafe");
    checkBadValues(element, "alignSelf", "align-self",  "unsafe safe");
    checkBadValues(element, "alignSelf", "align-self",  "center start");
    checkBadValues(element, "alignSelf", "align-self",  "stretch unsafe");
    checkBadValues(element, "alignSelf", "align-self",  "safe stretch");
    checkBadValues(element, "alignSelf", "align-self",  "baseline safe");
    checkBadValues(element, "alignSelf", "align-self",  "unsafe baseline");
    checkBadValues(element, "alignSelf", "align-self",  "unsafe safe left");
    checkBadValues(element, "alignSelf", "align-self",  "unsafe left safe");
    checkBadValues(element, "alignSelf", "align-self",  "left safe unsafe safe");
    checkBadValues(element, "alignSelf", "align-self",  "legacy start");
    checkBadValues(element, "alignSelf", "align-self",  "legacy end");
    checkBadValues(element, "alignSelf", "align-self",  "legacy right unsafe");
    checkBadValues(element, "alignSelf", "align-self",  "legacy auto");
    checkBadValues(element, "alignSelf", "align-self",  "legacy stretch");
    checkBadValues(element, "alignSelf", "align-self",  "legacy");
    checkBadValues(element, "alignSelf", "align-self",  "legacy left right");
}, "Test bad combinations of align-self");

test(function() {
    container.style.display = "";
    checkInitialValues(element, "alignSelf", "align-self", "center", "auto");
}, "Test the value 'initial'");

test(function() {
    container.style.display = "grid";
    checkInitialValues(element, "alignSelf", "align-self", "left safe", "auto");
}, "Test the value 'initial' for grid containers");

test(function() {
    container.style.display = "flex";
    checkInitialValues(element, "alignSelf", "align-self", "right unsafe", "auto");
}, "Test the value 'initial' for flex containers");

test(function() {
    container.style.display = "";
    element.style.position = "absolute";
    checkInitialValues(element, "alignSelf", "align-self", "left", "auto");
}, "Test the value 'initial' for positioned elements");

test(function() {
    container.style.display = "grid";
    element.style.position = "absolute";
    checkInitialValues(element, "alignSelf", "align-self", "right", "auto");
}, "Test the value 'initial' for positioned elements in grid containers");

test(function() {
    container.style.display = "flex";
    element.style.position = "absolute";
    checkInitialValues(element, "alignSelf", "align-self", "end", "auto");
}, "Test the value 'initial' for positioned elements in grid containers");

test(function() {
    checkInheritValues("alignSelf", "align-self", "end");
    checkInheritValues("alignSelf", "align-self", "left safe");
    checkInheritValues("alignSelf", "align-self", "center unsafe");
}, "Test the value 'inherit'");
</script>

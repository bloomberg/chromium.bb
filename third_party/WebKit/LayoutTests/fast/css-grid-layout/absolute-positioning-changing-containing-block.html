<!DOCTYPE html>

<style>
 .wrapper {
     width: 100px;
     height: 100px;
     margin-bottom: 25px;
     background: purple;
     position: relative;
 }

 .grid {
     display: grid;
     grid-template: 10px / 10px;
     width: 50px;
     height: 50px;
     background: lightblue;
 }

 .item {
     width: 75%;
     height: 75%;
     background: orange;
     position: absolute;
 }
</style>

<p>This test checks that absolutelly positioned children of a grid are properly sized when the containing block switches between the grid container and a grid ancestor.</p>
<p>The test PASS if you see an orange box inside a purple box on top and a small orange box inside a light blue box inside a purple box on bottom.</p>

<div class="wrapper">
    <div id="grid-as-cb" class="grid" style="position: relative;">
	<div class="item"></div>
    </div>
</div>
<div class="wrapper">
    <div id="grid-as-parent" class="grid">
	<div class="item"></div>
    </div>
</div>

<script>
 if (window.testRunner)
     testRunner.waitUntilDone();
 function test() {
     document.getElementById("grid-as-cb").style.position = "initial";
     document.getElementById("grid-as-parent").style.position = "relative";
     document.body.offsetLeft;
     testRunner.notifyDone();
 }
 setTimeout(test, 0);
</script>

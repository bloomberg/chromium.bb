<!DOCTYPE html>
<title>Test that playing a video element with preload "none" changes its effective preload to "metadata"</title>
<script src="../resources/testharness.js"></script>
<script src="../resources/testharnessreport.js"></script>
<script src="media-file.js"></script>
<video preload="none"></video>
<script>
test(function() {
    var video = document.querySelector('video');
    video.src = findMediaFile('video', 'content/test');
    assert_equals(internals.effectivePreload(video), "none");
    video.play();
    assert_equals(internals.effectivePreload(video), "metadata");
});
</script>

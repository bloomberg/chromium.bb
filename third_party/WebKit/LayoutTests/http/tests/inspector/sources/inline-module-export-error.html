<html>
<head>
<script src="../inspector-test.js"></script>
<script src="../debugger-test.js"></script>
<script type="module">
import {x} from "./resources/empty-module.js";
</script>
<script>

var test = function() {
  SourcesTestRunner.startDebuggerTest(step1);

  function step1() {
    TestRunner.DebuggerAgent.setPauseOnExceptions(SDK.DebuggerModel.PauseOnExceptionsState.PauseOnAllExceptions);
    SourcesTestRunner.waitUntilPaused(step2);
    TestRunner.reloadPage();
  }

  function step2() {
    var callFrames = TestRunner.debuggerModel.callFrames;
    var frame = callFrames[0];
    var uiLocation = Bindings.debuggerWorkspaceBinding.rawLocationToUILocation(frame.location());
    SourcesTestRunner.showUISourceCode(uiLocation.uiSourceCode, dumpCallFrameLine);

    function dumpCallFrameLine(sourceFrame) {
      var resourceText = sourceFrame._textEditor.text();
      var lines = resourceText.split('\n');
      var lineNumber = uiLocation.lineNumber;
      TestRunner.addResult('line ' + lineNumber + ', content: ' + lines[lineNumber]);
      SourcesTestRunner.completeDebuggerTest();
    }
  }
};

</script>
</head>
<body onload="runTest()">
<p>Tests lineNumber for import error inside of inline module.</p>
</body>
</html>

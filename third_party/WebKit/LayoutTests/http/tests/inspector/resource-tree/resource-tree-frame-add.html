<html>
<head>
<script src="../inspector-test.js"></script>
<script src="../resources-test.js"></script>
<script src="resource-tree-test.js"></script>

<link rel="stylesheet" href="resources/styles-initial.css">

<script>
function createIframe()
{
    var iframe = document.createElement("iframe");
    iframe.setAttribute("src", "resources/resource-tree-frame-add-iframe.html");
    document.body.appendChild(iframe);
}

function test() {
  TestRunner.addResult('Before addition');
  TestRunner.addResult('====================================');
  ApplicationTestRunner.dumpResourceTreeEverything();
  ConsoleTestRunner.addConsoleSniffer(step2);
  TestRunner.evaluateInPage('createIframe()');

  function step2() {
    TestRunner.addResult('');
    TestRunner.addResult('After addition');
    TestRunner.addResult('====================================');
    ApplicationTestRunner.dumpResourceTreeEverything();
    TestRunner.completeTest();
  }
}

</script>

</head>

<body onload="runTest()">
<p>
Tests resource tree model on iframe addition, compares resource tree against golden. Every line is important.
</p>

</body>
</html>

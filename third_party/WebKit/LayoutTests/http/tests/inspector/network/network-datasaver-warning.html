<html>
<head>
<script src="../inspector-test.js"></script>
<script src="../console-test.js"></script>
<script src="../network-test.js"></script>
<script>

async function test() {
  TestRunner.addResult('Console messages:');
  ConsoleTestRunner.dumpConsoleMessages();
  TestRunner.addResult('');

  TestRunner.addResult('Enabling data saver');
  TestRunner.evaluateInPagePromise('window.internals.settings.setDataSaverEnabled(true)');
  TestRunner.addResult('Reloading Page');
  await TestRunner.reloadPagePromise();

  TestRunner.addResult('Console messages:');
  ConsoleTestRunner.dumpConsoleMessages();
  TestRunner.addResult('');

  TestRunner.addResult('Reloading Page');
  await TestRunner.reloadPagePromise();
  TestRunner.addResult('Console messages:');
  ConsoleTestRunner.dumpConsoleMessages();

  TestRunner.completeTest();
}
</script>
</head>
<body onload="runTest()">
<p>Tests to ensure datsaver logs warning in console if enabled and only shown once on reloads.</p>
</body>
</html>

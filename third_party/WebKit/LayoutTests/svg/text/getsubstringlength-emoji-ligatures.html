<!DOCTYPE html>
<meta charset="utf-8">
<title>SVGTextContentElement.getSubStringLength on Emoji with ligatures</title>
<script src="../../resources/testharness.js"></script>
<script src="../../resources/testharnessreport.js"></script>
<svg>
  <g font-family="Comic Sans MS" font-size="50" text-rendering="geometricPrecision">
    <text y="50">ğŸ‘¦</text>
    <text y="100">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</text>
    <text y="50" x="100">ğŸ‘¨â€</text>
    <text y="100" x="100">ğŸ‘©ğŸ½â€ğŸŒ¾</text>
    <text y="50" x="150">ğŸ‘¨â€ğŸ‘¦</text>
    <text y="100" x="150">ğŸ‘±ğŸ½â€â™‚ï¸</text>
    <text y="50" x="200">ğŸ…ğŸ½</text>
  </g>
</svg>
<script>
  test(function() {
  const textElements = document.getElementsByTagName('text');

  for (let i = 0; i < textElements.length; i++) {
    const element = textElements[i];
    const subStringLength = element.getSubStringLength(0, element.getNumberOfChars());
    const bboxWidth = element.getBBox().width;
    // Expect the value computed by getSubStringLength() to roughly
    // match the value computed for the bbox.
    assert_approx_equals(subStringLength, bboxWidth, 1);
  }
});
</script>

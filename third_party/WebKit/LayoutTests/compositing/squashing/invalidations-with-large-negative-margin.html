<!DOCTYPE html>
<div style="height:200px;width:600px;overflow:scroll">
  <div style="position:relative">
    <div style="height:400px;margin-bottom:-400px;position:relative">
      <div id="chip" style="width:50px;height:50px;position:absolute;background:lightblue;margin:0"></div>
    </div>
  </div>
</div>

<script src="../../fast/repaint/resources/text-based-repaint.js"></script>
<script>
// Test that moving a RenderLayer that is squashed relative to its squashing container repaints correctly.
// In particular, the repaint rect needs to be recorded in the correct position relative to the squashing GraphicsLayer.

if (window.internals)
    window.internals.settings.setLayerSquashingEnabled(true);

function repaintTest()
{
    document.getElementById('chip').style.left = "400px";
}

runRepaintTest();
</script>
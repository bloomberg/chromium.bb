<!DOCTYPE html>
<html>
<head>
<title>Detached use of navigator.vr</title>
<script src="../../resources/testharness.js"></script>
<script src="../../resources/testharnessreport.js"></script>
</head>
<body>
<iframe sandbox="allow-same-origin" id="subframe"></iframe>
<script>

promise_test(t => {
  var nav_vr = window.frames[0].navigator.vr;
  document.getElementById("subframe").remove();
  return promise_rejects(t, "InvalidStateError", nav_vr.requestDevice());
}, "Check that navigator.vr.requestDevice rejects on a detached navigator.");

</script>
</body>
</html>

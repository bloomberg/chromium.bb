<!--
Copyright 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="ct-builder.html">

<script>
(function () {

module("ct-builder");

asyncTest("basic", 2, function() {
  var builder = document.createElement('ct-builder');
  builder.builder = 'WebKit Linux (dbg)';

  builder.async(function() {
    var html = builder.shadowRoot.innerHTML;

    var a = builder.shadowRoot.querySelector('a');
    ok(a);
    notEqual(a.href.indexOf('WebKit+Linux+(dbg)'), -1);

    start();
  });
});

asyncTest("steps", 3, function() {
  var builder = document.createElement('ct-builder');
  builder.builder = 'WebKit Linux (dbg)';
  builder.steps = ['gclient_revert', 'compile', 'unittests'];

  builder.async(function() {
    var a = builder.shadowRoot.querySelector('a');
    ok(a);
    notEqual(a.href.indexOf('WebKit+Linux+(dbg)'), -1);
    notEqual(a.innerText.indexOf('gclient_revert, compile, unittests'), -1);

    start();
  });
});

})()
</script>

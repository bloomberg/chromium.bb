<!DOCTYPE html>
<html>
<head>
<title>Inserting an @viewport rule before an existing one (CSSOM)</title>
<style>
@viewport {
  width: 500px;
}
</style>
<script>
  function test() {
    if (window.testRunner) {
      testRunner.dumpAsText();
      document.styleSheets[0].insertRule("@viewport {width: 1000px}", 0);
      document.body.offsetWidth; // Trigger style resolving
      alert(internals.viewportAsText(document, 1, 320, 352));
    }
  }
</script>
</head>
<body onload="test()"></body>
</html>

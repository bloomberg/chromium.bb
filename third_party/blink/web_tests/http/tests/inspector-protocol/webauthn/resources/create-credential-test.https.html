<!DOCTYPE html>
<html lang="en">
<head>
  <script>
async function registerCredential(options = {}) {
  options = Object.assign({
    authenticatorSelection: {
      requireResidentKey: false,
    },
    rp: {
      id: 'devtools.test',
      name: 'DevTools Test',
    },
    challenge: Uint8Array.from('challenge'),
    pubKeyCredParams: [
      {type: 'public-key', alg: -7},
    ],
    user: {
      name: 'name',
      displayName: 'displayName',
      id: Uint8Array.from([1]),
    },
  }, options);

  try {
    const credential = await navigator.credentials.create({publicKey: options});
    return JSON.stringify({
      status: "OK",
      credential: {
        id: credential.id,
        transports: credential.response.getTransports(),
      }
    });
  } catch (error) {
    return JSON.stringify({status: error.toString()});
  }
}
  </script>
</head>
<body>
</body>
</html>

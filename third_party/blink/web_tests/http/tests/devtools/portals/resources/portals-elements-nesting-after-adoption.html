<body>
  <portal src="activate-predecessor.html"></portal>
  <script>
    async function waitForAdoption() {
      var portal = document.querySelector("portal");
      await portal.activate();
      document.body.removeChild(portal);
      return new Promise(resolve => {
        window.onportalactivate = e => {
          portal = e.adoptPredecessor();
          document.body.appendChild(portal);
          resolve();
        }
      });
    }
  </script>
</body>

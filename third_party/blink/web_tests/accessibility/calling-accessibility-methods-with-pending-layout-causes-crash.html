<html>
<head>
<script src="../resources/testharness.js"></script>
<script src="../resources/testharnessreport.js"></script>
<script src="../resources/run-after-layout-and-paint.js"></script>
</head>
<body>
<a href="#" id="link">
<script>
test_after_layout_and_paint((t) => {
    var link = document.getElementById("link");
    link.focus();
    link.style.display = "block";
    accessibilityController.focusedElement.name;
}, "Changing the display of a link from inline to block invalidates layout, but doesn't trigger a layout right away. Ensure that accessing the accessibility object's text before the layout happens doesn't cause a crash.");
</script>
</body>

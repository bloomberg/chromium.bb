// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

/* DO NOT EDIT. Generated from {{module.path}} */


{%- if variant -%}
{%-   set variant_path = "%s-%s"|format(module.path, variant) -%}
{%- else -%}
{%-   set variant_path = module.path -%}
{%- endif %}

#include "{{variant_path}}_impl_struct.h"

#include <utility>

#include "base/logging.h"

{%- for struct in structs %}
{%- set struct_name = struct|get_name_for_kind %}

// Struct {{struct_name}}.
{{struct_name}}::{{struct_name}}() {
}

{{struct_name}}::~{{struct_name}}() {
}

{{struct_name}}Ptr {{struct_name}}_Create() {
  return new {{struct_name}}();
}

void {{struct_name}}_Destroy({{struct_name}}Ptr self) {
  delete self;
}

// Struct {{struct_name}} setters.
{%- for packed_field in struct.packed.packed_fields_in_ordinal_order %}
{%-  set kind = packed_field.field.kind %}
{%-  if kind|is_array_kind %}
void {{struct_name}}_add_{{packed_field.field.name}}({{struct_name}}Ptr self, {{kind.kind|c_wrapper_type}} {{packed_field.field.name}}) {
  DCHECK(self);
{%-   if kind.kind|is_struct_kind %}
  {{kind.kind|cpp_wrapper_type}} tmp_ptr({{packed_field.field.name}});
  self->{{packed_field.field.name}}.push_back(std::move(tmp_ptr));
{%-   else %}
  self->{{packed_field.field.name}}.push_back({{packed_field.field.name}});
{%-   endif %}
}
{%-  else %}
void {{struct_name}}_set_{{packed_field.field.name}}({{struct_name}}Ptr self, {{packed_field.field.kind|c_wrapper_type}} {{packed_field.field.name}}) {
  DCHECK(self);
{%-   if kind|is_struct_kind %}
  self->{{packed_field.field.name}}.reset({{packed_field.field.name}});
{%-   else %}
  self->{{packed_field.field.name}} = {{packed_field.field.name}};
{%-   endif %}
}
{%- endif %}
{% endfor %}

// Struct {{struct_name}} getters.
{%- for packed_field in struct.packed.packed_fields_in_ordinal_order %}
{%-  set kind = packed_field.field.kind %}
{%-  if kind|is_array_kind %}
uint32_t {{struct_name}}_get_{{packed_field.field.name}}Size({{struct_name}}Ptr self) {
  DCHECK(self);
  return self->{{packed_field.field.name}}.size();
}
{{kind.kind|c_wrapper_type}} {{struct_name}}_get_{{packed_field.field.name}}AtIndex({{struct_name}}Ptr self, uint32_t index) {
  DCHECK(self);
  DCHECK(index < self->{{packed_field.field.name}}.size());
{%-   if kind.kind|is_struct_kind %}
  return self->{{packed_field.field.name}}[index].get();
{%-   elif kind.kind|is_string_kind %}
  return self->{{packed_field.field.name}}[index].c_str();
{%-   else %}
  return self->{{packed_field.field.name}}[index];
{%-   endif %}
}
{%-  else %}
{{packed_field.field.kind|c_wrapper_type}} {{struct_name}}_get_{{packed_field.field.name}}({{struct_name}}Ptr self) {
  DCHECK(self);
{%-   if kind|is_struct_kind %}
  return self->{{packed_field.field.name}}.get();
{%-   elif kind|is_string_kind %}
  return self->{{packed_field.field.name}}.c_str();
{%-   else %}
  return self->{{packed_field.field.name}};
{%-   endif %}
}
{%- endif %}
{% endfor %}
{%- endfor %}


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!-- Copyright 2008 Google Inc.  All rights reserved. -->
  <head>
    <title>SRPC Simple Plug-in</title>
    <script type="text/javascript">
      // fortytwo is invoked when its button is pressed.
      function fortytwo() {
      }
      // helloworld is invoked when its button is pressed

      function Test()
      {
        this.length = 0x40000004;

        for(var i = 0; i < 100; i++)
        {
          this[i] = 0x41414141;
        }
      }

      function helloworld() {
        var myobj = new Test();;

        try {
          alert(document.getElementById('pluginobj').helloworld(myobj));
        } catch(e) {
          alert(e);
        }
      }
    </script>
  </head>
  <body>
    <h1>Native Client SRPC Simple Plug-in</h1>
    <p>
      <button type="button" onclick="fortytwo()" id="ftbuttonobj">
        Call fortytwo()
      </button>
      <button type="button" onclick="helloworld()" id="hwbuttonobj">
        Call helloworld()
      </button>
      <embed id="pluginobj" type="application/x-nacl"
             width="0" height="0" src="issue55.nexe" />
    </p>
    <p>
      If the plug-in is working correctly, a click on the "Call fortytwo()"
      button should open a popup dialog containing <b>42</b> and a click
      on the "Call helloworld()" button should open a popup dialog containing
      <b>hello, world.</b>.
    </p>
    <p>
      <b>Note:</b> For the purposes of contest issue #55, the actual expected
      result will be a "Method invocation failed" dialog when the
      "Call helloworld()" button is clicked.  The browser should continue
      to work properly after the dialog is closed.  The "Call fortytwo()"
      button is not connected to any code, and should do nothing when clicked.
    </p>
  </body>
</html>

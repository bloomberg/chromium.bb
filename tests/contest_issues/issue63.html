<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!-- Copyright 2008 Google Inc.  All rights reserved. -->
  <head>
    <title>SRPC Simple Plug-in</title>
    <script type="text/javascript">
      // fortytwo is invoked when its button is pressed.

      function testobj()
      {
        this.x = 1;
        this.desc = "hi";
      }

      function fortytwo() {
        var myobj = new testobj();

        try {
          alert(document.getElementById('pluginobj').fortytwo(myobj));
        } catch(e) {
          alert(e);
        }
      }
      // helloworld is invoked when its button is pressed

      function helloworld() {
        var myobj = "hi there";

        myobj.utf8length = 0xFFFFFFFF;
        myobj.length = 0xFFFFFFFF;

        try {
          alert(document.getElementById('pluginobj').helloworld(myobj));
        } catch(e) {
          alert(e);
        }
      }
    </script>
  </head>
  <body>
    <h1>Native Client SRPC Simple Plug-in</h1>
    <p>
      <button type="button" onclick="fortytwo()" id="ftbuttonobj">
        Call fortytwo()
      </button>
      <button type="button" onclick="helloworld()" id="hwbuttonobj">
        Call helloworld()
      </button>
      <embed id="pluginobj" type="application/x-nacl"
             width="0" height="0" src="issue63.nexe" />
    </p>
    <p>
      If the plug-in is working correctly, a click on the "Call fortytwo()"
      button should open a popup dialog containing <b>42</b> and a click
      on the "Call helloworld()" button should open a popup dialog containing
      <b>hello, world.</b>.
    </p>
    <p>
      <b>Note:</b> For the purposes of contest issue #63, the actual expected
      result will be a "Method invocation failed" dialog when either the
      "Call fortytwo()" button or the "Call helloworld()" button is clicked.
      The browser should continue to work properly after the dialog is closed.
    </p>
  </body>
</html>

<!-- Copyright 2016 The Chromium Authors. All rights reserved.
  -- Use of this source code is governed by a BSD-style license that can be
  -- found in the LICENSE file.
-->

<link rel="import" href="chrome://resources/html/polymer.html">

<dom-module id="files-metadata-entry">
  <template>
    <style>
      div {
        margin: 0;
      }

      #box {
        display: flex;
        margin: 12px 0;
        min-height: 14px;
        width: 320px;
      }

      #box[hidden] {
        display: none;
      }

      #padding {
        width: 32px;
      }

      #key {
        color: white;
        font-weight: 500;
        margin-inline-end: 16px;
        overflow-wrap: break-word;
        vertical-align: bottom;
        width: 96px;
      }

      #value {
        color: white;
        opacity: 0.8;
        overflow-wrap: break-word;
        vertical-align: bottom;
        width: 160px;
      }

      #value[loading] {
        /* TODO(crbug.com/965370) loading is only set on |size| metatdata of a
           directory entry. This font-size makes the modificationTime value that
           appears below it, render further down from its normal position. Once
           the size is loaded, this "loading" CSS is removed & modificationTime
           renders in its normal position: visual effect is the modificationTime
           "bounces" around in the metadata box. */
        font-size: 30px;
      }

      #value[loading]::after {
        /* TODO(crbug.com/965370) see above */
        animation: ellipsis steps(4,end) 900ms infinite;
        content: '\2026'; /* ascii code for the ellipsis character */
        display: inline-block;
        overflow: hidden;
        vertical-align: bottom;
        width: 0;
      }

      @keyframes ellipsis {
        to {
          width: 1.25em;
        }
      }

      @media only screen and (max-width: 720px) {
        #padding {
          width: 12px;
        }
        #box {
          width: 240px;
        }
        #key {
          margin-inline-end: 8px;
          width: 80px;
        }
        #value {
          width: 140px;
        }
      }
    </style>
    <div id="box" hidden="[[!value]]">
      <div id="padding"></div>
      <div id="key">[[key]]</div>
      <!-- TODO(crbug.com/965370) The loading animation is only applied to a
           directory entry size metadata field at this time. On switching to
           another directory, the size field value is cleared, and that hides
           our <div id="box"> parent. Result: the #value[loading] animation
           applied here _is never visible_! -->
      <div id="value" loading$="{{loading}}">
        <div hidden="[[loading]]">[[value]]</div>
      </div>
    </div>
  </template>
</dom-module>

<script src="files_metadata_entry.js"></script>

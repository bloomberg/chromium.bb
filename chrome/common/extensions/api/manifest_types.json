// Copyright 2013 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

// The type schemas for structured manifest items. Not actually a callable API.

[
  {
    "namespace": "manifestTypes",
    "description": "Schemas for structured manifest entries",
    "compiler_options": {
      "generate_error_messages": true
    },
    "types": [
      {
        "id": "ExternallyConnectable",
        "type": "object",
        // Note: description commented out because externally_connectable.html
        // already describes it, and the repetition looks odd.
        // "description": "The <code>externally_connectable</code> manifest property declares which extensions, apps, and web pages can connect to your extension via $(ref:runtime.connect) and $(ref:runtime.sendMessage).",
        "properties": {
          "ids": {
            "description": "<p>The IDs of extensions or apps that are allowed to connect. If left empty or unspecified, no extensions or apps can connect.</p><p>The wildcard <code>\"*\"</code> will allow all extensions and apps to connect.</p>",
            "optional": true,
            "type": "array",
            "items": {"type": "string"}
          },
          "matches": {
            "description": "<p>The URL patterns for <em>web pages</em> that are allowed to connect. <em>This does not affect content scripts.</em> If left empty or unspecified, no web pages can connect.</p><p>Patterns cannot include wildcard domains nor subdomains of <a href=\"http://publicsuffix.org/list/\">(effective) top level domains</a>; <code>*://google.com/*</code> and <code>http://*.chromium.org/*</code> are valid, while <code>&lt;all_urls&gt;</code>, <code>http://*/*</code>, <code>*://*.com/*</code>, and even <code>http://*.appspot.com/*</code> are not.</p>",
            "optional": true,
            "type": "array",
            "items": {"type": "string"}
          },
          "accepts_tls_channel_id": {
            "description": "If <code>true</code>, messages sent via $(ref:runtime.connect) or $(ref:runtime.sendMessage) will set $(ref:runtime.MessageSender.tlsChannelId) if those methods request it to be. If <code>false</code>, $(ref:runtime.MessageSender.tlsChannelId) will never be set under any circumstance.",
            "optional": true,
            "type": "boolean"
          }
        }
      },
      {
        "id": "ChromeSettingsOverrides",
        "type": "object",
        "description": "Chrome settings which can be overriden by an extension.",
        "properties": {
          // TODO(wittman): Remove for M37.
          "bookmarks_ui": {
            "type": "object",
            "description": "Settings to permit bookmarks user interface customization by extensions.",
            "optional": true,
            "nodoc": true,
            "properties": {
              "remove_button": {
                "type": "boolean",
                "description": "If <code>true</code>, the built-in bookmark button will be removed from the user interface.",
                "optional": true
              },
              "remove_bookmark_shortcut": {
                "type": "boolean",
                "description": "If <code>true</code>, the built-in \"Bookmark this page...\" shortcut key is removed and the extension is permitted to override the shortcut by binding it in the commands section of the manifest. The corresponding menu item is also removed or overridden as well.",
                "optional": true
              },
              "remove_bookmark_open_pages_shortcut": {
                "type": "boolean",
                "nodoc": true,
                "description": "[Private] If <code>true</code>, the built-in \"Bookmark open pages...\" shortcut key and corresponding menu item is removed.",
                "optional": true
              },
              "hide_bookmark_button": {
                "type": "boolean",
                "description": "Deprecated. Use remove_button instead.",
                "optional": true
              }
            }
          },
          "homepage": {
            "description": "New value for the homepage.",
            "optional": true,
            "type": "string"
          },
          "search_provider": {
            "type": "object",
            "description": "A search engine",
            "optional": true,
            "properties": {
              "name": {
                "type": "string",
                "description": "Name of the search engine displayed to user."
              },
              "keyword": {
                "type": "string",
                "description": "Omnibox keyword for the search engine."
              },
              "favicon_url": {
                "type": "string",
                "description": "An icon URL for the search engine."
              },
              "search_url": {
                "type": "string",
                "description": "An search URL used by the search engine."
              },
              "encoding": {
                "type": "string",
                "description": "Encoding of the search term."
              },
              "suggest_url": {
                "type": "string",
                "optional": true,
                "description": "If omitted, this engine does not support suggestions."
              },
              "instant_url": {
                "type": "string",
                "optional": true,
                "description": "If omitted, this engine does not support instant."
              },
              "image_url": {
                "type": "string",
                "optional": true,
                "description": "If omitted, this engine does not support image search."
              },
              "search_url_post_params": {
                "type": "string",
                "optional": true,
                "description": "The string of post parameters to search_url"
              },
              "suggest_url_post_params": {
                "type": "string",
                "optional": true,
                "description": "The string of post parameters to suggest_url"
              },
              "instant_url_post_params": {
                "type": "string",
                "optional": true,
                "description": "The string of post parameters to instant_url"
              },
              "image_url_post_params": {
                "type": "string",
                "optional": true,
                "description": "The string of post parameters to image_url"
              },
              "alternate_urls": {
                "type": "array",
                "items": { "type": "string" },
                "optional": true,
                "description": "A list of URL patterns that can be used, in addition to |search_url|."
              },
              "is_default": {
                "type": "boolean",
                "description": "Specifies if the search provider should be default."
              }
            }
          },
          "startup_pages": {
            "description": "An array of length one containing a URL to be used as the startup page.",
            "optional": true,
            "type": "array",
            "items": {"type": "string"}
          }
        }
      },
      {
        "id": "ChromeUIOverrides",
        "type": "object",
        "description": "Chrome user interface features which can be overriden by an extension.",
        "properties": {
          "bookmarks_ui": {
            "type": "object",
            "description": "Settings to permit bookmarks user interface customization by extensions.",
            "optional": true,
            "properties": {
              "remove_button": {
                "type": "boolean",
                "description": "If <code>true</code>, the built-in bookmark button will be removed from the user interface.",
                "optional": true
              },
              "remove_bookmark_shortcut": {
                "type": "boolean",
                "description": "If <code>true</code>, the built-in \"Bookmark this page...\" shortcut key is removed and the extension is permitted to override the shortcut by binding it in the commands section of the manifest.",
                "optional": true
              },
              "remove_bookmark_open_pages_shortcut": {
                "type": "boolean",
                "nodoc": true,
                "description": "[Private] If <code>true</code>, the built-in \"Bookmark open pages...\" shortcut key and corresponding menu item is removed.",
                "optional": true
              }
            }
          }
        }
      },
      {
        "id": "bluetooth",
        "type": "object",
        "description": "The <code>bluetooth</code> manifest property give permission to an app to use the $(ref:bluetooth) API. A list of UUIDs can be optionally specified to enable communication with devices.",
        "properties": {
          "uuids": {
            "description": "The <code>uuids</code> manifest property declares the list of protocols, profiles and services that an app can communicate using.",
            "optional": true,
            "type": "array",
            "items": {
              "description": "<p>The list specified as UUID strings.</p>",
              "type": "string"
            }
          }
        }
      }
    ]
  }
]

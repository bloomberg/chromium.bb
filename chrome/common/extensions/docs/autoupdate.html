<!DOCTYPE html><!-- This page is a placeholder for generated extensions api doc. Note:
    1) The <head> information in this page is significant, should be uniform
       across api docs and should be edited only with knowledge of the
       templating mechanism.
    3) All <body>.innerHTML is genereated as an rendering step. If viewed in a
       browser, it will be re-generated from the template, json schema and
       authored overview content.
    4) The <body>.innerHTML is also generated by an offline step so that this
       page may easily be indexed by search engines.
--><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="css/ApiRefStyles.css" rel="stylesheet" type="text/css">
    <link href="css/print.css" rel="stylesheet" type="text/css" media="print">
    <script type="text/javascript" src="../../../third_party/jstemplate/jstemplate_compiled.js">
    </script>
    <script type="text/javascript" src="js/api_page_generator.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
  <title>AutoUpdate</title></head><body>  <div id="container">
      <!-- SUBTEMPLATES: DO NOT MOVE FROM THIS LOCATION -->
      <!-- In particular, sub-templates that recurse, must be used by allowing
           jstemplate to make a copy of the template in this section which
           are not operated on by way of the jsskip="true" -->
      <div style="display:none">

        <!-- VALUE -->
        <div id="valueTemplate">
          <dt>
            <var>paramName</var>
              <em>

                <!-- TYPE -->
                <div style="display:inline">
                  (
                    <span class="optional">optional</span>
                    <span id="typeTemplate">
                      <span>
                        <a> Type</a>
                      </span>
                      <span>
                        <span>
                          array of <span><span></span></span>
                        </span>
                        <span>paramType</span>
                      </span>
                    </span>
                  )
                </div>

              </em>
          </dt>
          <dd class="todo">
            Undocumented.
          </dd>
          <dd>
            Description of this parameter from the json schema.
          </dd>

          <!-- OBJECT PROPERTIES -->
          <dd>
            <dl>
              <div>
                <div>
                </div>
              </div>
            </dl>
          </dd>
        </div> <!-- /VALUE -->

      </div> <!-- /SUBTEMPLATES -->

  <a name="top"> </a>
    <!-- API HEADER -->
    <div id="pageHeader">
      <div id="searchbox">
        <form action="http://www.google.com/cse" id="cse-search-box">
          <div>
            <input type="hidden" name="cx" value="002967670403910741006:61_cvzfqtno">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="text" name="q" size="31">
            <input type="submit" name="sa" value="Search">
          </div>
        </form>

        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">google.load("elements", "1", {packages: "transliteration"});</script>
        <script type="text/javascript" src="http://www.google.com/coop/cse/t13n?form=cse-search-box&amp;t13n_langs=en"></script>
        <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
      </div>
      <div id="pageTitle">
        <h1>AutoUpdate</h1>
      </div>
    </div> <!-- /pageHeader -->

    <div id="pageContent">
      <!-- SIDENAV -->
      <div id="leftNav">
        <ul>
          <li> <a href="index.html">Home</a></li>
          <li> <a href="getstarted.html">Getting Started</a></li>
          <li> <a href="overview.html">Overview</a></li>
          <li> <a href="devguide.html"><div>Developer's Guide</div></a>
            <ul>
              <li> Browser UI
                <ul>
                  <li><a href="browserAction.html">Browser Actions</a></li>
                  <li><a href="options.html">Options Pages</a></li>
                  <li><a href="override.html">Override Pages</a></li>
                  <li><a href="pageAction.html">Page Actions</a></li>
                  <li><a href="themes.html">Themes</a></li>
                </ul>
              </li>
              <li> Browser Interaction
                <ul>
                  <li><a href="bookmarks.html">Bookmarks</a></li>
                  <li><a href="events.html">Events</a></li>
                  <li><a href="tabs.html">Tabs</a></li>
                  <li><a href="windows.html">Windows</a></li>
                </ul>
              </li>
              <li> Implementation
                <ul>
                  <li><a href="background_pages.html">Background Pages</a></li>
                  <li><a href="content_scripts.html">Content Scripts</a></li>
                  <li><a href="messaging.html">Message Passing</a></li>
                  <li><a href="xhr.html">Cross-Origin XHR</a></li>
                  <li><a href="npapi.html">NPAPI Plugins</a></li>
                </ul>
              </li>
              <li> Finishing
                <ul>
                  <li class="leftNavSelected">Autoupdating</li>
                  <li><a href="packaging.html">Packaging</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a href="tutorials.html"><div>Tutorials</div></a>
            <ul>
              <li><a href="tut_debugging.html">Debugging</a></li>
            </ul>
          </li>
          <li>Reference
            <ul>
              <li> Formats
                <ul>
                  <li><a href="manifest.html">Manifest Files</a></li>
                  <li><a href="match_patterns.html">Match Patterns</a></li>
                  <!-- <li>Packages (.crx)</li> -->
                </ul>
              </li>
              <li> <a href="api_index.html">chrome.* APIs</a> </li>
              <li> <a href="api_other.html">Other APIs</a> </li>
            </ul>
          </li>
         <li><a href="samples.html">Samples</a></li>
        </ul>
      </div>

      <div id="mainColumn">
        <!-- TABLE OF CONTENTS -->
        <div id="toc">
          <p>Contents</p>
          <ol>
            <li jsinstance="0">
              <a href="#H2-0">Introduction</a>
              <ol>
                <li jsinstance="*0" style="display: none; ">
                  <a>h3Name</a>
                </li>
              </ol>
            </li><li jsinstance="*1">
              <a href="#H2-1">Overview</a>
              <ol>
                <li jsinstance="0">
                  <a href="#H3-2">Update URL</a>
                </li><li jsinstance="1">
                  <a href="#H3-3">Update Manifest</a>
                </li><li jsinstance="2">
                  <a href="#H3-4">Testing</a>
                </li><li jsinstance="3">
                  <a href="#H3-5">Advanced Usage : Request Parameters</a>
                </li><li jsinstance="*4">
                  <a href="#H3-6">Advanced Usage : Minimum Browser Version</a>
                </li>
              </ol>
            </li>
            <div style="display: none; ">
              <li>
                <a href="#apiReference">API reference</a>
                <ol>
                  <li>
                    <a href="#properties">Properties</a>
                    <ol>
                      <li>
                        <a href="#property-anchor">propertyName</a>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <a href="#methods">Methods</a>
                    <ol>
                      <li>
                        <a href="#method-anchor">methodName</a>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <a href="#events">Events</a>
                    <ol>
                      <li>
                        <a href="#event-anchor">eventName</a>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <a href="#types">Types</a>
                    <ol>
                      <li>
                        <a href="#id-anchor">id</a>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </div>
          </ol>
        </div>
        <!-- /TABLE OF CONTENTS -->

        <!-- STATIC CONTENT PLACEHOLDER -->
        <div id="static"><div id="pageData-title" class="pageData">AutoUpdate</div>
<div id="pageData-showTOC" class="pageData">true</div>
<a name="H2-0"></a><h2>Introduction</h2>
<p>We want extensions to be autoupdated for some of the same reasons as chrome itself: to incorporate bug and security fixes, add new features or performance enhancements, and improve user interfaces.</p>

<p>For extensions packaged and distributed via the extensions gallery, developers will be able to use a web interface to release updated versions of their extensions and do not need to concern themselves with the rest of this document.</p>

<p>Those who choose to host extensions themselves instead of using the gallery will probably want to use autoupdate for their extensions as described below. You might want to make sure you are familiar with <a href="packaging.html">Packaging</a> first.</p>


<a name="H2-1"></a><h2>Overview</h2>
<ul><li>An extension manifest may contain an "update_url" for doing update checks.</li>
<li>The content returned by an update check is an "update manifest" xml document listing the latest version of an extension (or set of extensions, more on that later).</li></ul>

<p>Every few hours, the browser will check if any installed extensions have an autoupdate url. For each one, it will make a request to that url looking for an update manifest xml file. If the update manifest mentions a version of an extension that is more recent than what's installed, it will download and install the new version. Similar to manual updates, the new crx must be signed with the same private key as the currently installed version.</p>


<a name="H3-2"></a><h3>Update URL</h3>
<p>For those who are hosting their own extensions, you need to add the "update_url" key to your manifest.json file like this:</p>
<pre>{
  "name": "Test Extension",
  "version": "1.0",
  "description": "My test extension",
  <b>"update_url": "http://myhost.com/mytestextension/updates.xml"</b>,
  "toolstrips": ["mytoolstrip.html"]
}
</pre>

<a name="H3-3"></a><h3>Update Manifest</h3>
<p>The "update manifest" returned by the server&nbsp;should be an xml document that looks like this (parts you'll want to modify highlighted):</p>

<pre>&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'&gt;
  &lt;app appid='<b>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</b>'&gt;
   &nbsp;&lt;updatecheck&nbsp;codebase='<b>http://myhost.com/mytestextension/mte_v2.crx</b>'&nbsp;version='<b>2.0</b>' /&gt;
  &lt;/app&gt;
&lt;/gupdate&gt;
</pre>

<p>(This xml format is borrowed from that used by Omaha, Google's update infrastructure. See <a href="http://code.google.com/p/omaha/">http://code.google.com/p/omaha/</a> for more details.)</p>

<p><b>appid</b><br>
The 'appid' property is the extension id, generated based on a hash of the extension's public key as described in <a href="packaging.html">Packaging</a>. You can find out the id of your extension by going to chrome://extensions/ in a chrome browser where you have the extension installed.</p>

<p><b>codebase</b><br>
The 'codebase' property is a url to the crx file.</p>

<p><b>version</b><br>
This is used by the client to determine whether it should download the crx file at 'codebase'. It should match the version parameter in the crx file's manifest.json file.</p>
<p>The update manifest xml file may contain information about multiple extensions by including multiple <code>&lt;app&gt;</code> tags.</p>


<a name="H3-4"></a><h3>Testing</h3>
<p>The default update check frequency is several hours, which obviously makes testing challenging. To overcome this, you can use the --extensions-update-frequency command line flag to set a more frequent interval in seconds. For instance, to make checks run every 45 seconds, you would run chrome like this:</p>
<pre>chrome.exe <b>--extensions-update-frequency=45</b></pre>

<p>Note that this affects checks for all installed extensions, so consider the bandwidth and server load implications of this. You may want to temporarily uninstall all but the one extension you are testing with, and should not run with this option turned on during normal browser usage. In the future we may remove this command flag and replace it with a different mechanism to trigger update checks for testing (perhaps a button on the chrome://extensions page). Star the following issue to receive updates: <a href="http://crbug.com/17853" rel="nofollow">http://crbug.com/17853</a>.</p>

<p><b>Addendum:</b> the "Update now" button has been added, and will be present in dev channel builds soon (likely 4.0.207.x and above).</p>


<a name="H3-5"></a><h3>Advanced Usage : Request Parameters</h3>
<p>The basic autoupdate mechanism is designed to make the server-side work as easy as just dropping a static xml file onto any plain webserver such as apache, and updating that xml file as you release new versions of your extension(s).</p>
<p>More advanced developers may wish to take advantage of the fact that we add on parameters to the request for the update manifest to indicate the extension id and version. Then they can use the same update_url for all of their extensions pointing to a url running dynamic server side code instead of a static xml file.</p>
<p>The format of the request parameters is:</p>
<p><code>&nbsp;&nbsp;?x=&lt;extension_data&gt;</code></p>
<p>where <code>&lt;extension_data&gt;</code> is an url-encoded string of the format:</p>
<p><code>&nbsp;&nbsp;id=&lt;id&gt;&amp;v=&lt;version&gt;</code></p>

<p>So for example, say we have two extensions installed</p>
<p>&nbsp;&nbsp;Extension 1 with id "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" and version "1.1"<br>
&nbsp;&nbsp;Extension 2 with id "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb" and version "0.4"</p>

<p>and that both point at the same update_url: <code>http://test.com/extension_updates.php</code></p>

<p>The two requests made would be:</p>
<code>http://test.com/extension_updates.php?x=id%3Daaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa%26v%3D1.1</code>
<br>
<code>http://test.com/extension_updates.php?x=id%3Dbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb%26v%3D0.4</code>

<p><b>Note</b>: in releases before 3.0.196.x there was a bug in how request parameters were put together (<a href="http://crbug.com/17469" rel="nofollow">http://crbug.com/17469</a>).</p>

<h4>Future work for Request Parameters</h4>
<p>While not implemented yet, we will eventually list multiple extensions in a single request for each unique update_url. For the above example, the request would end up being:</p>
<p><code>http://test.com/extension_updates.php?x=id%3Daaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa%26v%3D1.1&amp;x=id%3Dbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb%26v%3D0.4</code></p>

<p>If the number of installed extensions using the same update_url is large enough that a GET request url would be too long (probably greater than 1024 characters or so), the update check will instead issue a POST with the request parameters in the POST body.</p>


<a name="H3-6"></a><h3>Advanced Usage : Minimum Browser Version</h3>
<p>As we add more API's to the extensions system, it's possible you will want to release an updated version of an extension that will only work with newer versions of the chrome browser. While chrome itself is autoupdated, it can take a few days before the majority of the userbase has updated to any given new release. To ensure that a given extension update will only apply to chrome version at or higher than a specific version, you would add the prodversionmin parameter to the <code>&lt;app&gt;</code> tag in your update manifest. For example:</p>

<pre>&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'&gt;
&nbsp;&nbsp;&lt;app appid='aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'&gt;
&nbsp;&nbsp; &nbsp;&lt;updatecheck&nbsp;codebase='http://myhost.com/mytestextension/mte_v2.crx'&nbsp;version='2.0' <b>prodversionmin='3.0.193.0'</b>/&gt;
&nbsp;&nbsp;&lt;/app&gt;
&lt;/gupdate&gt;
</pre>

<p>This would ensure that users of this extension would only autoupdate to version 2 if they are running chrome 3.0.193.0 or greater.</p>

</div>

        <!-- API PAGE -->
        <div class="apiPage" style="display: none; ">
        <a name="apiReference"></a>
        <h2>API reference: chrome.apiname </h2>

          <!-- PROPERTIES -->
          <div class="apiGroup">
            <a name="properties"></a>
            <h3 id="properties">Properties</h3>

            <div>
              <a></a>
              <h4>getLastError</h4>
              <div class="summary">
                <!-- Note: intentionally longer 80 columns -->
                <span>chrome.extension</span><span>lastError</span>
              </div>
              <div>
              </div>
            </div>

          </div> <!-- /apiGroup -->

          <!-- METHODS -->
          <div class="apiGroup" id="methods">
            <a name="methods"></a>
            <h3>Methods</h3>

            <!-- iterates over all functions -->
            <div class="apiItem">
              <a></a> <!-- method-anchor -->
              <h4>method name</h4>

              <div class="summary"><span>void</span>
                  <!-- Note: intentionally longer 80 columns -->
                  <span>chrome.module.methodName</span>(<span><span>, </span><span></span>
                      <var><span></span></var></span>)</div>

              <div class="description">
                <p class="todo">Undocumented.</p>
                <p>
                  A description from the json schema def of the function goes here.
                </p>

                <!-- PARAMETERS -->
                <h4>Parameters</h4>
                <dl>
                  <div>
                    <div>
                    </div>
                  </div>
                </dl>

                <!-- RETURNS -->
                <h4>Returns</h4>
                <dl>
                  <div>
                    <div>
                    </div>
                  </div>
                </dl>

                <!-- CALLBACK -->
                <div>
                  <div>
                  <h4>Callback function</h4>
                  <p>
                    If you specify the <em>callback</em> parameter,
                    it should specify a function that looks like this:
                  </p>

                  <!-- Note: intentionally longer 80 columns -->
                  <pre>function(<span>Type param1, Type param2</span>) <span class="subdued">{...}</span>);</pre>
                  <dl>
                    <div>
                      <div>
                      </div>
                    </div>
                  </dl>
                  </div>
                </div>

              </div> <!-- /description -->

            </div>  <!-- /apiItem -->

          </div>  <!-- /apiGroup -->

          <!-- EVENTS -->
          <div class="apiGroup">
            <a name="events"></a>
            <h3 id="events">Events</h3>

            <!-- iterates over all events -->
            <div class="apiItem">
              <a></a>
              <h4>event name</h4>

              <div class="summary">
                <!-- Note: intentionally longer 80 columns -->
                <span class="subdued">chrome.bookmarks</span><span>onEvent</span><span class="subdued">.addListener</span>(function(<span>Type param1, Type param2</span>) <span class="subdued">{...}</span>);
              </div>

              <div class="description">
                <p class="todo">Undocumented.</p>
                <p>
                  A description from the json schema def of the event goes here.
                </p>

                <!-- PARAMETERS -->
                <h4>Parameters</h4>
                <dl>
                  <div>
                    <div>
                    </div>
                  </div>
                </dl>

              </div> <!-- /decription -->

            </div> <!-- /apiItem -->

          </div> <!-- /apiGroup -->

          <!-- TYPES -->
          <div class="apiGroup">
            <a name="types.sort(sortByName)"></a>
            <h3 id="types">Types</h3>

            <!-- iterates over all types -->
            <div class="apiItem">
              <a></a>
              <h4>type name</h4>

              <div>
              </div>

            </div> <!-- /apiItem -->

          </div> <!-- /apiGroup -->

        </div> <!-- /apiPage -->
      </div> <!-- /mainColumn -->
    </div> <!-- /pageContent -->
    <div id="pageFooter" --="">
  <p>
  Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
  the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
  Attribution 3.0 License</a>, and code samples are licensed under the
  <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.
  </p>
  <p>
  Â©2009 Google
  </p>

<!-- begin analytics -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script src="http://www.google-analytics.com/ga.js" type="text/javascript"></script>

<script type="text/javascript">
  // chrome doc tracking
  try {
    var engdocs = _gat._getTracker("YT-10763712-2");
    engdocs._trackPageview();
  } catch(err) {}

  // code.google.com site-wide tracking
  try {
    _uacct="UA-18071-1";
    _uanchor=1;
    _uff=0;
    urchinTracker();
  }
  catch(e) {/* urchinTracker not available. */}
</script>
<!-- end analytics -->

    </div> <!-- /pageFooter -->
  </div> <!-- /container -->
</body></html>


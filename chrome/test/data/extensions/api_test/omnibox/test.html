<script>
if (!chrome.omnibox) {
  chrome.omnibox = chrome.experimental.omnibox;
}

chrome.omnibox.onInputChanged.addListener(
  function(text, suggest) {
    chrome.test.log("onInputChanged: " + text);
    if (text != "suggestio")
      return;

    var desc = 'Description with style: <match>, [dim], (url till end)';  
    suggest([
      {
        content: text + "n1",
        description: desc,
        descriptionStyles: [
          chrome.omnibox.styleMatch(desc.indexOf('<'), 6),
          chrome.omnibox.styleDim(desc.indexOf('['), 4),
          chrome.omnibox.styleUrl(desc.indexOf('(')),
        ]
      },
      {content: text + "n2", description: "description2"},
      {content: text + "n3", description: "description3"},
    ]);
  });

chrome.omnibox.onInputEntered.addListener(
  function(text) {
    chrome.test.assertEq("command", text);
    chrome.test.notifyPass();
  });

// Now we wait for the input events to fire.
chrome.test.notifyPass();
</script>

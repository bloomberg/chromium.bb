<title>Test whether a WebSocket connection triggers a SafeBrowsing interstitial</title>
<script>
// Construct the WebSocket URL from the page URL. The server should not be
// configured to accept a WebSocket handshake at this endpoint, or the "not
// blocked" test will fail. A 404 error is perfect.
const wsUrl = new URL('/safe_browsing/malware-ws', document.location.href);
wsUrl.protocol = 'ws';
const ws = new WebSocket(wsUrl.href);
// The "not blocked" test looks for this title change to verify that the request
// has not been blocked.
ws.onerror = () => { document.title = 'COMPLETED'; };
</script>

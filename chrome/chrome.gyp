# Copyright (c) 2009 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

{
  'variables': {
    'chromium_code': 1,

    # Define the common dependencies that contain all the actual
    # Chromium functionality.  This list gets pulled in below by
    # the link of the actual chrome (or chromium) executable on
    # Linux or Mac, and into chrome.dll on Windows.
    'chromium_dependencies': [
      'common',
      'browser',
      'debugger',
      'renderer',
      'syncapi',
      'utility',
      'worker',
      '../printing/printing.gyp:printing',
      '../webkit/webkit.gyp:inspector_resources',
    ],
    'grit_out_dir': '<(SHARED_INTERMEDIATE_DIR)/chrome',
    # TODO(mmoss) This might need to go somewhere more general, then we can use
    # it to also rewrite app/locales/locales.gyp with a helper script.
    'locales': [
      'ar', 'bg', 'bn', 'ca', 'cs', 'da', 'de', 'el', 'en-GB',
      'en-US', 'es-419', 'es', 'et', 'fi', 'fil', 'fr', 'gu', 'he',
      'hi', 'hr', 'hu', 'id', 'it', 'ja', 'kn', 'ko', 'lt', 'lv',
      'ml', 'mr', 'nb', 'nl', 'or', 'pl', 'pt-BR', 'pt-PT', 'ro',
      'ru', 'sk', 'sl', 'sr', 'sv', 'ta', 'te', 'th', 'tr',
      'uk', 'vi', 'zh-CN', 'zh-TW',
    ],
    'repack_locales_cmd': ['python', 'tools/build/repack_locales.py',],
    'browser_tests_sources': [
      'browser/browser_browsertest.cc',
      'browser/browser_init_browsertest.cc',
      'browser/crash_recovery_browsertest.cc',
      'browser/download/save_page_browsertest.cc',
      'browser/errorpage_browsertest.cc',
      'browser/ssl/ssl_browser_tests.cc',
    ],
    'browser_tests_sources_win_specific': [
      'browser/extensions/extension_apitest.cc',
      'browser/extensions/extension_apitest.h',
      'browser/extensions/extension_bookmarks_apitest.cc',
      'browser/extensions/extension_browsertest.cc',
      'browser/extensions/extension_browsertest.h',
      'browser/extensions/extension_browsertests_misc.cc',
      'browser/extensions/extension_shelf_model_unittest.cc',
      'browser/extensions/extension_startup_unittest.cc',
      'browser/views/browser_views_accessibility_browsertest.cc',
      'browser/views/find_bar_win_browsertest.cc',
      # TODO(jam): http://crbug.com/15101 These tests fail on Linux and Mac.
      'browser/child_process_security_policy_browser_test.cc',
      'browser/renderer_host/test/web_cache_manager_browsertest.cc',
      'browser/renderer_host/test/render_view_host_manager_browsertest.cc',
      # TODO(jcampan): once the task manager works on Mac, move this test to the
      #                non win specific section.
      'browser/task_manager_browsertest.cc',
    ],
    # TODO(jcampan): move these vars to views.gyp.
    'views_unit_tests_sources': [
      '../views/view_unittest.cc',
      '../views/focus/focus_manager_unittest.cc',
    ],
    'views_unit_tests_sources_win_specific': [
      # TODO(jcampan): make the following tests work on Linux.
      '../views/controls/label_unittest.cc',
      '../views/controls/table/table_view_unittest.cc',
      '../views/grid_layout_unittest.cc',
    ],
    'conditions': [
      ['OS=="mac"', {
        'conditions': [
          ['branding=="Chrome"', {
            'mac_bundle_id': 'com.google.Chrome',
            'mac_creator': 'rimZ',
          }, {  # else: branding!="Chrome"
            'mac_bundle_id': 'org.chromium.Chromium',
            'mac_creator': 'Cr24',
          }],  # branding
        ],  # conditions
      }],  # OS=="mac"
      ['OS=="win"', {
        # Whether or not browser sync code is built in.
        'chrome_personalization%': 1,

        # Used to build a stub (no-op) syncapi engine.
        'conditions': [
          ['branding=="Chrome"', {
            'use_syncapi_stub%': 0,
          }, {
            'use_syncapi_stub%': 1,
          }],
        ],
      }, {
        'chrome_personalization%': 0,
        'use_syncapi_stub%': 1,
      }],
    ],  # conditions
  },  # variables
  'includes': [
    '../build/common.gypi',
  ],
  'target_defaults': {
    'sources/': [
      ['exclude', '/(cocoa|gtk|win)/'],
      ['exclude', '_(cocoa|gtk|linux|mac|posix|skia|win|views|x)(_unittest)?\\.(cc|mm?)$'],
      ['exclude', '/(gtk|win|x11)_[^/]*\\.cc$'],
    ],
    'conditions': [
      ['OS=="linux"', {'sources/': [
        ['include', '/gtk/'],
        ['include', '_(gtk|linux|posix|skia|x)(_unittest)?\\.cc$'],
        ['include', '/(gtk|x11)_[^/]*\\.cc$'],
      ]}],
      ['OS=="mac"', {'sources/': [
        ['include', '/cocoa/'],
        ['include', '_(cocoa|mac|posix)(_unittest)?\\.(cc|mm?)$'],
      ]}, { # else: OS != "mac"
        'sources/': [
          ['exclude', '\\.mm?$'],
        ],
      }],
      ['OS=="win"', {'sources/': [
        ['include', '_(views|win)(_unittest)?\\.cc$'],
        ['include', '/win/'],
        ['include', '/(views|win)_[^/]*\\.cc$'],
      ]}],
      ['OS=="linux" and toolkit_views==1', {'sources/': [
        ['include', '_views\\.cc$'],
      ]}],
      ['OS=="win" and chrome_personalization==1', {
         'defines': ['CHROME_PERSONALIZATION=1'],
      }],  # chrome_personalization==1
    ],
  },
  'targets': [
    {
      # TODO(mark): It would be better if each static library that needed
      # to run grit would list its own .grd files, but unfortunately some
      # of the static libraries currently have circular dependencies among
      # generated headers.
      'target_name': 'chrome_resources',
      'type': 'none',
      'msvs_guid': 'B95AB527-F7DB-41E9-AD91-EB51EE0F56BE',
      'rules': [
        {
          'rule_name': 'grit',
          'extension': 'grd',
          'variables': {
            'conditions': [
              ['branding=="Chrome"', {
                # TODO(mmoss) The .grd files look for _google_chrome, but for
                # consistency they should look for GOOGLE_CHROME_BUILD like C++.
                # Clean this up when Windows moves to gyp.
                'chrome_build': '_google_chrome',
                'branded_env': 'CHROMIUM_BUILD=google_chrome',
              }, {  # else: branding!="Chrome"
                'chrome_build': '_chromium',
                'branded_env': 'CHROMIUM_BUILD=chromium',
              }],
            ],
          },
          'inputs': [
            '../tools/grit/grit.py',
          ],
          'outputs': [
            '<(grit_out_dir)/grit/<(RULE_INPUT_ROOT).h',
            '<(grit_out_dir)/<(RULE_INPUT_ROOT).pak',
          ],
          'action': ['python', '<@(_inputs)', '-i', '<(RULE_INPUT_PATH)',
            'build', '-o', '<(grit_out_dir)',
            '-D', '<(chrome_build)',
            '-E', '<(branded_env)',
          ],
          'message': 'Generating resources from <(RULE_INPUT_PATH)',
        },
      ],
      'sources': [
        # Data resources.
        'browser/browser_resources.grd',
        'common/common_resources.grd',
        'renderer/renderer_resources.grd',
      ],
      'direct_dependent_settings': {
        'include_dirs': [
          '<(grit_out_dir)',
        ],
      },
      'conditions': [
        ['OS=="win"', {
          'dependencies': ['../build/win/system.gyp:cygwin'],
        }],
      ],
    },
    {
      # TODO(mark): It would be better if each static library that needed
      # to run grit would list its own .grd files, but unfortunately some
      # of the static libraries currently have circular dependencies among
      # generated headers.
      'target_name': 'chrome_strings',
      'msvs_guid': 'D9DDAF60-663F-49CC-90DC-3D08CC3D1B28',
      'conditions': [
        ['OS=="win"', {
          # HACK(nsylvain): We want to enforce a fake dependency on
          # intaller_util_string.  install_util depends on both
          # chrome_strings and installer_util_strings, but for some reasons
          # Incredibuild does not enforce it (most likely a bug). By changing
          # the type and making sure we depend on installer_util_strings, it
          # will always get built before installer_util.
          'type': 'dummy_executable',
          'dependencies': ['../build/win/system.gyp:cygwin',
                           'installer/installer.gyp:installer_util_strings',],
        }, {
          'type': 'none',
        }],
      ],
      'rules': [
        {
          'rule_name': 'grit',
          'extension': 'grd',
          'variables': {
            'conditions': [
              ['branding=="Chrome"', {
                # TODO(mmoss) The .grd files look for _google_chrome, but for
                # consistency they should look for GOOGLE_CHROME_BUILD like C++.
                # Clean this up when Windows moves to gyp.
                'chrome_build': '_google_chrome',
              }, {  # else: branding!="Chrome"
                'chrome_build': '_chromium',
              }],
            ],
          },
          'inputs': [
            '../tools/grit/grit.py',
          ],
          'outputs': [
            '<(grit_out_dir)/grit/<(RULE_INPUT_ROOT).h',
            # TODO(mmoss) Generate this list from a helper script, like
            # repack_locales_cmd.
            '<(grit_out_dir)/<(RULE_INPUT_ROOT)_da.pak',
            '<(grit_out_dir)/<(RULE_INPUT_ROOT)_en-US.pak',
            '<(grit_out_dir)/<(RULE_INPUT_ROOT)_he.pak',
            '<(grit_out_dir)/<(RULE_INPUT_ROOT)_zh-TW.pak',
          ],
          'action': ['python', '<@(_inputs)', '-i', '<(RULE_INPUT_PATH)',
            'build', '-o', '<(grit_out_dir)',
            '-D', '<(chrome_build)'],
          'message': 'Generating resources from <(RULE_INPUT_PATH)',
        },
      ],
      'sources': [
        # Localizable resources.
        'app/resources/locale_settings.grd',
        'app/chromium_strings.grd',
        'app/generated_resources.grd',
        'app/google_chrome_strings.grd',
      ],
      'direct_dependent_settings': {
        'include_dirs': [
          '<(grit_out_dir)',
        ],
      },
    },
    {
      # theme_resources also generates a .cc file, so it can't use the rules above.
      'target_name': 'theme_resources',
      'type': 'none',
      'msvs_guid' : 'A158FB0A-25E4-6523-6B5A-4BB294B73D31',
      'variables': {
        'grit_path': '../tools/grit/grit.py',
      },
      'actions': [
        {
          'action_name': 'theme_resources',
          'variables': {
            'input_path': 'app/theme/theme_resources.grd',
            'conditions': [
              ['branding=="Chrome"', {
                # TODO(mmoss) The .grd files look for _google_chrome, but for
                # consistency they should look for GOOGLE_CHROME_BUILD like C++.
                # Clean this up when Windows moves to gyp.
                'chrome_build': '_google_chrome',
              }, {  # else: branding!="Chrome"
                'chrome_build': '_chromium',
              }],
            ],
          },
          'inputs': [
            '<(input_path)',
          ],
          'outputs': [
            '<(grit_out_dir)/grit/theme_resources.h',
            '<(grit_out_dir)/grit/theme_resources_map.cc',
            '<(grit_out_dir)/grit/theme_resources_map.h',
            '<(grit_out_dir)/theme_resources.pak',
            '<(grit_out_dir)/theme_resources.rc',
          ],
          'action': [
            'python', '<(grit_path)',
            '-i', '<(input_path)', 'build',
            '-o', '<(grit_out_dir)',
            '-D', '<(chrome_build)'
          ],
          'conditions': [
            ['chromeos==1', {
              'action': ['-D', 'chromeos'],
            }],
          ],
          'message': 'Generating resources from <(input_path)',
        },
      ],
      'direct_dependent_settings': {
        'include_dirs': [
          '<(grit_out_dir)',
        ],
      },
      'conditions': [
        ['OS=="win"', {
          'dependencies': ['../build/win/system.gyp:cygwin'],
        }],
      ],
    },
    {
      'target_name': 'default_extensions',
      'type': 'none',
      'msvs_guid': 'DA9BAB64-91DC-419B-AFDE-6FF8C569E83A',
      'conditions': [
        ['OS=="win"', {
          'copies': [
            {
              'destination': '<(PRODUCT_DIR)/extensions',
              'files': [
                'browser/extensions/default_extensions/external_extensions.json'
              ]
            }
          ],
        }],
      ],
    },
    {
      'target_name': 'common',
      'type': '<(library)',
      'msvs_guid': '899F1280-3441-4D1F-BA04-CCD6208D9146',
      'dependencies': [
        'chrome_resources',
        'chrome_strings',
        'theme_resources',
        '../app/app.gyp:app_base',
        '../base/base.gyp:base',
        '../base/base.gyp:base_gfx',
        '../build/temp_gyp/googleurl.gyp:googleurl',
        '../ipc/ipc.gyp:ipc',
        '../net/net.gyp:net',
        '../skia/skia.gyp:skia',
        '../third_party/icu38/icu38.gyp:icui18n',
        '../third_party/icu38/icu38.gyp:icuuc',
        '../third_party/libxml/libxml.gyp:libxml',
        '../third_party/sqlite/sqlite.gyp:sqlite',
        '../third_party/zlib/zlib.gyp:zlib',
        '../third_party/npapi/npapi.gyp:npapi',
        '../webkit/webkit.gyp:glue',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        # All .cc, .h, and .mm files under chrome/common except for tests.
        'common/extensions/extension.cc',
        'common/extensions/extension.h',
        'common/extensions/extension_constants.cc',
        'common/extensions/extension_constants.h',
        'common/extensions/extension_error_reporter.cc',
        'common/extensions/extension_error_reporter.h',
        'common/extensions/extension_error_utils.cc',
        'common/extensions/extension_error_utils.h',
        'common/extensions/extension_unpacker.cc',
        'common/extensions/extension_unpacker.h',
        'common/extensions/update_manifest.cc',
        'common/extensions/update_manifest.h',
        'common/extensions/url_pattern.cc',
        'common/extensions/url_pattern.h',
        'common/extensions/user_script.cc',
        'common/extensions/user_script.h',
        'common/gfx/utils.h',
        'common/net/cookie_monster_sqlite.cc',
        'common/net/cookie_monster_sqlite.h',
        'common/net/dns.h',
        'common/net/url_request_intercept_job.cc',
        'common/net/url_request_intercept_job.h',
        'common/web_resource/web_resource_unpacker.cc',
        'common/web_resource/web_resource_unpacker.h',
        'common/app_cache/app_cache_context_impl.cc',
        'common/app_cache/app_cache_context_impl.h',
        'common/app_cache/app_cache_dispatcher.cc',
        'common/app_cache/app_cache_dispatcher.h',
        'common/app_cache/app_cache_dispatcher_host.cc',
        'common/app_cache/app_cache_dispatcher_host.h',
        'common/automation_constants.cc',
        'common/automation_constants.h',
        'common/bindings_policy.h',
        'common/child_process.cc',
        'common/child_process.h',
        'common/child_process_host.cc',
        'common/child_process_host.h',
        'common/child_process_info.cc',
        'common/child_process_info.h',
        'common/child_process_logging.h',
        'common/child_process_logging_linux.cc',
        'common/child_process_logging_mac.mm',
        'common/child_process_logging_win.cc',
        'common/child_thread.cc',
        'common/child_thread.h',
        'common/chrome_constants.cc',
        'common/chrome_constants.h',
        'common/chrome_counters.cc',
        'common/chrome_counters.h',
        'common/chrome_descriptors.h',
        'common/chrome_paths.cc',
        'common/chrome_paths.h',
        'common/chrome_paths_internal.h',
        'common/chrome_paths_linux.cc',
        'common/chrome_paths_mac.mm',
        'common/chrome_paths_win.cc',
        'common/chrome_plugin_api.h',
        'common/chrome_plugin_lib.cc',
        'common/chrome_plugin_lib.h',
        'common/chrome_plugin_util.cc',
        'common/chrome_plugin_util.h',
        'common/chrome_switches.cc',
        'common/chrome_switches.h',
        'common/classfactory.cc',
        'common/classfactory.h',
        'common/common_glue.cc',
        'common/common_param_traits.cc',
        'common/common_param_traits.h',
        'common/css_colors.h',
        'common/db_message_filter.cc',
        'common/db_message_filter.h',
        'common/debug_flags.cc',
        'common/debug_flags.h',
        'common/devtools_messages.h',
        'common/devtools_messages_internal.h',
        'common/env_vars.cc',
        'common/env_vars.h',
        'common/filter_policy.h',
        'common/gears_api.h',
        'common/gtk_tree.cc',
        'common/gtk_tree.h',
        'common/gtk_util.cc',
        'common/gtk_util.h',
        'common/histogram_synchronizer.cc',
        'common/histogram_synchronizer.h',
        'common/important_file_writer.cc',
        'common/important_file_writer.h',
        'common/json_value_serializer.cc',
        'common/json_value_serializer.h',
        'common/jstemplate_builder.cc',
        'common/jstemplate_builder.h',
        'common/libxml_utils.cc',
        'common/libxml_utils.h',
        'common/logging_chrome.cc',
        'common/logging_chrome.h',
        'common/main_function_params.h',
        'common/message_router.cc',
        'common/message_router.h',
        'common/modal_dialog_event.h',
        'common/mru_cache.h',
        'common/navigation_types.h',
        'common/native_web_keyboard_event.h',
        'common/native_web_keyboard_event_linux.cc',
        'common/native_web_keyboard_event_mac.mm',
        'common/native_web_keyboard_event_win.cc',
        'common/native_window_notification_source.h',
        'common/notification_details.h',
        'common/notification_observer.h',
        'common/notification_registrar.cc',
        'common/notification_registrar.h',
        'common/notification_service.cc',
        'common/notification_service.h',
        'common/notification_source.h',
        'common/notification_type.h',
        'common/owned_widget_gtk.cc',
        'common/owned_widget_gtk.h',
        'common/page_action.h',
        'common/page_action.cc',
        'common/page_transition_types.h',
        'common/page_zoom.h',
        'common/platform_util.h',
        'common/platform_util_linux.cc',
        'common/platform_util_mac.mm',
        'common/platform_util_win.cc',
        'common/plugin_carbon_interpose_constants_mac.h',
        'common/plugin_carbon_interpose_constants_mac.cc',
        'common/plugin_messages.h',
        'common/plugin_messages_internal.h',
        'common/pref_member.cc',
        'common/pref_member.h',
        'common/pref_names.cc',
        'common/pref_names.h',
        'common/pref_service.cc',
        'common/pref_service.h',
        'common/process_watcher_posix.cc',
        'common/process_watcher_win.cc',
        'common/process_watcher.h',
        'common/property_bag.cc',
        'common/property_bag.h',
        'common/quarantine_mac.h',
        'common/quarantine_mac.mm',
        'common/ref_counted_util.h',
        'common/render_messages.h',
        'common/render_messages_internal.h',
        'common/renderer_preferences.h',
        'common/resource_dispatcher.cc',
        'common/resource_dispatcher.h',
        'common/result_codes.h',
        'common/sandbox_init_wrapper.cc',
        'common/sandbox_init_wrapper.h',
        'common/security_filter_peer.cc',
        'common/security_filter_peer.h',
        'common/sqlite_compiled_statement.cc',
        'common/sqlite_compiled_statement.h',
        'common/sqlite_utils.cc',
        'common/sqlite_utils.h',
        'common/task_queue.cc',
        'common/task_queue.h',
        'common/temp_scaffolding_stubs.cc',
        'common/temp_scaffolding_stubs.h',
        'common/thumbnail_score.cc',
        'common/thumbnail_score.h',
        'common/time_format.cc',
        'common/time_format.h',
        'common/transport_dib.h',
        'common/transport_dib_linux.cc',
        'common/transport_dib_mac.cc',
        'common/transport_dib_win.cc',
        'common/url_constants.cc',
        'common/url_constants.h',
        'common/view_types.h',
        'common/visitedlink_common.cc',
        'common/visitedlink_common.h',
        'common/webkit_param_traits.h',
        'common/webmessageportchannel_impl.cc',
        'common/webmessageportchannel_impl.h',
        'common/win_safe_util.cc',
        'common/win_safe_util.h',
        'common/worker_messages.h',
        'common/worker_messages_internal.h',
        'common/worker_thread_ticker.cc',
        'common/worker_thread_ticker.h',
        'common/x11_util.cc',
        'common/x11_util.h',
        'common/x11_util_internal.h',
        'common/zip.cc',  # Requires zlib directly.
        'common/zip.h',
        'third_party/xdg_user_dirs/xdg_user_dir_lookup.cc',

        'tools/build/win/precompiled.cc',
        'tools/build/win/precompiled.h',
      ],
      'direct_dependent_settings': {
        'include_dirs': [
          '..',
        ],
      },
      'export_dependent_settings': [
        '../app/app.gyp:app_base',
      ],
      'configurations': {
        'Debug': {
          'msvs_precompiled_header': 'tools/build/win/precompiled.h',
          'msvs_precompiled_source': 'tools/build/win/precompiled.cc',
        },
      },
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
          'export_dependent_settings': [
            '../third_party/sqlite/sqlite.gyp:sqlite',
          ],
          'link_settings': {
            'libraries': [
              '-lX11',
              '-lXrender',
              '-lXext',
            ],
          },
        }, { # else: 'OS!="linux"'
          'sources!': [
            'third_party/xdg_user_dirs/xdg_user_dir_lookup.cc',
          ],
        }],
        ['OS=="win"', {
          'include_dirs': [
            'third_party/wtl/include',
          ],
          'sources!': [
            'common/temp_scaffolding_stubs.cc',
            'common/temp_scaffolding_stubs.h',
          ],
        }, { # else: OS != "win"
          'sources!': [
            'common/classfactory.cc',
          ],
        }],
      ],
    },
    {
      'target_name': 'browser',
      'type': '<(library)',
      'msvs_guid': '5BF908A7-68FB-4A4B-99E3-8C749F1FE4EA',
      'dependencies': [
        'common',
        'chrome_resources',
        'chrome_strings',
        'theme_resources',
        '../app/app.gyp:app_resources',
        '../app/app.gyp:app_strings',
        '../media/media.gyp:media',
        '../net/net.gyp:net_resources',
        '../printing/printing.gyp:printing',
        '../skia/skia.gyp:skia',
        '../third_party/bzip2/bzip2.gyp:bzip2',
        '../third_party/icu38/icu38.gyp:icui18n',
        '../third_party/icu38/icu38.gyp:icuuc',
        '../third_party/libxml/libxml.gyp:libxml',
        '../third_party/npapi/npapi.gyp:npapi',
        'third_party/hunspell/hunspell.gyp:hunspell',
        '../webkit/webkit.gyp:glue',
      ],
      'include_dirs': [
        '..',
        '<(INTERMEDIATE_DIR)',
      ],
      'sources': [
        # All .cc, .h, .m, and .mm files under browser except for tests and
        # mocks.
        'browser/alternate_nav_url_fetcher.cc',
        'browser/alternate_nav_url_fetcher.h',
        'browser/app_controller_mac.h',
        'browser/app_controller_mac.mm',
        'browser/app_modal_dialog.cc',
        'browser/app_modal_dialog.h',
        'browser/app_modal_dialog_gtk.cc',
        'browser/app_modal_dialog_mac.mm',
        'browser/app_modal_dialog_win.cc',
        'browser/app_modal_dialog_queue.cc',
        'browser/app_modal_dialog_queue.h',
        'browser/autocomplete/autocomplete.cc',
        'browser/autocomplete/autocomplete.h',
        'browser/autocomplete/autocomplete_accessibility.cc',
        'browser/autocomplete/autocomplete_accessibility.h',
        'browser/autocomplete/autocomplete_edit.cc',
        'browser/autocomplete/autocomplete_edit.h',
        'browser/autocomplete/autocomplete_edit_view.h',
        'browser/autocomplete/autocomplete_edit_view_gtk.cc',
        'browser/autocomplete/autocomplete_edit_view_gtk.h',
        'browser/autocomplete/autocomplete_edit_view_mac.h',
        'browser/autocomplete/autocomplete_edit_view_mac.mm',
        'browser/autocomplete/autocomplete_edit_view_win.cc',
        'browser/autocomplete/autocomplete_edit_view_win.h',
        'browser/autocomplete/autocomplete_popup_model.cc',
        'browser/autocomplete/autocomplete_popup_model.h',
        'browser/autocomplete/autocomplete_popup_view.h',
        'browser/autocomplete/autocomplete_popup_view_gtk.cc',
        'browser/autocomplete/autocomplete_popup_view_gtk.h',
        'browser/autocomplete/autocomplete_popup_view_mac.h',
        'browser/autocomplete/autocomplete_popup_view_mac.mm',
        'browser/autocomplete/history_contents_provider.cc',
        'browser/autocomplete/history_contents_provider.h',
        'browser/autocomplete/history_url_provider.cc',
        'browser/autocomplete/history_url_provider.h',
        'browser/autocomplete/keyword_provider.cc',
        'browser/autocomplete/keyword_provider.h',
        'browser/autocomplete/search_provider.cc',
        'browser/autocomplete/search_provider.h',
        'browser/autofill_manager.cc',
        'browser/autofill_manager.h',
        'browser/automation/automation_autocomplete_edit_tracker.h',
        'browser/automation/automation_browser_tracker.h',
        'browser/automation/extension_automation_constants.h',
        'browser/automation/extension_automation_constants.cc',
        'browser/automation/automation_extension_function.h',
        'browser/automation/automation_extension_function.cc',
        'browser/automation/automation_profile_impl.cc',
        'browser/automation/automation_profile_impl.h',
        'browser/automation/automation_provider.cc',
        'browser/automation/automation_provider.h',
        'browser/automation/automation_provider_list.cc',
        'browser/automation/automation_provider_list_generic.cc',
        'browser/automation/automation_provider_list_mac.mm',
        'browser/automation/automation_provider_list.h',
        'browser/automation/automation_resource_message_filter.cc',
        'browser/automation/automation_resource_message_filter.h',
        'browser/automation/automation_resource_tracker.cc',
        'browser/automation/automation_resource_tracker.h',
        'browser/automation/automation_tab_tracker.h',
        'browser/automation/url_request_automation_job.cc',
        'browser/automation/url_request_automation_job.h',
        'browser/automation/automation_window_tracker.h',
        'browser/automation/extension_port_container.cc',
        'browser/automation/extension_port_container.h',
        'browser/automation/ui_controls_linux.cc',
        'browser/automation/ui_controls_win.cc',
        'browser/automation/ui_controls.h',
        'browser/back_forward_menu_model.cc',
        'browser/back_forward_menu_model.h',
        'browser/back_forward_menu_model_views.cc',
        'browser/back_forward_menu_model_views.h',
        'browser/blocked_popup_container.cc',
        'browser/blocked_popup_container.h',
        'browser/bookmarks/bookmark_codec.cc',
        'browser/bookmarks/bookmark_codec.h',
        'browser/bookmarks/bookmark_context_menu_controller.cc',
        'browser/bookmarks/bookmark_context_menu_controller.h',
        'browser/bookmarks/bookmark_drag_data.cc',
        'browser/bookmarks/bookmark_drag_data.h',
        'browser/bookmarks/bookmark_drop_info.cc',
        'browser/bookmarks/bookmark_drop_info.h',
        'browser/bookmarks/bookmark_editor.h',
        'browser/bookmarks/bookmark_folder_tree_model.cc',
        'browser/bookmarks/bookmark_folder_tree_model.h',
        'browser/bookmarks/bookmark_index.cc',
        'browser/bookmarks/bookmark_index.h',
        'browser/bookmarks/bookmark_html_writer.cc',
        'browser/bookmarks/bookmark_html_writer.h',
        'browser/bookmarks/bookmark_manager.h',
        'browser/bookmarks/bookmark_model.cc',
        'browser/bookmarks/bookmark_model.h',
        'browser/bookmarks/bookmark_service.h',
        'browser/bookmarks/bookmark_storage.cc',
        'browser/bookmarks/bookmark_storage.h',
        'browser/bookmarks/bookmark_table_model.cc',
        'browser/bookmarks/bookmark_table_model.h',
        'browser/bookmarks/bookmark_utils.cc',
        'browser/bookmarks/bookmark_utils.h',
        'browser/browser.cc',
        'browser/browser.h',
        'browser/browser_about_handler.cc',
        'browser/browser_about_handler.h',
        'browser/browser_accessibility.cc',
        'browser/browser_accessibility.h',
        'browser/browser_accessibility_manager.cc',
        'browser/browser_accessibility_manager.h',
        'browser/browser_init.cc',
        'browser/browser_init.h',
        'browser/browser_list.cc',
        'browser/browser_list.h',
        'browser/browser_main.cc',
        'browser/browser_main_gtk.cc',
        'browser/browser_main_mac.mm',
        'browser/browser_main_win.cc',
        'browser/browser_main_win.h',
        'browser/browser_prefs.cc',
        'browser/browser_prefs.h',
        'browser/browser_process.cc',
        'browser/browser_process.h',
        'browser/browser_process_impl.cc',
        'browser/browser_process_impl.h',
        'browser/browser_shutdown.cc',
        'browser/browser_shutdown.h',
        'browser/browser_theme_provider_gtk.cc',
        'browser/browser_theme_provider_mac.mm',
        'browser/browser_theme_provider.cc',
        'browser/browser_theme_provider.h',
        'browser/browser_trial.cc',
        'browser/browser_trial.h',
        'browser/browser_url_handler.cc',
        'browser/browser_url_handler.h',
        'browser/browser_window.h',
        'browser/browsing_data_remover.cc',
        'browser/browsing_data_remover.h',
        'browser/browsing_instance.cc',
        'browser/browsing_instance.h',
        'browser/cancelable_request.cc',
        'browser/cancelable_request.h',
        'browser/cert_store.cc',
        'browser/cert_store.h',
        'browser/character_encoding.cc',
        'browser/character_encoding.h',
        'browser/child_process_security_policy.cc',
        'browser/child_process_security_policy.h',
        'browser/chrome_plugin_browsing_context.cc',
        'browser/chrome_plugin_browsing_context.h',
        'browser/chrome_plugin_host.cc',
        'browser/chrome_plugin_host.h',
        'browser/chrome_thread.cc',
        'browser/chrome_thread.h',
        'browser/cocoa/about_window_controller.h',
        'browser/cocoa/about_window_controller.mm',
        'browser/cocoa/autocomplete_text_field.h',
        'browser/cocoa/autocomplete_text_field.mm',
        'browser/cocoa/autocomplete_text_field_cell.h',
        'browser/cocoa/autocomplete_text_field_cell.mm',
        'browser/cocoa/autocomplete_text_field_editor.h',
        'browser/cocoa/autocomplete_text_field_editor.mm',
        'browser/cocoa/autoseparating_menu.h',
        'browser/cocoa/autoseparating_menu.m',
        'browser/cocoa/back_forward_menu_controller.h',
        'browser/cocoa/back_forward_menu_controller.mm',
        'browser/cocoa/background_gradient_view.h',
        'browser/cocoa/background_gradient_view.mm',
        'browser/cocoa/base_view.h',
        'browser/cocoa/base_view.mm',
        'browser/cocoa/browser_window_factory.mm',
        'browser/cocoa/blocked_popup_container_controller.h',
        'browser/cocoa/blocked_popup_container_controller.mm',
        'browser/cocoa/bookmark_bar_bridge.h',
        'browser/cocoa/bookmark_bar_bridge.mm',
        'browser/cocoa/bookmark_bar_controller.h',
        'browser/cocoa/bookmark_bar_controller.mm',
        'browser/cocoa/bookmark_bar_view.h',
        'browser/cocoa/bookmark_bar_view.mm',
        'browser/cocoa/bookmark_button_cell.h',
        'browser/cocoa/bookmark_button_cell.mm',
        'browser/cocoa/bookmark_editor_controller.h',
        'browser/cocoa/bookmark_editor_controller.mm',
        'browser/cocoa/bookmark_menu_bridge.h',
        'browser/cocoa/bookmark_menu_bridge.mm',
        'browser/cocoa/bookmark_menu_cocoa_controller.h',
        'browser/cocoa/bookmark_menu_cocoa_controller.mm',
        'browser/cocoa/bookmark_name_folder_controller.h',
        'browser/cocoa/bookmark_name_folder_controller.mm',
        'browser/cocoa/browser_test_helper.h',
        'browser/cocoa/browser_window.h',
        'browser/cocoa/browser_window.mm',
        'browser/cocoa/browser_window_cocoa.h',
        'browser/cocoa/browser_window_cocoa.mm',
        'browser/cocoa/browser_window_controller.h',
        'browser/cocoa/browser_window_controller.mm',
        'browser/cocoa/clear_browsing_data_controller.h',
        'browser/cocoa/clear_browsing_data_controller.mm',
        'browser/cocoa/clickhold_button_cell.h',
        'browser/cocoa/clickhold_button_cell.mm',
        'browser/cocoa/cocoa_test_helper.h',
        'browser/cocoa/command_observer_bridge.h',
        'browser/cocoa/command_observer_bridge.mm',
        'browser/cocoa/constrained_window_mac.h',
        'browser/cocoa/constrained_window_mac.mm',
        'browser/cocoa/custom_home_pages_model.h',
        'browser/cocoa/custom_home_pages_model.mm',
        'browser/cocoa/delayedmenu_button.h',
        'browser/cocoa/delayedmenu_button.mm',
        'browser/cocoa/download_item_cell.h',
        'browser/cocoa/download_item_cell.mm',
        'browser/cocoa/download_item_controller.h',
        'browser/cocoa/download_item_controller.mm',
        'browser/cocoa/download_item_mac.h',
        'browser/cocoa/download_item_mac.mm',
        'browser/cocoa/download_request_dialog_delegate_mac.h',
        'browser/cocoa/download_request_dialog_delegate_mac.mm',
        'browser/cocoa/download_shelf_controller.h',
        'browser/cocoa/download_shelf_controller.mm',
        'browser/cocoa/download_shelf_mac.h',
        'browser/cocoa/download_shelf_mac.mm',
        'browser/cocoa/download_shelf_view.h',
        'browser/cocoa/download_shelf_view.mm',
        'browser/cocoa/download_started_animation_mac.mm',
        'browser/cocoa/download_util_mac.h',
        'browser/cocoa/download_util_mac.mm',
        'browser/cocoa/encoding_menu_controller_delegate_mac.h',
        'browser/cocoa/encoding_menu_controller_delegate_mac.mm',
        'browser/cocoa/event_utils.h',
        'browser/cocoa/event_utils.mm',
        'browser/cocoa/find_bar_bridge.h',
        'browser/cocoa/find_bar_bridge.mm',
        'browser/cocoa/find_bar_cocoa_controller.h',
        'browser/cocoa/find_bar_cocoa_controller.mm',
        'browser/cocoa/find_bar_view.h',
        'browser/cocoa/find_bar_view.mm',
        'browser/cocoa/first_run_dialog.h',
        'browser/cocoa/first_run_dialog.mm',
        'browser/cocoa/fullscreen_window.h',
        'browser/cocoa/fullscreen_window.mm',
        'browser/cocoa/gradient_button_cell.h',
        'browser/cocoa/gradient_button_cell.mm',
        'browser/cocoa/history_menu_bridge.h',
        'browser/cocoa/history_menu_bridge.mm',
        'browser/cocoa/history_menu_cocoa_controller.h',
        'browser/cocoa/history_menu_cocoa_controller.mm',
        'browser/cocoa/hung_renderer_controller.h',
        'browser/cocoa/hung_renderer_controller.mm',
        'browser/cocoa/import_progress_dialog.h',
        'browser/cocoa/import_progress_dialog.mm',
        'browser/cocoa/infobar.h',
        'browser/cocoa/infobar_container_controller.h',
        'browser/cocoa/infobar_container_controller.mm',
        'browser/cocoa/infobar_controller.h',
        'browser/cocoa/infobar_controller.mm',
        'browser/cocoa/infobar_gradient_view.h',
        'browser/cocoa/infobar_gradient_view.mm',
        'browser/cocoa/infobar_test_helper.h',
        'browser/cocoa/infobar_text_field.h',
        'browser/cocoa/infobar_text_field.mm',
        'browser/cocoa/location_bar_view_mac.h',
        'browser/cocoa/location_bar_view_mac.mm',
        'browser/cocoa/nsimage_cache.h',
        'browser/cocoa/nsimage_cache.mm',
        'browser/cocoa/page_info_window_controller.h',
        'browser/cocoa/page_info_window_controller.mm',
        'browser/cocoa/page_info_window_mac.h',
        'browser/cocoa/page_info_window_mac.mm',
        'browser/cocoa/preferences_localizer.h',
        'browser/cocoa/preferences_localizer.mm',
        'browser/cocoa/preferences_window_controller.h',
        'browser/cocoa/preferences_window_controller.mm',
        'browser/cocoa/rwhvm_editcommand_helper.h',
        'browser/cocoa/rwhvm_editcommand_helper.mm',
        'browser/cocoa/sad_tab_view.h',
        'browser/cocoa/sad_tab_view.mm',
        'browser/cocoa/search_engine_list_model.h',
        'browser/cocoa/search_engine_list_model.mm',
        'browser/cocoa/shell_dialogs_mac.mm',
        'browser/cocoa/status_bubble_mac.h',
        'browser/cocoa/status_bubble_mac.mm',
        'browser/cocoa/tab_cell.h',
        'browser/cocoa/tab_cell.mm',
        'browser/cocoa/tab_contents_controller.h',
        'browser/cocoa/tab_contents_controller.mm',
        'browser/cocoa/tab_controller.h',
        'browser/cocoa/tab_controller.mm',
        'browser/cocoa/tab_strip_controller.h',
        'browser/cocoa/tab_strip_controller.mm',
        'browser/cocoa/tab_strip_model_observer_bridge.h',
        'browser/cocoa/tab_strip_model_observer_bridge.mm',
        'browser/cocoa/tab_strip_view.h',
        'browser/cocoa/tab_strip_view.mm',
        'browser/cocoa/tab_view.h',
        'browser/cocoa/tab_view.mm',
        'browser/cocoa/tab_window_controller.h',
        'browser/cocoa/tab_window_controller.mm',
        'browser/cocoa/throbber_view.h',
        'browser/cocoa/throbber_view.mm',
        'browser/cocoa/toolbar_button_cell.h',
        'browser/cocoa/toolbar_button_cell.mm',
        'browser/cocoa/toolbar_controller.h',
        'browser/cocoa/toolbar_controller.mm',
        'browser/cocoa/toolbar_view.h',
        'browser/cocoa/toolbar_view.mm',
        'browser/cocoa/ui_localizer.h',
        'browser/cocoa/ui_localizer.mm',
        'browser/cocoa/view_resizer.h',
        'browser/cocoa/web_drag_source.h',
        'browser/cocoa/web_drag_source.mm',
        'browser/cocoa/web_drop_target.h',
        'browser/cocoa/web_drop_target.mm',
        'browser/command_updater.cc',
        'browser/command_updater.h',
        'browser/cookies_table_model.cc',
        'browser/cookies_table_model.h',
        'browser/cross_site_request_manager.cc',
        'browser/cross_site_request_manager.h',
        'browser/defaults.cc',
        'browser/defaults.h',
        'browser/dock_info_gtk.cc',
        'browser/dock_info_win.cc',
        'browser/dock_info.cc',
        'browser/dock_info.h',
        'browser/dom_operation_notification_details.h',
        'browser/dom_ui/chrome_url_data_manager.cc',
        'browser/dom_ui/chrome_url_data_manager.h',
        'browser/dom_ui/devtools_ui.cc',
        'browser/dom_ui/devtools_ui.h',
        'browser/dom_ui/dom_ui.cc',
        'browser/dom_ui/dom_ui.h',
        'browser/dom_ui/dom_ui_factory.cc',
        'browser/dom_ui/dom_ui_factory.h',
        'browser/dom_ui/dom_ui_favicon_source.cc',
        'browser/dom_ui/dom_ui_favicon_source.h',
        'browser/dom_ui/dom_ui_theme_source.cc',
        'browser/dom_ui/dom_ui_theme_source.h',
        'browser/dom_ui/dom_ui_thumbnail_source.cc',
        'browser/dom_ui/dom_ui_thumbnail_source.h',
        'browser/dom_ui/downloads_dom_handler.cc',
        'browser/dom_ui/downloads_dom_handler.h',
        'browser/dom_ui/downloads_ui.cc',
        'browser/dom_ui/downloads_ui.h',
        'browser/dom_ui/fileicon_source.cc',
        'browser/dom_ui/fileicon_source.h',
        'browser/dom_ui/history_ui.cc',
        'browser/dom_ui/history_ui.h',
        'browser/dom_ui/html_dialog_ui.cc',
        'browser/dom_ui/html_dialog_ui.h',
        'browser/dom_ui/new_tab_page_sync_handler.cc',
        'browser/dom_ui/new_tab_page_sync_handler.h',
        'browser/dom_ui/new_tab_ui.cc',
        'browser/dom_ui/new_tab_ui.h',
        'browser/dom_ui/print_ui.cc',
        'browser/dom_ui/print_ui.h',
        'browser/dom_ui/shown_sections_handler.cc',
        'browser/dom_ui/shown_sections_handler.h',
        'browser/dom_ui/tips_handler.cc',
        'browser/dom_ui/tips_handler.h',
        'browser/download/download_exe.cc',
        'browser/download/download_file.cc',
        'browser/download/download_file.h',
        'browser/download/download_item_model.cc',
        'browser/download/download_item_model.h',
        'browser/download/download_manager.cc',
        'browser/download/download_manager.h',
        'browser/download/download_request_dialog_delegate.h',
        'browser/download/download_request_dialog_delegate_win.cc',
        'browser/download/download_request_dialog_delegate_win.h',
        'browser/download/download_request_manager.cc',
        'browser/download/download_request_manager.h',
        'browser/download/download_shelf.cc',
        'browser/download/download_shelf.h',
        'browser/download/download_started_animation.h',
        'browser/download/download_util.cc',
        'browser/download/download_util.h',
        'browser/download/save_file.cc',
        'browser/download/save_file.h',
        'browser/download/save_file_manager.cc',
        'browser/download/save_file_manager.h',
        'browser/download/save_item.cc',
        'browser/download/save_item.h',
        'browser/download/save_package.cc',
        'browser/download/save_package.h',
        'browser/download/save_types.h',
        'browser/encoding_menu_controller.cc',
        'browser/encoding_menu_controller.h',
        'browser/extensions/crx_installer.cc',
        'browser/extensions/crx_installer.h',
        'browser/extensions/extension_bookmarks_module.cc',
        'browser/extensions/extension_bookmarks_module.h',
        'browser/extensions/extension_bookmarks_module_constants.cc',
        'browser/extensions/extension_bookmarks_module_constants.h',
        'browser/extensions/extension_creator.cc',
        'browser/extensions/extension_creator.h',
        'browser/extensions/extension_disabled_infobar_delegate.cc',
        'browser/extensions/extension_disabled_infobar_delegate.h',
        'browser/extensions/extension_dom_ui.cc',
        'browser/extensions/extension_dom_ui.h',
        'browser/extensions/extension_event_names.cc',
        'browser/extensions/extension_event_names.h',
        'browser/extensions/extension_file_util.cc',
        'browser/extensions/extension_file_util.h',
        'browser/extensions/extension_function.cc',
        'browser/extensions/extension_function.h',
        'browser/extensions/extension_function_dispatcher.cc',
        'browser/extensions/extension_function_dispatcher.h',
        'browser/extensions/extension_host.cc',
        'browser/extensions/extension_host.h',
        'browser/extensions/extension_install_ui.cc',
        'browser/extensions/extension_install_ui.h',
        'browser/extensions/extension_l10n_util.cc',
        'browser/extensions/extension_l10n_util.h',
        'browser/extensions/extension_message_service.cc',
        'browser/extensions/extension_message_service.h',
        'browser/extensions/extension_browser_event_router.cc',
        'browser/extensions/extension_browser_event_router.h',
        'browser/extensions/extension_page_actions_module.cc',
        'browser/extensions/extension_page_actions_module.h',
        'browser/extensions/extension_page_actions_module_constants.cc',
        'browser/extensions/extension_page_actions_module_constants.h',
        'browser/extensions/extension_prefs.cc',
        'browser/extensions/extension_prefs.h',
        'browser/extensions/extension_process_manager.cc',
        'browser/extensions/extension_process_manager.h',
        'browser/extensions/extension_protocols.cc',
        'browser/extensions/extension_protocols.h',
        'browser/extensions/extension_shelf_model.cc',
        'browser/extensions/extension_shelf_model.h',
        'browser/extensions/extension_tabs_module.cc',
        'browser/extensions/extension_tabs_module.h',
        'browser/extensions/extension_tabs_module_constants.cc',
        'browser/extensions/extension_tabs_module_constants.h',
        'browser/extensions/extension_test_api.cc',
        'browser/extensions/extension_test_api.h',
        'browser/extensions/extension_toolstrip_api.cc',
        'browser/extensions/extension_toolstrip_api.h',
        'browser/extensions/extension_updater.cc',
        'browser/extensions/extension_updater.h',
        'browser/extensions/extensions_service.cc',
        'browser/extensions/extensions_service.h',
        'browser/extensions/extensions_ui.cc',
        'browser/extensions/extensions_ui.h',
        'browser/extensions/external_extension_provider.h',
        'browser/extensions/external_registry_extension_provider_win.cc',
        'browser/extensions/external_registry_extension_provider_win.h',
        'browser/extensions/external_pref_extension_provider.cc',
        'browser/extensions/external_pref_extension_provider.h',
        'browser/extensions/sandboxed_extension_unpacker.cc',
        'browser/extensions/sandboxed_extension_unpacker.h',
        'browser/extensions/theme_preview_infobar_delegate.cc',
        'browser/extensions/theme_preview_infobar_delegate.h',
        'browser/extensions/user_script_master.cc',
        'browser/extensions/user_script_master.h',
        'browser/external_protocol_handler.cc',
        'browser/external_protocol_handler.h',
        'browser/external_tab_container.cc',
        'browser/external_tab_container.h',
        'browser/global_keyboard_shortcuts_mac.h',
        'browser/global_keyboard_shortcuts_mac.mm',
        'browser/fav_icon_helper.cc',
        'browser/fav_icon_helper.h',
        'browser/find_bar.h',
        'browser/find_bar_controller.cc',
        'browser/find_bar_controller.h',
        'browser/find_notification_details.h',
        'browser/first_run.cc',
        'browser/first_run.h',
        'browser/first_run_mac.mm',
        'browser/first_run_win.cc',
        'browser/first_run_gtk.cc',
        'browser/fonts_languages_window.h',
        'browser/gears_integration.cc',
        'browser/gears_integration.h',
        'browser/google_update.cc',
        'browser/google_update.h',
        'browser/google_update_settings_posix.cc',
        'browser/google_update_settings_mac.mm',
        'browser/google_url_tracker.cc',
        'browser/google_url_tracker.h',
        'browser/google_util.cc',
        'browser/google_util.h',
        'browser/gtk/about_chrome_dialog.cc',
        'browser/gtk/about_chrome_dialog.h',
        'browser/gtk/active_window_watcher.cc',
        'browser/gtk/active_window_watcher.h',
        'browser/gtk/back_forward_button_gtk.cc',
        'browser/gtk/back_forward_button_gtk.h',
        'browser/gtk/back_forward_menu_model_gtk.cc',
        'browser/gtk/back_forward_menu_model_gtk.h',
        'browser/gtk/blocked_popup_container_view_gtk.cc',
        'browser/gtk/blocked_popup_container_view_gtk.h',
        'browser/gtk/bookmark_bar_gtk.cc',
        'browser/gtk/bookmark_bar_gtk.h',
        'browser/gtk/bookmark_bubble_gtk.cc',
        'browser/gtk/bookmark_bubble_gtk.h',
        'browser/gtk/bookmark_context_menu_gtk.cc',
        'browser/gtk/bookmark_context_menu.cc',
        'browser/gtk/bookmark_context_menu.h',
        'browser/gtk/bookmark_editor_gtk.cc',
        'browser/gtk/bookmark_editor_gtk.h',
        'browser/gtk/bookmark_manager_gtk.cc',
        'browser/gtk/bookmark_manager_gtk.h',
        'browser/gtk/bookmark_menu_controller_gtk.cc',
        'browser/gtk/bookmark_menu_controller_gtk.h',
        'browser/gtk/bookmark_utils_gtk.cc',
        'browser/gtk/bookmark_utils_gtk.h',
        'browser/gtk/bookmark_tree_model.cc',
        'browser/gtk/bookmark_tree_model.h',
        'browser/gtk/browser_titlebar.cc',
        'browser/gtk/browser_titlebar.h',
        'browser/gtk/browser_toolbar_gtk.cc',
        'browser/gtk/browser_toolbar_gtk.h',
        'browser/gtk/browser_window_factory_gtk.cc',
        'browser/gtk/browser_window_gtk.cc',
        'browser/gtk/browser_window_gtk.h',
        'browser/gtk/clear_browsing_data_dialog_gtk.cc',
        'browser/gtk/clear_browsing_data_dialog_gtk.h',
        'browser/gtk/constrained_window_gtk.cc',
        'browser/gtk/constrained_window_gtk.h',
        'browser/gtk/create_application_shortcuts_dialog_gtk.cc',
        'browser/gtk/create_application_shortcuts_dialog_gtk.h',
        'browser/gtk/custom_button.cc',
        'browser/gtk/custom_button.h',
        'browser/gtk/dialogs_gtk.cc',
        'browser/gtk/download_item_gtk.cc',
        'browser/gtk/download_item_gtk.h',
        'browser/gtk/download_request_dialog_delegate_gtk.cc',
        'browser/gtk/download_request_dialog_delegate_gtk.h',
        'browser/gtk/download_shelf_gtk.cc',
        'browser/gtk/download_shelf_gtk.h',
        'browser/gtk/download_started_animation_gtk.cc',
        'browser/gtk/edit_search_engine_dialog.cc',
        'browser/gtk/edit_search_engine_dialog.h',
        'browser/gtk/extension_shelf_gtk.cc',
        'browser/gtk/extension_shelf_gtk.h',
        'browser/gtk/extension_view_gtk.cc',
        'browser/gtk/extension_view_gtk.h',
        'browser/gtk/first_run_bubble.cc',
        'browser/gtk/first_run_bubble.h',
        'browser/gtk/first_run_dialog.cc',
        'browser/gtk/first_run_dialog.h',
        'browser/gtk/go_button_gtk.cc',
        'browser/gtk/go_button_gtk.h',
        'browser/gtk/gtk_chrome_button.cc',
        'browser/gtk/gtk_chrome_button.h',
        'browser/gtk/gtk_chrome_link_button.cc',
        'browser/gtk/gtk_chrome_link_button.h',
        'browser/gtk/gtk_floating_container.cc',
        'browser/gtk/gtk_floating_container.h',
        'browser/gtk/gtk_theme_provider.cc',
        'browser/gtk/gtk_theme_provider.h',
        'browser/gtk/hung_renderer_dialog_gtk.cc',
        'browser/gtk/import_dialog_gtk.cc',
        'browser/gtk/import_dialog_gtk.h',
        'browser/gtk/import_lock_dialog_gtk.cc',
        'browser/gtk/import_lock_dialog_gtk.h',
        'browser/gtk/import_progress_dialog_gtk.cc',
        'browser/gtk/import_progress_dialog_gtk.h',
        'browser/gtk/info_bubble_gtk.cc',
        'browser/gtk/info_bubble_gtk.h',
        'browser/gtk/infobar_container_gtk.cc',
        'browser/gtk/infobar_container_gtk.h',
        'browser/gtk/infobar_gtk.cc',
        'browser/gtk/infobar_gtk.h',
        'browser/gtk/keyword_editor_view.cc',
        'browser/gtk/keyword_editor_view.h',
        'browser/gtk/find_bar_gtk.cc',
        'browser/gtk/find_bar_gtk.h',
        'browser/gtk/focus_store_gtk.cc',
        'browser/gtk/focus_store_gtk.h',
        'browser/gtk/location_bar_view_gtk.cc',
        'browser/gtk/location_bar_view_gtk.h',
        'browser/gtk/list_store_favicon_loader.cc',
        'browser/gtk/list_store_favicon_loader.h',
        'browser/gtk/menu_gtk.cc',
        'browser/gtk/menu_gtk.h',
        'browser/gtk/nine_box.cc',
        'browser/gtk/nine_box.h',
        'browser/gtk/options/advanced_contents_gtk.cc',
        'browser/gtk/options/advanced_contents_gtk.h',
        'browser/gtk/options/advanced_page_gtk.cc',
        'browser/gtk/options/advanced_page_gtk.h',
        'browser/gtk/options/content_page_gtk.cc',
        'browser/gtk/options/content_page_gtk.h',
        'browser/gtk/options/cookies_view.cc',
        'browser/gtk/options/cookies_view.h',
        'browser/gtk/options/exceptions_page_gtk.cc',
        'browser/gtk/options/exceptions_page_gtk.h',
        'browser/gtk/options/fonts_languages_window_gtk.cc',
        'browser/gtk/options/fonts_page_gtk.cc',
        'browser/gtk/options/fonts_page_gtk.h',
        'browser/gtk/options/general_page_gtk.cc',
        'browser/gtk/options/general_page_gtk.h',
        'browser/gtk/options/languages_page_gtk.cc',
        'browser/gtk/options/languages_page_gtk.h',
        'browser/gtk/options/options_layout_gtk.cc',
        'browser/gtk/options/options_layout_gtk.h',
        'browser/gtk/options/options_window_gtk.cc',
        'browser/gtk/options/passwords_exceptions_window_gtk.cc',
        'browser/gtk/options/passwords_exceptions_window_gtk.h',
        'browser/gtk/options/passwords_page_gtk.cc',
        'browser/gtk/options/passwords_page_gtk.h',
        'browser/gtk/options/url_picker_dialog_gtk.cc',
        'browser/gtk/options/url_picker_dialog_gtk.h',
        'browser/gtk/page_info_window_gtk.cc',
        'browser/gtk/sad_tab_gtk.cc',
        'browser/gtk/sad_tab_gtk.h',
        'browser/gtk/slide_animator_gtk.cc',
        'browser/gtk/slide_animator_gtk.h',
        'browser/gtk/standard_menus.cc',
        'browser/gtk/standard_menus.h',
        'browser/gtk/status_bubble_gtk.cc',
        'browser/gtk/status_bubble_gtk.h',
        'browser/gtk/tab_contents_container_gtk.cc',
        'browser/gtk/tab_contents_container_gtk.h',
        'browser/gtk/tab_contents_drag_source.cc',
        'browser/gtk/tab_contents_drag_source.h',
        'browser/gtk/tabs/dragged_tab_controller_gtk.cc',
        'browser/gtk/tabs/dragged_tab_controller_gtk.h',
        'browser/gtk/tabs/dragged_tab_gtk.cc',
        'browser/gtk/tabs/dragged_tab_gtk.h',
        'browser/gtk/tabs/tab_gtk.cc',
        'browser/gtk/tabs/tab_gtk.h',
        'browser/gtk/tabs/tab_renderer_gtk.cc',
        'browser/gtk/tabs/tab_renderer_gtk.h',
        'browser/gtk/tabs/tab_strip_gtk.cc',
        'browser/gtk/tabs/tab_strip_gtk.h',
        'browser/gtk/task_manager_gtk.cc',
        'browser/gtk/task_manager_gtk.h',
        'browser/gtk/toolbar_star_toggle_gtk.cc',
        'browser/gtk/toolbar_star_toggle_gtk.h',
        'browser/gtk/view_id_util.cc',
        'browser/gtk/view_id_util.h',
        'browser/hang_monitor/hung_plugin_action.cc',
        'browser/hang_monitor/hung_plugin_action.h',
        'browser/hang_monitor/hung_window_detector.cc',
        'browser/hang_monitor/hung_window_detector.h',
        'browser/history/archived_database.cc',
        'browser/history/archived_database.h',
        'browser/history/download_database.cc',
        'browser/history/download_database.h',
        'browser/history/download_types.h',
        'browser/history/expire_history_backend.cc',
        'browser/history/expire_history_backend.h',
        'browser/history/history.cc',
        'browser/history/history.h',
        'browser/history/history_backend.cc',
        'browser/history/history_backend.h',
        'browser/history/history_database.cc',
        'browser/history/history_database.h',
        'browser/history/history_marshaling.h',
        'browser/history/history_notifications.h',
        'browser/history/history_publisher.cc',
        'browser/history/history_publisher.h',
        'browser/history/history_publisher_none.cc',
        'browser/history/history_publisher_win.cc',
        'browser/history/history_types.cc',
        'browser/history/history_types.h',
        'browser/history/in_memory_database.cc',
        'browser/history/in_memory_database.h',
        'browser/history/in_memory_history_backend.cc',
        'browser/history/in_memory_history_backend.h',
        'browser/history/page_usage_data.cc',
        'browser/history/page_usage_data.h',
        'browser/history/query_parser.cc',
        'browser/history/query_parser.h',
        'browser/history/snippet.cc',
        'browser/history/snippet.h',
        'browser/history/starred_url_database.cc',
        'browser/history/starred_url_database.h',
        'browser/history/text_database.cc',
        'browser/history/text_database.h',
        'browser/history/text_database_manager.cc',
        'browser/history/text_database_manager.h',
        'browser/history/thumbnail_database.cc',
        'browser/history/thumbnail_database.h',
        'browser/history/url_database.cc',
        'browser/history/url_database.h',
        'browser/history/visit_database.cc',
        'browser/history/visit_database.h',
        'browser/history/visit_tracker.cc',
        'browser/history/visit_tracker.h',
        'browser/history/visitsegment_database.cc',
        'browser/history/visitsegment_database.h',
        'browser/hung_renderer_dialog.h',
        'browser/icon_loader.h',
        'browser/icon_loader.cc',
        'browser/icon_loader_linux.cc',
        'browser/icon_loader_mac.mm',
        'browser/icon_loader_win.cc',
        'browser/icon_manager.cc',
        'browser/icon_manager.h',
        'browser/icon_manager_linux.cc',
        'browser/icon_manager_mac.mm',
        'browser/icon_manager_win.cc',
        'browser/ime_input.cc',
        'browser/ime_input.h',
        'browser/importer/firefox2_importer.cc',
        'browser/importer/firefox2_importer.h',
        'browser/importer/firefox3_importer.cc',
        'browser/importer/firefox3_importer.h',
        'browser/importer/firefox_importer_utils.cc',
        'browser/importer/firefox_importer_utils_linux.cc',
        'browser/importer/firefox_importer_utils_mac.mm',
        'browser/importer/firefox_importer_utils_win.cc',
        'browser/importer/firefox_importer_utils.h',
        'browser/importer/firefox_profile_lock.cc',
        'browser/importer/firefox_profile_lock.h',
        'browser/importer/firefox_profile_lock_posix.cc',
        'browser/importer/firefox_profile_lock_win.cc',
        'browser/importer/ie_importer.cc',
        'browser/importer/ie_importer.h',
        'browser/importer/importer.cc',
        'browser/importer/importer.h',
        'browser/importer/mork_reader.cc',
        'browser/importer/mork_reader.h',
        'browser/importer/nss_decryptor.cc',
        'browser/importer/nss_decryptor.h',
        'browser/importer/nss_decryptor_linux.cc',
        'browser/importer/nss_decryptor_linux.h',
        'browser/importer/nss_decryptor_mac.h',
        'browser/importer/nss_decryptor_mac.mm',
        'browser/importer/nss_decryptor_win.cc',
        'browser/importer/nss_decryptor_win.h',
        'browser/importer/safari_importer.h',
        'browser/importer/safari_importer.mm',
        'browser/importer/toolbar_importer.cc',
        'browser/importer/toolbar_importer.h',
        'browser/in_process_webkit/browser_webkitclient_impl.cc',
        'browser/in_process_webkit/browser_webkitclient_impl.h',
        'browser/in_process_webkit/dom_storage_dispatcher_host.cc',
        'browser/in_process_webkit/dom_storage_dispatcher_host.h',
        'browser/in_process_webkit/webkit_context.cc',
        'browser/in_process_webkit/webkit_context.h',
        'browser/in_process_webkit/webkit_thread.cc',
        'browser/in_process_webkit/webkit_thread.h',
        'browser/input_window_dialog.h',
        'browser/input_window_dialog_gtk.cc',
        'browser/input_window_dialog_win.cc',
        'browser/jankometer.cc',
        'browser/jankometer.h',
        'browser/jumplist.cc',
        'browser/jumplist.h',
        'browser/jsmessage_box_handler.cc',
        'browser/jsmessage_box_handler.h',
        'browser/keychain_mac.cc',
        'browser/keychain_mac.h',
        'browser/language_combobox_model.cc',
        'browser/language_combobox_model.h',
        'browser/language_order_table_model.cc',
        'browser/language_order_table_model.h',
        'browser/load_from_memory_cache_details.h',
        'browser/load_notification_details.h',
        'browser/location_bar.h',
        'browser/login_model.h',
        'browser/login_prompt.cc',
        'browser/login_prompt.h',
        'browser/login_prompt_gtk.cc',
        'browser/login_prompt_mac.h',
        'browser/login_prompt_mac.mm',
        'browser/login_prompt_win.cc',
        'browser/memory_details.cc',
        'browser/memory_details.h',
        'browser/meta_table_helper.cc',
        'browser/meta_table_helper.h',
        'browser/metrics/metrics_log.cc',
        'browser/metrics/metrics_log.h',
        'browser/metrics/metrics_response.cc',
        'browser/metrics/metrics_response.h',
        'browser/metrics/metrics_service.cc',
        'browser/metrics/metrics_service.h',
        'browser/metrics/user_metrics.cc',
        'browser/metrics/user_metrics.h',
        'browser/modal_html_dialog_delegate.cc',
        'browser/modal_html_dialog_delegate.h',
        'browser/net/chrome_url_request_context.cc',
        'browser/net/chrome_url_request_context.h',
        'browser/net/dns_global.cc',
        'browser/net/dns_global.h',
        'browser/net/dns_host_info.cc',
        'browser/net/dns_host_info.h',
        'browser/net/dns_master.cc',
        'browser/net/dns_master.h',
        'browser/net/metadata_url_request.cc',
        'browser/net/metadata_url_request.h',
        'browser/net/referrer.cc',
        'browser/net/referrer.h',
        'browser/net/resolve_proxy_msg_helper.cc',
        'browser/net/resolve_proxy_msg_helper.h',
        'browser/net/sdch_dictionary_fetcher.cc',
        'browser/net/sdch_dictionary_fetcher.h',
        'browser/net/ssl_config_service_manager.h',
        'browser/net/ssl_config_service_manager_win.cc',
        'browser/net/url_fetcher.cc',
        'browser/net/url_fetcher.h',
        'browser/net/url_fetcher_protect.cc',
        'browser/net/url_fetcher_protect.h',
        'browser/net/url_fixer_upper.cc',
        'browser/net/url_fixer_upper.h',
        'browser/net/url_request_failed_dns_job.cc',
        'browser/net/url_request_failed_dns_job.h',
        # TODO:  These should be moved to test_support (see below), but
        # are currently used by production code in automation_provider.cc.
        'browser/net/url_request_mock_http_job.cc',
        'browser/net/url_request_mock_http_job.h',
        'browser/net/url_request_mock_util.cc',
        'browser/net/url_request_mock_util.h',
        'browser/net/url_request_slow_download_job.cc',
        'browser/net/url_request_slow_download_job.h',
        'browser/net/url_request_slow_http_job.cc',
        'browser/net/url_request_slow_http_job.h',
        'browser/omnibox_search_hint.cc',
        'browser/omnibox_search_hint.h',
        'browser/options_page_base.cc',
        'browser/options_page_base.h',
        'browser/options_util.cc',
        'browser/options_util.h',
        'browser/options_window.h',
        'browser/page_info_model.cc',
        'browser/page_info_model.h',
        'browser/page_state.cc',
        'browser/page_state.h',
        'browser/parsers/metadata_parser.h',
        'browser/parsers/metadata_parser_factory.h',
        'browser/parsers/metadata_parser_filebase.cc',
        'browser/parsers/metadata_parser_filebase.h',
        'browser/parsers/metadata_parser_jpeg.cc',
        'browser/parsers/metadata_parser_jpeg.h',
        'browser/parsers/metadata_parser_jpeg_factory.cc',
        'browser/parsers/metadata_parser_jpeg_factory.h',
        'browser/parsers/metadata_parser_manager.cc',
        'browser/parsers/metadata_parser_manager.h',
        'browser/parsers/metadata_parser.cc',
        'browser/password_manager/encryptor_linux.cc',
        'browser/password_manager/encryptor_mac.mm',
        'browser/password_manager/encryptor_win.cc',
        'browser/password_manager/encryptor.h',
        'browser/password_manager/ie7_password.cc',
        'browser/password_manager/ie7_password.h',
        'browser/password_manager/login_database_mac.cc',
        'browser/password_manager/login_database_mac.h',
        'browser/password_manager/login_database.cc',
        'browser/password_manager/login_database.h',
        'browser/password_manager/password_form_manager.cc',
        'browser/password_manager/password_form_manager.h',
        'browser/password_manager/password_manager.cc',
        'browser/password_manager/password_manager.h',
        'browser/password_manager/password_store.cc',
        'browser/password_manager/password_store.h',
        'browser/password_manager/password_store_default.cc',
        'browser/password_manager/password_store_default.h',
        # Temporarily disabled while we figure some stuff out.
        # http://code.google.com/p/chromium/issues/detail?id=12351
        # 'browser/password_manager/password_store_gnome.h',
        # 'browser/password_manager/password_store_gnome.cc',
        # 'browser/password_manager/password_store_kwallet.h',
        # 'browser/password_manager/password_store_kwallet.cc',
        'browser/password_manager/password_store_mac_internal.h',
        'browser/password_manager/password_store_mac.h',
        'browser/password_manager/password_store_mac.cc',
        'browser/password_manager/password_store_win.h',
        'browser/password_manager/password_store_win.cc',
        'browser/plugin_installer.cc',
        'browser/plugin_installer.h',
        'browser/plugin_process_host.cc',
        'browser/plugin_process_host.h',
        'browser/plugin_service.cc',
        'browser/plugin_service.h',
        'browser/possible_url_model.cc',
        'browser/possible_url_model.h',
        'browser/printing/print_job.cc',
        'browser/printing/print_job.h',
        'browser/printing/print_job_manager.cc',
        'browser/printing/print_job_manager.h',
        'browser/printing/print_job_worker.cc',
        'browser/printing/print_job_worker.h',
        'browser/printing/print_job_worker_owner.h',
        'browser/printing/print_view_manager.cc',
        'browser/printing/print_view_manager.h',
        'browser/printing/printer_query.cc',
        'browser/printing/printer_query.h',
        'browser/privacy_blacklist/blacklist.h',
        'browser/privacy_blacklist/blacklist.cc',
        'browser/privacy_blacklist/blacklist_io.h',
        'browser/privacy_blacklist/blacklist_io.cc',
        'browser/privacy_blacklist/blacklist_store.h',
        'browser/privacy_blacklist/blacklist_store.cc',
        'browser/privacy_blacklist/blocked_response.h',
        'browser/privacy_blacklist/blocked_response.cc',
        'browser/process_singleton.h',
        'browser/process_singleton_linux.cc',
        'browser/process_singleton_mac.cc',
        'browser/process_singleton_win.cc',
        'browser/profile.cc',
        'browser/profile.h',
        'browser/profile_manager.cc',
        'browser/profile_manager.h',
        'browser/renderer_host/async_resource_handler.cc',
        'browser/renderer_host/async_resource_handler.h',
        'browser/renderer_host/audio_renderer_host.cc',
        'browser/renderer_host/audio_renderer_host.h',
        'browser/renderer_host/backing_store.h',
        'browser/renderer_host/backing_store_manager.cc',
        'browser/renderer_host/backing_store_manager.h',
        'browser/renderer_host/backing_store_mac.mm',
        'browser/renderer_host/backing_store_win.cc',
        'browser/renderer_host/backing_store_x.cc',
        'browser/renderer_host/browser_render_process_host.cc',
        'browser/renderer_host/browser_render_process_host.h',
        'browser/renderer_host/buffered_resource_handler.cc',
        'browser/renderer_host/buffered_resource_handler.h',
        'browser/renderer_host/cross_site_resource_handler.cc',
        'browser/renderer_host/cross_site_resource_handler.h',
        'browser/renderer_host/database_dispatcher_host.cc',
        'browser/renderer_host/database_dispatcher_host.h',
        'browser/renderer_host/download_resource_handler.cc',
        'browser/renderer_host/download_resource_handler.h',
        'browser/renderer_host/download_throttling_resource_handler.cc',
        'browser/renderer_host/download_throttling_resource_handler.h',
        'browser/renderer_host/file_system_accessor.cc',
        'browser/renderer_host/file_system_accessor.h',
        'browser/renderer_host/gtk_im_context_wrapper.cc',
        'browser/renderer_host/gtk_im_context_wrapper.h',
        'browser/renderer_host/render_process_host.cc',
        'browser/renderer_host/render_process_host.h',
        'browser/renderer_host/render_sandbox_host_linux.h',
        'browser/renderer_host/render_sandbox_host_linux.cc',
        'browser/renderer_host/render_view_host.cc',
        'browser/renderer_host/render_view_host.h',
        'browser/renderer_host/render_view_host_delegate.cc',
        'browser/renderer_host/render_view_host_delegate.h',
        'browser/renderer_host/render_view_host_factory.cc',
        'browser/renderer_host/render_view_host_factory.h',
        'browser/renderer_host/render_widget_helper.cc',
        'browser/renderer_host/render_widget_helper.h',
        'browser/renderer_host/render_widget_host.cc',
        'browser/renderer_host/render_widget_host.h',
        'browser/renderer_host/render_widget_host_view.h',
        'browser/renderer_host/render_widget_host_view_gtk.cc',
        'browser/renderer_host/render_widget_host_view_gtk.h',
        'browser/renderer_host/render_widget_host_view_mac.h',
        'browser/renderer_host/render_widget_host_view_mac.mm',
        'browser/renderer_host/render_widget_host_view_win.cc',
        'browser/renderer_host/render_widget_host_view_win.h',
        'browser/renderer_host/resource_dispatcher_host.cc',
        'browser/renderer_host/resource_dispatcher_host.h',
        'browser/renderer_host/resource_handler.h',
        'browser/renderer_host/resource_message_filter.cc',
        'browser/renderer_host/resource_message_filter.h',
        'browser/renderer_host/resource_message_filter_gtk.cc',
        'browser/renderer_host/resource_message_filter_win.cc',
        'browser/renderer_host/resource_request_details.h',
        'browser/renderer_host/safe_browsing_resource_handler.cc',
        'browser/renderer_host/safe_browsing_resource_handler.h',
        'browser/renderer_host/save_file_resource_handler.cc',
        'browser/renderer_host/save_file_resource_handler.h',
        'browser/renderer_host/site_instance.cc',
        'browser/renderer_host/site_instance.h',
        'browser/renderer_host/sync_resource_handler.cc',
        'browser/renderer_host/sync_resource_handler.h',
        'browser/renderer_host/web_cache_manager.cc',
        'browser/renderer_host/web_cache_manager.h',
        'browser/rlz/rlz.cc',
        'browser/rlz/rlz.h',
        'browser/safe_browsing/bloom_filter.cc',
        'browser/safe_browsing/bloom_filter.h',
        'browser/safe_browsing/chunk_range.cc',
        'browser/safe_browsing/chunk_range.h',
        'browser/safe_browsing/protocol_manager.cc',
        'browser/safe_browsing/protocol_manager.h',
        'browser/safe_browsing/protocol_parser.cc',
        'browser/safe_browsing/protocol_parser.h',
        'browser/safe_browsing/safe_browsing_blocking_page.cc',
        'browser/safe_browsing/safe_browsing_blocking_page.h',
        'browser/safe_browsing/safe_browsing_database.cc',
        'browser/safe_browsing/safe_browsing_database.h',
        'browser/safe_browsing/safe_browsing_database_bloom.cc',
        'browser/safe_browsing/safe_browsing_database_bloom.h',
        'browser/safe_browsing/safe_browsing_service.cc',
        'browser/safe_browsing/safe_browsing_service.h',
        'browser/safe_browsing/safe_browsing_util.cc',
        'browser/safe_browsing/safe_browsing_util.h',
        'browser/sandbox_policy.cc',
        'browser/sandbox_policy.h',
        'browser/search_engines/edit_search_engine_controller.cc',
        'browser/search_engines/edit_search_engine_controller.h',
        'browser/search_engines/keyword_editor_controller.cc',
        'browser/search_engines/keyword_editor_controller.h',
        'browser/search_engines/template_url.cc',
        'browser/search_engines/template_url.h',
        'browser/search_engines/template_url_fetcher.cc',
        'browser/search_engines/template_url_fetcher.h',
        'browser/search_engines/template_url_model.cc',
        'browser/search_engines/template_url_model.h',
        'browser/search_engines/template_url_parser.cc',
        'browser/search_engines/template_url_parser.h',
        'browser/search_engines/template_url_prepopulate_data.cc',
        'browser/search_engines/template_url_prepopulate_data.h',
        'browser/search_engines/template_url_table_model.cc',
        'browser/search_engines/template_url_table_model.h',
        'browser/session_startup_pref.cc',
        'browser/session_startup_pref.h',
        'browser/sessions/base_session_service.cc',
        'browser/sessions/base_session_service.h',
        'browser/sessions/session_backend.cc',
        'browser/sessions/session_backend.h',
        'browser/sessions/session_command.cc',
        'browser/sessions/session_command.h',
        'browser/sessions/session_id.cc',
        'browser/sessions/session_id.h',
        'browser/sessions/session_restore.cc',
        'browser/sessions/session_restore.h',
        'browser/sessions/session_service.cc',
        'browser/sessions/session_service.h',
        'browser/sessions/session_types.cc',
        'browser/sessions/session_types.h',
        'browser/sessions/tab_restore_service.cc',
        'browser/sessions/tab_restore_service.h',
        'browser/shell_dialogs.h',
        'browser/shell_integration.cc',
        'browser/shell_integration.h',
        'browser/shell_integration_mac.mm',
        'browser/shell_integration_linux.cc',
        'browser/shell_integration_win.cc',
        'browser/spellcheck_worditerator.cc',
        'browser/spellcheck_worditerator.h',
        'browser/spellchecker.cc',
        'browser/spellchecker.h',
        'browser/spellchecker_common.h',
        'browser/spellchecker_linux.cc',
        'browser/spellchecker_mac.mm',
        'browser/spellchecker_platform_engine.h',
        'browser/spellchecker_win.cc',
        'browser/ssl/ssl_blocking_page.cc',
        'browser/ssl/ssl_blocking_page.h',
        'browser/ssl/ssl_cert_error_handler.cc',
        'browser/ssl/ssl_cert_error_handler.h',
        'browser/ssl/ssl_client_auth_handler.cc',
        'browser/ssl/ssl_client_auth_handler.h',
        'browser/ssl/ssl_error_handler.cc',
        'browser/ssl/ssl_error_handler.h',
        'browser/ssl/ssl_error_info.cc',
        'browser/ssl/ssl_error_info.h',
        'browser/ssl/ssl_host_state.cc',
        'browser/ssl/ssl_host_state.h',
        'browser/ssl/ssl_manager.cc',
        'browser/ssl/ssl_manager.h',
        'browser/ssl/ssl_mixed_content_handler.cc',
        'browser/ssl/ssl_mixed_content_handler.h',
        'browser/ssl/ssl_policy.cc',
        'browser/ssl/ssl_policy.h',
        'browser/ssl/ssl_policy_backend.cc',
        'browser/ssl/ssl_policy_backend.h',
        'browser/ssl/ssl_request_info.h',
        'browser/status_bubble.h',
        'browser/sync/engine/syncapi.h',
        'browser/sync/glue/bookmark_model_worker.cc',
        'browser/sync/glue/bookmark_model_worker.h',
        'browser/sync/glue/change_processor.cc',
        'browser/sync/glue/change_processor.h',
        'browser/sync/glue/http_bridge.cc',
        'browser/sync/glue/http_bridge.h',
        'browser/sync/glue/model_associator.cc',
        'browser/sync/glue/model_associator.h',
        'browser/sync/glue/sync_backend_host.cc',
        'browser/sync/glue/sync_backend_host.h',
        'browser/sync/personalization_strings.h',
        'browser/sync/profile_sync_service.cc',
        'browser/sync/profile_sync_service.h',
        'browser/sync/sync_status_ui_helper.cc',
        'browser/sync/sync_status_ui_helper.h',
        'browser/tab_contents/constrained_window.h',
        'browser/tab_contents/infobar_delegate.cc',
        'browser/tab_contents/infobar_delegate.h',
        'browser/tab_contents/interstitial_page.cc',
        'browser/tab_contents/interstitial_page.h',
        'browser/tab_contents/navigation_controller.cc',
        'browser/tab_contents/navigation_controller.h',
        'browser/tab_contents/navigation_entry.cc',
        'browser/tab_contents/navigation_entry.h',
        'browser/tab_contents/page_navigator.h',
        'browser/tab_contents/provisional_load_details.cc',
        'browser/tab_contents/provisional_load_details.h',
        'browser/tab_contents/render_view_context_menu.cc',
        'browser/tab_contents/render_view_context_menu.h',
        'browser/tab_contents/render_view_context_menu_gtk.cc',
        'browser/tab_contents/render_view_context_menu_gtk.h',
        'browser/tab_contents/render_view_context_menu_mac.mm',
        'browser/tab_contents/render_view_context_menu_mac.h',
        'browser/tab_contents/render_view_host_delegate_helper.cc',
        'browser/tab_contents/render_view_host_delegate_helper.h',
        'browser/tab_contents/render_view_host_manager.cc',
        'browser/tab_contents/render_view_host_manager.h',
        'browser/tab_contents/repost_form_warning.h',
        'browser/tab_contents/security_style.h',
        'browser/tab_contents/tab_contents.cc',
        'browser/tab_contents/tab_contents.h',
        'browser/tab_contents/tab_contents_delegate.h',
        'browser/tab_contents/tab_contents_view.cc',
        'browser/tab_contents/tab_contents_view.h',
        'browser/tab_contents/tab_contents_view_gtk.cc',
        'browser/tab_contents/tab_contents_view_gtk.h',
        'browser/tab_contents/tab_contents_view_mac.h',
        'browser/tab_contents/tab_contents_view_mac.mm',
        'browser/tab_contents/tab_util.cc',
        'browser/tab_contents/tab_util.h',
        'browser/tab_contents/thumbnail_generator.cc',
        'browser/tab_contents/thumbnail_generator.h',
        'browser/tab_contents/web_drag_source.cc',
        'browser/tab_contents/web_drag_source.h',
        'browser/tab_contents/web_drop_target.cc',
        'browser/tab_contents/web_drop_target.h',
        'browser/tabs/tab_strip_model.cc',
        'browser/tabs/tab_strip_model.h',
        'browser/tabs/tab_strip_model_order_controller.cc',
        'browser/tabs/tab_strip_model_order_controller.h',
        'browser/task_manager.cc',
        'browser/task_manager.h',
        'browser/task_manager_resource_providers.cc',
        'browser/task_manager_resource_providers.h',
        'browser/theme_resources_util.cc',
        'browser/theme_resources_util.h',
        'browser/thumbnail_store.cc',
        'browser/thumbnail_store.h',
        'browser/toolbar_model.cc',
        'browser/toolbar_model.h',
        'browser/user_data_manager.cc',
        'browser/user_data_manager.h',
        'browser/utility_process_host.cc',
        'browser/utility_process_host.h',
        'browser/view_ids.h',
        'browser/views/about_chrome_view.cc',
        'browser/views/about_chrome_view.h',
        'browser/views/about_ipc_dialog.cc',
        'browser/views/about_ipc_dialog.h',
        'browser/views/about_network_dialog.cc',
        'browser/views/about_network_dialog.h',
        'browser/views/accelerator_table_gtk.cc',
        'browser/views/accelerator_table_gtk.h',
        'browser/views/autocomplete/autocomplete_popup_contents_view.cc',
        'browser/views/autocomplete/autocomplete_popup_contents_view.h',
        'browser/views/autocomplete/autocomplete_popup_win.cc',
        'browser/views/autocomplete/autocomplete_popup_win.h',
        'browser/views/autocomplete/autocomplete_popup_gtk.cc',
        'browser/views/autocomplete/autocomplete_popup_gtk.h',
        'browser/views/blocked_popup_container_view_win.cc',
        'browser/views/blocked_popup_container_view_win.h',
        'browser/views/bookmark_bar_view.cc',
        'browser/views/bookmark_bar_view.h',
        'browser/views/bookmark_bubble_view.cc',
        'browser/views/bookmark_bubble_view.h',
        'browser/views/bookmark_context_menu.cc',
        'browser/views/bookmark_context_menu.h',
        'browser/views/bookmark_editor_view.cc',
        'browser/views/bookmark_editor_view.h',
        'browser/views/bookmark_folder_tree_view.cc',
        'browser/views/bookmark_folder_tree_view.h',
        'browser/views/bookmark_manager_view.cc',
        'browser/views/bookmark_manager_view.h',
        'browser/views/bookmark_menu_button.cc',
        'browser/views/bookmark_menu_button.h',
        'browser/views/bookmark_menu_controller_views.cc',
        'browser/views/bookmark_menu_controller_views.h',
        'browser/views/bookmark_table_view.cc',
        'browser/views/bookmark_table_view.h',
        'browser/views/browser_bubble.cc',
        'browser/views/browser_bubble.h',
        'browser/views/browser_bubble_gtk.cc',
        'browser/views/browser_bubble_win.cc',
        'browser/views/browser_dialogs.h',
        'browser/views/bug_report_view.cc',
        'browser/views/bug_report_view.h',
        'browser/views/chrome_views_delegate.cc',
        'browser/views/chrome_views_delegate.h',
        'browser/views/clear_browsing_data.cc',
        'browser/views/clear_browsing_data.h',
        'browser/views/compact_navigation_bar.cc',
        'browser/views/compact_navigation_bar.h',
        'browser/views/constrained_window_win.cc',
        'browser/views/constrained_window_win.h',
        'browser/views/confirm_message_box_dialog.cc',
        'browser/views/confirm_message_box_dialog.h',
        'browser/views/dialog_stubs_gtk.cc',
        'browser/views/dom_view.cc',
        'browser/views/dom_view.h',
        'browser/views/download_item_view.cc',
        'browser/views/download_item_view.h',
        'browser/views/download_shelf_view.cc',
        'browser/views/download_shelf_view.h',
        'browser/views/download_started_animation_win.cc',
        'browser/views/edit_search_engine_dialog.cc',
        'browser/views/edit_search_engine_dialog.h',
        'browser/views/event_utils.cc',
        'browser/views/event_utils.h',
        'browser/views/extensions/extension_install_prompt.cc',
        'browser/views/extensions/extension_shelf.cc',
        'browser/views/extensions/extension_shelf.h',
        'browser/views/extensions/extension_view.cc',
        'browser/views/extensions/extension_view.h',
        'browser/views/external_protocol_dialog.cc',
        'browser/views/external_protocol_dialog.h',
        'browser/views/find_bar_view.cc',
        'browser/views/find_bar_view.h',
        'browser/views/find_bar_win.cc',
        'browser/views/find_bar_win.h',
        'browser/views/first_run_bubble.cc',
        'browser/views/first_run_bubble.h',
        'browser/views/first_run_customize_view.cc',
        'browser/views/first_run_customize_view.h',
        'browser/views/first_run_view.cc',
        'browser/views/first_run_view.h',
        'browser/views/first_run_view_base.cc',
        'browser/views/first_run_view_base.h',
        'browser/views/frame/browser_frame.h',
        'browser/views/frame/browser_frame_gtk.cc',
        'browser/views/frame/browser_frame_gtk.h',
        'browser/views/frame/browser_frame_win.cc',
        'browser/views/frame/browser_frame_win.h',
        'browser/views/frame/browser_non_client_frame_view.h',
        'browser/views/frame/browser_root_view.cc',
        'browser/views/frame/browser_root_view.h',
        'browser/views/frame/browser_view.cc',
        'browser/views/frame/browser_view.h',
        'browser/views/frame/glass_browser_frame_view.cc',
        'browser/views/frame/glass_browser_frame_view.h',
        'browser/views/frame/opaque_browser_frame_view.cc',
        'browser/views/frame/opaque_browser_frame_view.h',
        'browser/views/frame/status_area_view.cc',
        'browser/views/frame/status_area_view.h',
        'browser/views/fullscreen_exit_bubble.cc',
        'browser/views/fullscreen_exit_bubble.h',
        'browser/views/go_button.cc',
        'browser/views/go_button.h',
        'browser/views/html_dialog_view.cc',
        'browser/views/html_dialog_view.h',
        'browser/views/hung_renderer_view.cc',
        'browser/views/importer_lock_view.cc',
        'browser/views/importer_lock_view.h',
        'browser/views/importer_view.cc',
        'browser/views/importer_view.h',
        'browser/views/importing_progress_view.cc',
        'browser/views/importing_progress_view.h',
        'browser/views/info_bubble.cc',
        'browser/views/info_bubble.h',
        'browser/views/infobars/infobar_container.cc',
        'browser/views/infobars/infobar_container.h',
        'browser/views/infobars/infobars.cc',
        'browser/views/infobars/infobars.h',
        'browser/views/jsmessage_box_dialog.cc',
        'browser/views/jsmessage_box_dialog.h',
        'browser/views/keyword_editor_view.cc',
        'browser/views/keyword_editor_view.h',
        'browser/views/location_bar_view.cc',
        'browser/views/location_bar_view.h',
        'browser/views/login_view.cc',
        'browser/views/login_view.h',
        'browser/views/new_profile_dialog.cc',
        'browser/views/new_profile_dialog.h',
        'browser/views/new_browser_window_widget.cc',
        'browser/views/new_browser_window_widget.h',
        'browser/views/options/advanced_contents_view.cc',
        'browser/views/options/advanced_contents_view.h',
        'browser/views/options/advanced_page_view.cc',
        'browser/views/options/advanced_page_view.h',
        'browser/views/options/content_page_view.cc',
        'browser/views/options/content_page_view.h',
        'browser/views/options/cookies_view.cc',
        'browser/views/options/cookies_view.h',
        'browser/views/options/exceptions_page_view.cc',
        'browser/views/options/exceptions_page_view.h',
        'browser/views/options/fonts_languages_window_view.cc',
        'browser/views/options/fonts_languages_window_view.h',
        'browser/views/options/fonts_page_view.cc',
        'browser/views/options/fonts_page_view.h',
        'browser/views/options/general_page_view.cc',
        'browser/views/options/general_page_view.h',
        'browser/views/options/languages_page_view.cc',
        'browser/views/options/languages_page_view.h',
        'browser/views/options/options_group_view.cc',
        'browser/views/options/options_group_view.h',
        'browser/views/options/options_page_view.cc',
        'browser/views/options/options_page_view.h',
        'browser/views/options/options_window_view.cc',
        'browser/views/options/passwords_exceptions_window_view.cc',
        'browser/views/options/passwords_exceptions_window_view.h',
        'browser/views/options/passwords_page_view.cc',
        'browser/views/options/passwords_page_view.h',
        'browser/views/page_info_window_view.cc',
        'browser/views/panel_controller.cc',
        'browser/views/panel_controller.h',
        'browser/views/panels/panel_scroller.cc',
        'browser/views/panels/panel_scroller.h',
        'browser/views/panels/panel_scroller_container.cc',
        'browser/views/panels/panel_scroller_container.h',
        'browser/views/panels/panel_scroller_header.cc',
        'browser/views/panels/panel_scroller_header.h',
        'browser/views/repost_form_warning_view.cc',
        'browser/views/repost_form_warning_view.h',
        'browser/views/restart_message_box.cc',
        'browser/views/restart_message_box.h',
        'browser/views/sad_tab_view.cc',
        'browser/views/sad_tab_view.h',
        'browser/views/select_profile_dialog.cc',
        'browser/views/select_profile_dialog.h',
        'browser/views/shell_dialogs_win.cc',
        'browser/views/star_toggle.cc',
        'browser/views/star_toggle.h',
        'browser/views/status_bubble_views.cc',
        'browser/views/status_bubble_views.h',
        'browser/views/sync/sync_setup_flow.cc',
        'browser/views/sync/sync_setup_flow.h',
        'browser/views/sync/sync_setup_wizard.cc',
        'browser/views/sync/sync_setup_wizard.h',
        'browser/views/tab_icon_view.cc',
        'browser/views/tab_icon_view.h',
        'browser/views/tab_contents/tab_contents_container.cc',
        'browser/views/tab_contents/tab_contents_container.h',
        'browser/views/tab_contents/native_tab_contents_container.h',
        'browser/views/tab_contents/native_tab_contents_container_gtk.cc',
        'browser/views/tab_contents/native_tab_contents_container_gtk.h',
        'browser/views/tab_contents/native_tab_contents_container_win.cc',
        'browser/views/tab_contents/native_tab_contents_container_win.h',
        'browser/views/tab_contents/render_view_context_menu_win.cc',
        'browser/views/tab_contents/render_view_context_menu_win.h',
        'browser/views/tab_contents/render_view_context_menu_external_win.cc',
        'browser/views/tab_contents/render_view_context_menu_external_win.h',
        'browser/views/tab_contents/tab_contents_view_gtk.cc',
        'browser/views/tab_contents/tab_contents_view_gtk.h',
        'browser/views/tab_contents/tab_contents_view_win.cc',
        'browser/views/tab_contents/tab_contents_view_win.h',
        'browser/views/tabs/dragged_tab_controller.cc',
        'browser/views/tabs/dragged_tab_controller.h',
        'browser/views/tabs/dragged_tab_view.cc',
        'browser/views/tabs/dragged_tab_view.h',
        'browser/views/tabs/grid.cc',
        'browser/views/tabs/grid.h',
        'browser/views/tabs/native_view_photobooth.h',
        'browser/views/tabs/native_view_photobooth_gtk.cc',
        'browser/views/tabs/native_view_photobooth_gtk.h',
        'browser/views/tabs/native_view_photobooth_win.cc',
        'browser/views/tabs/native_view_photobooth_win.h',
        'browser/views/tabs/browser_tab_strip.cc',
        'browser/views/tabs/browser_tab_strip.h',
        'browser/views/tabs/tab.cc',
        'browser/views/tabs/tab.h',
        'browser/views/tabs/tab_2.cc',
        'browser/views/tabs/tab_2.h',
        'browser/views/tabs/tab_overview_cell.cc',
        'browser/views/tabs/tab_overview_cell.h',
        'browser/views/tabs/tab_overview_container.cc',
        'browser/views/tabs/tab_overview_container.h',
        'browser/views/tabs/tab_overview_controller.cc',
        'browser/views/tabs/tab_overview_controller.h',
        'browser/views/tabs/tab_overview_drag_controller.cc',
        'browser/views/tabs/tab_overview_drag_controller.h',
        'browser/views/tabs/tab_overview_grid.cc',
        'browser/views/tabs/tab_overview_grid.h',
        'browser/views/tabs/tab_overview_message_listener.cc',
        'browser/views/tabs/tab_overview_message_listener.h',
        'browser/views/tabs/tab_overview_types.cc',
        'browser/views/tabs/tab_overview_types.h',
        'browser/views/tabs/tab_renderer.cc',
        'browser/views/tabs/tab_renderer.h',
        'browser/views/tabs/tab_strip.cc',
        'browser/views/tabs/tab_strip.h',
        'browser/views/tabs/tab_strip_2.cc',
        'browser/views/tabs/tab_strip_2.h',
        'browser/views/task_manager_view.cc',
        'browser/views/theme_helpers.cc',
        'browser/views/theme_helpers.h',
        'browser/views/toolbar_star_toggle.cc',
        'browser/views/toolbar_star_toggle.h',
        'browser/views/toolbar_view.cc',
        'browser/views/toolbar_view.h',
        'browser/views/uninstall_dialog.cc',
        'browser/views/uninstall_dialog.h',
        'browser/views/url_picker.cc',
        'browser/views/url_picker.h',
        'browser/views/user_data_dir_dialog.cc',
        'browser/views/user_data_dir_dialog.h',
        'browser/visitedlink_master.cc',
        'browser/visitedlink_master.h',
        'browser/visitedlink_event_listener.cc',
        'browser/visitedlink_event_listener.h',
        'browser/webdata/web_data_service.cc',
        'browser/webdata/web_data_service.h',
        'browser/webdata/web_data_service_win.cc',
        'browser/webdata/web_database.cc',
        'browser/webdata/web_database.h',
        'browser/webdata/web_database_win.cc',
        'browser/web_resource/web_resource_service.h',
        'browser/web_resource/web_resource_service.cc',
        'browser/window_sizer.cc',
        'browser/window_sizer.h',
        'browser/window_sizer_mac.mm',
        'browser/window_sizer_linux.cc',
        'browser/window_sizer_win.cc',
        'browser/worker_host/message_port_dispatcher.cc',
        'browser/worker_host/message_port_dispatcher.h',
        'browser/worker_host/worker_process_host.cc',
        'browser/worker_host/worker_process_host.h',
        'browser/worker_host/worker_service.cc',
        'browser/worker_host/worker_service.h',
        'browser/zygote_host_linux.cc',
        'browser/zygote_main_linux.cc',
        'tools/build/win/precompiled_wtl.h',
        'tools/build/win/precompiled_wtl.cc',

        # This file is generated by GRIT.
        '<(grit_out_dir)/grit/theme_resources_map.cc',
      ],
      'conditions': [
        ['javascript_engine=="v8"', {
          'defines': [
            'CHROME_V8',
          ],
        }],
        ['OS=="linux"', {
          'dependencies': [
            # Temporarily disabled while we figure some stuff out.
            # http://code.google.com/p/chromium/issues/detail?id=12351
            # '../build/linux/system.gyp:dbus-glib',
            # '../build/linux/system.gyp:gnome-keyring',
            '../build/linux/system.gyp:gtk',
            '../build/linux/system.gyp:nss',
            '../base/base.gyp:linux_versioninfo',
          ],
          'sources!': [
            'browser/views/extensions/extension_shelf.cc',
            'browser/views/extensions/extension_shelf.h',
            'browser/views/extensions/extension_view.cc',
            'browser/views/extensions/extension_view.h',
                    # Windows-specific files.
            'browser/password_manager/password_store_win.cc',
            'browser/password_manager/password_store_win.h',
          ],
          'sources': [
            'browser/net/ssl_config_service_manager_pref.cc',
          ],
          'conditions': [
            ['linux_breakpad==1', {
              'sources': [
                'browser/renderer_host/render_crash_handler_host_linux.cc',
                'app/breakpad_linux.cc',
                'app/breakpad_linux.h',
              ],
              'dependencies': [
                '../breakpad/breakpad.gyp:breakpad_client',
              ],
              'include_dirs': [
                # breakpad_linux.cc wants file_version_info_linux.h
                '<(SHARED_INTERMEDIATE_DIR)',
              ],
            }, {
              'sources': [
                'browser/renderer_host/render_crash_handler_host_linux_stub.cc',
                'app/breakpad_linux_stub.cc',
                'app/breakpad_linux.h',
              ],
            }],
            ['linux_sandbox_path != ""', {
              'defines': [
                'LINUX_SANDBOX_PATH="<(linux_sandbox_path)"',
              ],
            }],
          ],
        }],
        ['OS=="linux" and toolkit_views==0', {
          'sources!': [
            'browser/bookmarks/bookmark_drop_info.cc',
            'browser/views/autocomplete/autocomplete_popup_gtk.cc',
            'browser/views/autocomplete/autocomplete_popup_gtk.h'
          ],
        }],
        ['OS=="mac"', {
          'sources!': [
            'browser/automation/automation_provider_list_generic.cc',
            'browser/bookmarks/bookmark_context_menu.cc',
            'browser/bookmarks/bookmark_drop_info.cc',
            'browser/dock_info.cc',
            'browser/download/download_request_dialog_delegate_win.cc',
            'browser/jankometer.cc',
            'browser/password_manager/password_store_gnome.h',
            'browser/password_manager/password_store_gnome.cc',
            'browser/password_manager/password_store_kwallet.h',
            'browser/password_manager/password_store_kwallet.cc',
            'browser/password_manager/password_store_win.cc',
            'browser/password_manager/password_store_win.h',
            'browser/views/extensions/extension_shelf.cc',
            'browser/views/extensions/extension_shelf.h',
            'browser/views/extensions/extension_view.cc',
            'browser/views/extensions/extension_view.h',
          ],
          'sources': [
            'browser/net/ssl_config_service_manager_defaults.cc',
            # Build the necessary GTM sources
            '../third_party/GTM/AppKit/GTMNSBezierPath+RoundRect.m',
            '../third_party/GTM/AppKit/GTMNSColor+Luminance.m',
            '../third_party/GTM/AppKit/GTMTheme.m',
            '../third_party/GTM/AppKit/GTMUILocalizer.h',
            '../third_party/GTM/AppKit/GTMUILocalizer.m',
            '../third_party/GTM/AppKit/GTMUILocalizerAndLayoutTweaker.h',
            '../third_party/GTM/AppKit/GTMUILocalizerAndLayoutTweaker.m',
            '../third_party/GTM/AppKit/GTMWindowSheetController.m',
            # Build necessary Mozilla sources
            '../third_party/mozilla/include/NSPasteboard+Utils.h',
            '../third_party/mozilla/include/NSPasteboard+Utils.mm',
            '../third_party/mozilla/include/NSScreen+Utils.h',
            '../third_party/mozilla/include/NSScreen+Utils.m',
            '../third_party/mozilla/include/NSString+Utils.h',
            '../third_party/mozilla/include/NSString+Utils.m',
            '../third_party/mozilla/include/NSURL+Utils.h',
            '../third_party/mozilla/include/NSURL+Utils.m',
            '../third_party/mozilla/include/NSWorkspace+Utils.h',
            '../third_party/mozilla/include/NSWorkspace+Utils.m',
          ],
          'include_dirs': [
            '../third_party/GTM',
            '../third_party/GTM/AppKit',
          ],
          'link_settings': {
            'libraries': [
              '$(SDKROOT)/System/Library/Frameworks/SecurityInterface.framework',
              '$(SDKROOT)/System/Library/Frameworks/QuartzCore.framework',
            ],
          },
          'actions': [
            {
              # This action is used to extract the localization data from xib
              # files and generate table for the ui localizer from it.
              'variables': {
                'xib_localizer_tool_path':
                    '<(DEPTH)/build/mac/generate_localizer',
                'xib_files_to_scan': [
                  # The xib that need localization
                  'app/nibs/BookmarkBar.xib',
                  'app/nibs/BookmarkEditor.xib',
                  'app/nibs/BookmarkNameFolder.xib',
                  'app/nibs/MainMenu.xib',
                  'app/nibs/TabView.xib',
                  'app/nibs/Toolbar.xib',
                  # TODO(tvl): add other xibs as needed
                ],
              },
              'action_name': 'process_bookmark_bar_xib',
              'process_outputs_as_sources': 1,
              'inputs': [
                '<(xib_localizer_tool_path)',
                '<@(xib_files_to_scan)',
              ],
              'outputs': [
                '<(INTERMEDIATE_DIR)/ui_localizer_table.h',
              ],
              'action': ['<(xib_localizer_tool_path)',
                          '<@(_outputs)',
                          '<@(xib_files_to_scan)'],
            },
          ],
        }],
        ['OS=="win"', {
          'defines': [
            '__STD_C',
            '_CRT_SECURE_NO_DEPRECATE',
            '_SCL_SECURE_NO_DEPRECATE',
          ],
          'include_dirs': [
            'third_party/wtl/include',
          ],
          'dependencies': [
            '../google_update/google_update.gyp:google_update',
            'installer/installer.gyp:installer_util',
            '../third_party/cld/cld.gyp:cld',
            '../views/views.gyp:views',
            '../gears/gears.gyp:gears',
          ],
          'export_dependent_settings': [
            '../views/views.gyp:views',
          ],
          'sources': [
            # Using built-in rule in vstudio for midl.
            'browser/history/history_indexer.idl',
          ],
          'sources!': [
            'browser/history/history_publisher_none.cc',
            'browser/password_manager/password_store_gnome.h',
            'browser/password_manager/password_store_gnome.cc',
            'browser/password_manager/password_store_kwallet.h',
            'browser/password_manager/password_store_kwallet.cc',
            'browser/views/compact_navigation_bar.cc',
            'browser/views/compact_navigation_bar.h',
            'browser/views/frame/status_area_view.cc',
            'browser/views/frame/status_area_view.h',
            'browser/views/new_browser_window_widget.cc',
            'browser/views/new_browser_window_widget.h',
            'browser/views/panel_controller.cc',
            'browser/views/panel_controller.h',
            'browser/views/panels/panel_scroller.cc',
            'browser/views/panels/panel_scroller.h',
            'browser/views/panels/panel_scroller_container.cc',
            'browser/views/panels/panel_scroller_container.h',
            'browser/views/panels/panel_scroller_header.cc',
            'browser/views/panels/panel_scroller_header.h',
            'browser/views/tabs/grid.cc',
            'browser/views/tabs/grid.h',
            'browser/views/tabs/tab_overview_cell.cc',
            'browser/views/tabs/tab_overview_cell.h',
            'browser/views/tabs/tab_overview_container.cc',
            'browser/views/tabs/tab_overview_container.h',
            'browser/views/tabs/tab_overview_controller.cc',
            'browser/views/tabs/tab_overview_controller.h',
            'browser/views/tabs/tab_overview_drag_controller.cc',
            'browser/views/tabs/tab_overview_drag_controller.h',
            'browser/views/tabs/tab_overview_grid.cc',
            'browser/views/tabs/tab_overview_grid.h',
            'browser/views/tabs/tab_overview_message_listener.cc',
            'browser/views/tabs/tab_overview_message_listener.h',
            'browser/views/tabs/tab_overview_types.cc',
            'browser/views/tabs/tab_overview_types.h',
          ],
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
            },
          },
        }, {  # 'OS!="win"
          'sources/': [
            # Exclude all of hang_monitor.
            ['exclude', '^browser/hang_monitor/'],

            # Exclude parts of password_manager.
            ['exclude', '^browser/password_manager/ie7_password\\.cc$'],

            # Exclude most of printing.
            ['exclude', '^browser/printing/'],
            ['include', '^browser/printing/page_(number|range|setup)\\.cc$'],

            # Exclude all of rlz.
            ['exclude', '^browser/rlz/'],

            # Exclude all of views.
            ['exclude', '^browser/views/'],
          ],
          'conditions': [
            ['toolkit_views==1',{
              'sources/': [
                ['include', '^browser/dock_info_gtk.cc'],
                ['include', '^browser/dock_info.cc'],
                ['include', '^browser/dock_info.h'],
                ['include', '^browser/extensions/'],
                ['include', '^browser/views/accelerator_table_gtk.cc'],
                ['include', '^browser/views/accelerator_table_gtk.h'],
                ['include', '^browser/views/autocomplete/autocomplete_popup_contents_view.cc'],
                ['include', '^browser/views/autocomplete/autocomplete_popup_contents_view.h'],
                ['include', '^browser/views/autocomplete/autocomplete_popup_gtk.cc'],
                ['include', '^browser/views/autocomplete/autocomplete_popup_gtk.h'],
                ['include', '^browser/views/bookmark_bar_view.cc'],
                ['include', '^browser/views/bookmark_bar_view.h'],
                ['include', '^browser/views/bookmark_context_menu.cc'],
                ['include', '^browser/views/bookmark_context_menu.h'],
                ['include', '^browser/views/bookmark_menu_button.cc'],
                ['include', '^browser/views/bookmark_menu_button.h'],
                ['include', '^browser/views/bookmark_menu_controller_views.cc'],
                ['include', '^browser/views/browser_bubble_gtk.cc'],
                ['include', '^browser/views/browser_bubble.cc'],
                ['include', '^browser/views/browser_bubble.h'],
                ['include', '^browser/views/chrome_views_delegate.cc'],
                ['include', '^browser/views/clear_browsing_data.cc'],
                ['include', '^browser/views/clear_browsing_data.h'],
                ['include', '^browser/views/dialog_stubs_gtk.cc'],
                ['include', '^browser/views/download_item_view.cc'],
                ['include', '^browser/views/download_item_view.h'],
                ['include', '^browser/views/download_shelf_view.cc'],
                ['include', '^browser/views/download_shelf_view.h'],
                ['include', '^browser/views/dragged_tab_controller.cc'],
                ['include', '^browser/views/dragged_tab_controller.h'],
                ['include', '^browser/views/event_utils.cc'],
                ['include', '^browser/views/event_utils.h'],
                ['include', '^browser/views/extensions/extension_shelf.cc'],
                ['include', '^browser/views/extensions/extension_shelf.h'],
                ['include', '^browser/views/extensions/extension_view.cc'],
                ['include', '^browser/views/extensions/extension_view.h'],
                ['include', '^browser/views/extension_view.cc'],
                ['include', '^browser/views/extension_view.h'],
                ['include', '^browser/views/find_bar_view.cc'],
                ['include', '^browser/views/find_bar_view.h'],
                ['include', '^browser/views/find_bar_win.cc'],
                ['include', '^browser/views/find_bar_win.h'],
                ['include', '^browser/views/go_button.cc'],
                ['include', '^browser/views/go_button.h'],
                ['include', '^browser/views/toolbar_star_toggle.h'],
                ['include', '^browser/views/toolbar_star_toggle.cc'],
                ['include', '^browser/views/frame/browser_view.cc'],
                ['include', '^browser/views/frame/browser_view.h'],
                ['include', '^browser/views/frame/browser_frame_gtk.cc'],
                ['include', '^browser/views/frame/browser_frame_gtk.h'],
                ['include', '^browser/views/frame/browser_root_view.cc'],
                ['include', '^browser/views/frame/browser_root_view.h'],
                ['include', '^browser/views/frame/opaque_browser_frame_view.cc'],
                ['include', '^browser/views/frame/opaque_browser_frame_view.h'],
                ['include', '^browser/views/infobars/*'],
                ['include', '^browser/views/info_bubble.cc'],
                ['include', '^browser/views/info_bubble.h'],
                ['include', '^browser/views/location_bar_view.cc'],
                ['include', '^browser/views/location_bar_view.h'],
                ['include', '^browser/views/page_info_window_view.cc'],
                # Not necessary unless you're trying to build ChromeOS+views.
                #['include', '^browser/views/panels/panel_scroller.cc'],
                #['include', '^browser/views/panels/panel_scroller.h'],
                #['include', '^browser/views/panels/panel_scroller_container.cc'],
                #['include', '^browser/views/panels/panel_scroller_container.h'],
                #['include', '^browser/views/panels/panel_scroller_header.cc'],
                #['include', '^browser/views/panels/panel_scroller_header.h'],
                ['include', '^browser/views/status_bubble_views.cc'],
                ['include', '^browser/views/status_bubble_views.h'],
                ['include', '^browser/views/tab_contents/native_tab_contents_container_gtk.cc'],
                ['include', '^browser/views/tab_contents/native_tab_contents_container_gtk.h'],
                ['include', '^browser/views/tab_contents/render_view_context_menu_win.cc'],
                ['include', '^browser/views/tab_contents/render_view_context_menu_win.h'],
                ['include', '^browser/views/tab_contents/tab_contents_container.cc'],
                ['include', '^browser/views/tab_contents/tab_contents_container.h'],
                ['include', '^browser/views/tab_contents/tab_contents_view_gtk.cc'],
                ['include', '^browser/views/tab_contents/tab_contents_view_gtk.h'],
                ['include', '^browser/views/tab_icon_view.cc'],
                ['include', '^browser/views/tab_icon_view.h'],
                ['include', '^browser/views/tabs/browser_tab_strip.cc'],
                ['include', '^browser/views/tabs/browser_tab_strip.h'],
                ['include', '^browser/views/tabs/dragged_tab_controller.cc'],
                ['include', '^browser/views/tabs/dragged_tab_controller.h'],
                ['include', '^browser/views/tabs/dragged_tab_view.cc'],
                ['include', '^browser/views/tabs/dragged_tab_view.h'],
                ['include', '^browser/views/tabs/native_view_photobooth.h'],
                ['include', '^browser/views/tabs/native_view_photobooth_gtk.cc'],
                ['include', '^browser/views/tabs/native_view_photobooth_gtk.h'],
                ['include', '^browser/views/tabs/tab.cc'],
                ['include', '^browser/views/tabs/tab.h'],
                ['include', '^browser/views/tabs/tab_2.cc'],
                ['include', '^browser/views/tabs/tab_2.h'],
                ['include', '^browser/views/tabs/tab_renderer.cc'],
                ['include', '^browser/views/tabs/tab_renderer.h'],
                ['include', '^browser/views/tabs/tab_strip.cc'],
                ['include', '^browser/views/tabs/tab_strip.h'],
                ['include', '^browser/views/tabs/tab_strip_2.cc'],
                ['include', '^browser/views/tabs/tab_strip_2.h'],
                ['include', '^browser/views/toolbar_view.cc'],
                ['include', '^browser/views/toolbar_view.h'],
                ['include', '^browser/window_sizer.cc'],
                ['include', '^browser/window_sizer.h'],

                # Exclude all of browser/gtk, then include the things we want.
                ['exclude', '^browser/gtk'],
                ['include', '^browser/gtk/autocomplete_edit_gtk.cc'],
                ['include', '^browser/gtk/autocomplete_edit_gtk.h'],
                ['include', '^browser/gtk/clear_browsing_data_dialog_gtk.cc'],
                ['include', '^browser/gtk/clear_browsing_data_dialog_gtk.h'],
                ['include', '^browser/gtk/dialogs_gtk.cc'],
                ['include', '^browser/gtk/dialogs_gtk.h'],
                ['include', '^browser/gtk/download_started_animation_gtk.cc'],
                ['include', '^browser/gtk/download_started_animation_gtk.h'],
                ['include', '^browser/gtk/edit_search_engine_dialog.cc'],
                ['include', '^browser/gtk/edit_search_engine_dialog.h'],
                ['include', '^browser/gtk/first_run_dialog.cc'],
                ['include', '^browser/gtk/first_run_dialog.h'],
                ['include', '^browser/gtk/focus_store_gtk.cc'],
                ['include', '^browser/gtk/focus_store_gtk.h'],
                ['include', '^browser/gtk/gtk_chrome_link_button.cc'],
                ['include', '^browser/gtk/gtk_chrome_link_button.h'],
                ['include', '^browser/gtk/hung_renderer_dialog_gtk.cc'],
                ['include', '^browser/gtk/hung_renderer_dialog_gtk.h'],
                ['include', '^browser/gtk/import_dialog_gtk.cc'],
                ['include', '^browser/gtk/import_dialog_gtk.h'],
                ['include', '^browser/gtk/import_progress_dialog_gtk.cc'],
                ['include', '^browser/gtk/import_progress_dialog_gtk.h'],
                ['include', '^browser/gtk/import_lock_dialog_gtk.cc'],
                ['include', '^browser/gtk/import_lock_dialog_gtk.h'],
                ['include', '^browser/gtk/keyword_editor_view.cc'],
                ['include', '^browser/gtk/keyword_editor_view.h'],
                ['include', '^browser/gtk/list_store_favicon_loader.cc'],
                ['include', '^browser/gtk/list_store_favicon_loader.h'],
                ['include', '^browser/gtk/menu_gtk.cc'],
                ['include', '^browser/gtk/menu_gtk.h'],
                ['include', '^browser/gtk/tab_contents_drag_source.cc'],
                ['include', '^browser/gtk/tab_contents_drag_source.h'],
                ['include', '^browser/gtk/view_id_util.cc'],
                ['include', '^browser/gtk/view_id_util.h'],

                # Other excluded stuff.
                ['exclude', '^browser/autocomplete/autocomplete_popup_view_gtk.cc'],
                ['exclude', '^browser/autocomplete/autocomplete_popup_view_gtk.h'],
                ['exclude', '^browser/browser_theme_provider_gtk.cc'],
                ['exclude', '^browser/extensions/external_registry_extension_provider_win.cc'],
                ['exclude', '^browser/tab_contents/tab_contents_view_gtk.cc'],
                ['exclude', '^browser/tab_contents/tab_contents_view_gtk.h'],
                ['exclude', '^browser/tab_contents/render_view_context_menu_gtk.cc'],
                ['exclude', '^browser/tab_contents/render_view_context_menu_gtk.h'],
              ],
            }],
            ['chromeos==1',{
              'dependencies': [
                  '../third_party/protobuf2/protobuf.gyp:protobuf',
                  '../third_party/protobuf2/protobuf.gyp:protoc',
               ],
              'actions': [
                {
                  'action_name': 'my_proto',
                  'inputs': [
                    '<(PRODUCT_DIR)/<(EXECUTABLE_PREFIX)protoc<(EXECUTABLE_SUFFIX)',
                    'browser/metrics/system_metrics.proto',
                  ],
                  'outputs': [
                    '<(INTERMEDIATE_DIR)/chrome/browser/metrics/system_metrics.pb.cc',
                    '<(INTERMEDIATE_DIR)/chrome/browser/metrics/system_metrics.pb.h',
                  ],
                  'dependencies': [
                    '../third_party/protobuf2/protobuf.gyp:protoc',
                  ],
                  'action': [
                    '<(PRODUCT_DIR)/<(EXECUTABLE_PREFIX)protoc<(EXECUTABLE_SUFFIX)',
                    'browser/metrics/system_metrics.proto',
                    '--cpp_out=<(INTERMEDIATE_DIR)/chrome',
                  ],
                },
              ],
              'sources': [
                '<(INTERMEDIATE_DIR)/chrome/browser/metrics/system_metrics.pb.h',
                '<(INTERMEDIATE_DIR)/chrome/browser/metrics/system_metrics.pb.cc',
                'browser/metrics/system_metrics_logger.h',
                'browser/metrics/system_metrics_logger_impl.cc',
                'browser/metrics/system_metrics_logger_impl.h',
              ],
              'include_dirs': [
                '<(INTERMEDIATE_DIR)',
                '<(INTERMEDIATE_DIR)/chrome',
              ],
              'sources/': [
                ['include', 'browser/views/compact_navigation_bar.cc'],
                ['include', 'browser/views/compact_navigation_bar.h'],
                ['include', 'browser/views/frame/status_area_view.cc'],
                ['include', 'browser/views/frame/status_area_view.h'],
                ['include', 'browser/views/new_browser_window_widget.cc'],
                ['include', 'browser/views/new_browser_window_widget.h'],
                ['include', 'browser/views/panel_controller.cc'],
                ['include', 'browser/views/panel_controller.h'],
                ['include', 'browser/views/panels/panel_container.cc'],
                ['include', 'browser/views/panels/panel_container.h'],
                ['include', 'browser/views/panels/panel_scroller.cc'],
                ['include', 'browser/views/panels/panel_scroller.h'],
                ['include', 'browser/views/panels/panel_scroller_header.cc'],
                ['include', 'browser/views/panels/panel_scroller_header.h'],
                ['include', 'browser/views/tabs/grid.cc'],
                ['include', 'browser/views/tabs/grid.h'],
                ['include', 'browser/views/tabs/tab_overview_cell.cc'],
                ['include', 'browser/views/tabs/tab_overview_cell.h'],
                ['include', 'browser/views/tabs/tab_overview_container.cc'],
                ['include', 'browser/views/tabs/tab_overview_container.h'],
                ['include', 'browser/views/tabs/tab_overview_controller.cc'],
                ['include', 'browser/views/tabs/tab_overview_controller.h'],
                ['include', 'browser/views/tabs/tab_overview_drag_controller.cc'],
                ['include', 'browser/views/tabs/tab_overview_drag_controller.h'],
                ['include', 'browser/views/tabs/tab_overview_grid.cc'],
                ['include', 'browser/views/tabs/tab_overview_grid.h'],
                ['include', 'browser/views/tabs/tab_overview_message_listener.cc'],
                ['include', 'browser/views/tabs/tab_overview_message_listener.h'],
                ['include', 'browser/views/tabs/tab_overview_types.cc'],
                ['include', 'browser/views/tabs/tab_overview_types.h'],
              ],
            }],
          ],
          # Exclude files that should be excluded for all non-Windows platforms.
          'sources!': [
            'browser/autocomplete/autocomplete_accessibility.cc',
            'browser/bookmarks/bookmark_menu_controller.cc',
            'browser/bookmarks/bookmark_menu_controller.h',
            'browser/browser_accessibility.cc',
            'browser/browser_accessibility_manager.cc',
            'browser/extensions/extension_creator.cc',
            'browser/dom_ui/html_dialog_contents.cc',
            'browser/encoding_menu_controller_delegate.cc',
            'browser/external_tab_container.cc',
            'browser/google_update.cc',
            'browser/history/history_indexer.idl',
            'browser/history_tab_ui.cc',
            'browser/history_view.cc',
            'browser/ime_input.cc',
            'browser/importer/ie_importer.cc',
            'browser/jumplist.cc',
            'browser/memory_details.cc',
            'browser/modal_html_dialog_delegate.cc',
            'browser/sandbox_policy.cc',
            'browser/tab_contents/web_drag_source.cc',
            'browser/tab_contents/web_drop_target.cc',
          ],
        }],
      ],
    },
    {
      'target_name': 'debugger',
      'type': '<(library)',
      'msvs_guid': '57823D8C-A317-4713-9125-2C91FDFD12D6',
      'dependencies': [
        'chrome_resources',
        'chrome_strings',
        'theme_resources',
        '../skia/skia.gyp:skia',
        '../third_party/icu38/icu38.gyp:icui18n',
        '../third_party/icu38/icu38.gyp:icuuc',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'browser/debugger/debugger_remote_service.cc',
        'browser/debugger/debugger_remote_service.h',
        'browser/debugger/debugger_wrapper.cc',
        'browser/debugger/debugger_wrapper.h',
        'browser/debugger/devtools_client_host.h',
        'browser/debugger/devtools_manager.cc',
        'browser/debugger/devtools_manager.h',
        'browser/debugger/devtools_protocol_handler.cc',
        'browser/debugger/devtools_protocol_handler.h',
        'browser/debugger/devtools_remote.h',
        'browser/debugger/devtools_remote_listen_socket.cc',
        'browser/debugger/devtools_remote_listen_socket.h',
        'browser/debugger/devtools_remote_message.cc',
        'browser/debugger/devtools_remote_message.h',
        'browser/debugger/devtools_remote_service.cc',
        'browser/debugger/devtools_remote_service.h',
        'browser/debugger/devtools_window.cc',
        'browser/debugger/devtools_window.h',
        'browser/debugger/inspectable_tab_proxy.cc',
        'browser/debugger/inspectable_tab_proxy.h',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
      ],
    },
    {
      'target_name': 'plugin',
      'type': '<(library)',
      'msvs_guid': '20A560A0-2CD0-4D9E-A58B-1F24B99C087A',
      'dependencies': [
        'common',
        'chrome_resources',
        'chrome_strings',
        '../media/media.gyp:media',
        '../skia/skia.gyp:skia',
        '../third_party/icu38/icu38.gyp:icui18n',
        '../third_party/icu38/icu38.gyp:icuuc',
        '../third_party/libxml/libxml.gyp:libxml',
        '../third_party/npapi/npapi.gyp:npapi',
        'third_party/hunspell/hunspell.gyp:hunspell',
        '../webkit/webkit.gyp:glue',
      ],
      'include_dirs': [
        '<(INTERMEDIATE_DIR)',
      ],
      'sources': [
        # All .cc, .h, .m, and .mm files under plugins except for tests and
        # mocks.
        'plugin/chrome_plugin_host.cc',
        'plugin/chrome_plugin_host.h',
        'plugin/npobject_proxy.cc',
        'plugin/npobject_proxy.h',
        'plugin/npobject_stub.cc',
        'plugin/npobject_stub.h',
        'plugin/npobject_util.cc',
        'plugin/npobject_util.h',
        'plugin/plugin_channel.cc',
        'plugin/plugin_channel.h',
        'plugin/plugin_channel_base.cc',
        'plugin/plugin_channel_base.h',
        'plugin/plugin_main.cc',
        'plugin/plugin_thread.cc',
        'plugin/plugin_thread.h',
        'plugin/webplugin_delegate_stub.cc',
        'plugin/webplugin_delegate_stub.h',
        'plugin/webplugin_proxy.cc',
        'plugin/webplugin_proxy.h',

        'tools/build/win/precompiled.cc',
        'tools/build/win/precompiled.h',
      ],
      'configurations': {
        'Debug': {
          'msvs_precompiled_header': 'tools/build/win/precompiled.h',
          'msvs_precompiled_source': 'tools/build/win/precompiled.cc',
        },
      },
      # These are layered in conditionals in the event other platforms
      # end up using this module as well.
      'conditions': [
        ['OS=="win"', {
          'defines': [
            '__STD_C',
            '_CRT_SECURE_NO_DEPRECATE',
            '_SCL_SECURE_NO_DEPRECATE',
          ],
          'include_dirs': [
            'third_party/wtl/include',
          ],
        },],
      ],
    },
    {
      'target_name': 'renderer',
      'type': '<(library)',
      'msvs_guid': '9301A569-5D2B-4D11-9332-B1E30AEACB8D',
      'dependencies': [
        'common',
        'plugin',
        'chrome_resources',
        'chrome_strings',
        '../printing/printing.gyp:printing',
        '../skia/skia.gyp:skia',
        '../third_party/icu38/icu38.gyp:icui18n',
        '../third_party/icu38/icu38.gyp:icuuc',
        '../third_party/npapi/npapi.gyp:npapi',
        '../webkit/webkit.gyp:glue',
        '../webkit/webkit.gyp:webkit',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        # TODO(jrg): to link ipc_tests, these files need to be in renderer.a.
        # But app/ is the wrong directory for them.
        # Better is to remove the dep of *_tests on renderer, but in the
        # short term I'd like the build to work.
        'renderer/automation/dom_automation_controller.cc',
        'renderer/automation/dom_automation_controller.h',
        'renderer/extensions/bindings_utils.cc',
        'renderer/extensions/bindings_utils.h',
        'renderer/extensions/event_bindings.cc',
        'renderer/extensions/event_bindings.h',
        'renderer/extensions/extension_process_bindings.cc',
        'renderer/extensions/extension_process_bindings.h',
        'renderer/extensions/renderer_extension_bindings.cc',
        'renderer/extensions/renderer_extension_bindings.h',
        'renderer/loadtimes_extension_bindings.h',
        'renderer/loadtimes_extension_bindings.cc',
        'renderer/media/audio_renderer_impl.cc',
        'renderer/media/audio_renderer_impl.h',
        'renderer/net/render_dns_master.cc',
        'renderer/net/render_dns_master.h',
        'renderer/net/render_dns_queue.cc',
        'renderer/net/render_dns_queue.h',
        'renderer/resources/event_bindings.js',
        'renderer/resources/extension_process_bindings.js',
        'renderer/resources/greasemonkey_api.js',
        'renderer/resources/json_schema.js',
        'renderer/resources/renderer_extension_bindings.js',
        'renderer/about_handler.cc',
        'renderer/about_handler.h',
        'renderer/audio_message_filter.cc',
        'renderer/audio_message_filter.h',
        'renderer/devtools_agent.cc',
        'renderer/devtools_agent.h',
        'renderer/devtools_agent_filter.cc',
        'renderer/devtools_agent_filter.h',
        'renderer/devtools_client.cc',
        'renderer/devtools_client.h',
        'renderer/dom_ui_bindings.cc',
        'renderer/dom_ui_bindings.h',
        'renderer/extension_groups.h',
        'renderer/external_host_bindings.cc',
        'renderer/external_host_bindings.h',
        'renderer/external_extension.cc',
        'renderer/external_extension.h',
        'renderer/js_only_v8_extensions.cc',
        'renderer/js_only_v8_extensions.h',
        'renderer/localized_error.cc',
        'renderer/localized_error.h',
        'renderer/navigation_state.h',
        'renderer/plugin_channel_host.cc',
        'renderer/plugin_channel_host.h',
        'renderer/print_web_view_helper.cc',
        'renderer/print_web_view_helper.h',
        'renderer/print_web_view_helper_linux.cc',
        'renderer/print_web_view_helper_mac.cc',
        'renderer/print_web_view_helper_win.cc',
        'renderer/render_process.cc',
        'renderer/render_process.h',
        'renderer/render_thread.cc',
        'renderer/render_thread.h',
        'renderer/render_view.cc',
        'renderer/render_view_linux.cc',
        'renderer/render_view.h',
        'renderer/render_widget.cc',
        'renderer/render_widget.h',
        'renderer/renderer_glue.cc',
        'renderer/renderer_histogram_snapshots.cc',
        'renderer/renderer_histogram_snapshots.h',
        'renderer/renderer_main.cc',
        'renderer/renderer_main_platform_delegate.h',
        'renderer/renderer_main_platform_delegate_linux.cc',
        'renderer/renderer_main_platform_delegate_mac.mm',
        'renderer/renderer_main_platform_delegate_win.cc',
        'renderer/renderer_sandbox_support_linux.cc',
        'renderer/renderer_sandbox_support_linux.h',
        'renderer/renderer_webkitclient_impl.cc',
        'renderer/renderer_webkitclient_impl.h',
        'renderer/renderer_webstoragearea_impl.cc',
        'renderer/renderer_webstoragearea_impl.h',
        'renderer/renderer_webstoragenamespace_impl.cc',
        'renderer/renderer_webstoragenamespace_impl.h',
        'renderer/user_script_slave.cc',
        'renderer/user_script_slave.h',
        'renderer/visitedlink_slave.cc',
        'renderer/visitedlink_slave.h',
        'renderer/webplugin_delegate_proxy.cc',
        'renderer/webplugin_delegate_proxy.h',
        'renderer/webworker_proxy.cc',
        'renderer/webworker_proxy.h',

        'tools/build/win/precompiled_wtl.cc',
        'tools/build/win/precompiled_wtl.h',
      ],
      'link_settings': {
        'mac_bundle_resources': [
          'renderer/renderer.sb',
        ],
      },
      'configurations': {
        'Debug': {
          'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
          'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
        },
      },
      'conditions': [
        # Linux-specific rules.
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
        # Windows-specific rules.
        ['OS=="win"', {
          'include_dirs': [
            'third_party/wtl/include',
          ],
        },],
      ],
    },
    {
      'target_name': 'utility',
      'type': '<(library)',
      'msvs_guid': '4D2B38E6-65FF-4F97-B88A-E441DF54EBF7',
      'dependencies': [
        '../base/base.gyp:base',
        '../skia/skia.gyp:skia',
      ],
      'sources': [
        'tools/build/win/precompiled.cc',
        'tools/build/win/precompiled.h',

        'utility/utility_main.cc',
        'utility/utility_thread.cc',
        'utility/utility_thread.h',
      ],
      'include_dirs': [
        '..',
      ],
      'configurations': {
        'Debug': {
          'msvs_precompiled_header': 'tools/build/win/precompiled.h',
          'msvs_precompiled_source': 'tools/build/win/precompiled.cc',
        },
      },
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
      ],
    },
    {
      'target_name': 'worker',
      'type': '<(library)',
      'msvs_guid': 'C78D02D0-A366-4EC6-A248-AA8E64C4BA18',
      'dependencies': [
        '../base/base.gyp:base',
        '../webkit/webkit.gyp:webkit',
      ],
      'sources': [
        'tools/build/win/precompiled.cc',
        'tools/build/win/precompiled.h',
        'worker/nativewebworker_impl.cc',
        'worker/nativewebworker_impl.h',
        'worker/nativewebworker_stub.cc',
        'worker/nativewebworker_stub.h',
        'worker/webworkerclient_proxy.cc',
        'worker/webworkerclient_proxy.h',
        'worker/worker_main.cc',
        'worker/worker_thread.cc',
        'worker/worker_thread.h',
        'worker/worker_webkitclient_impl.cc',
        'worker/worker_webkitclient_impl.h',
      ],
      'include_dirs': [
        '..',
      ],
      'configurations': {
        'Debug': {
          'msvs_precompiled_header': 'tools/build/win/precompiled.h',
          'msvs_precompiled_source': 'tools/build/win/precompiled.cc',
        },
      },
    },
    {
      'target_name': 'chrome',
      'type': 'executable',
      'mac_bundle': 1,
      'msvs_guid': '7B219FAA-E360-43C8-B341-804A94EEFFAC',
      'sources': [
        # All .cc, .h, .m, and .mm files under app except for tests.
        'app/breakpad_win.cc',
        'app/breakpad_win.h',
        'app/chrome_exe_main.cc',
        'app/chrome_exe_main.mm',
        'app/chrome_exe_main_gtk.cc',
        'app/chrome_exe_resource.h',
        'app/client_util.cc',
        'app/client_util.h',
        'app/google_update_client.cc',
        'app/google_update_client.h',
        'app/hard_error_handler_win.cc',
        'app/hard_error_handler_win.h',
        'app/scoped_ole_initializer.h',
      ],
      'dependencies': [
        '../build/util/support/support.gyp:*',
      ],
      'mac_bundle_resources': [
        # put any pdfs down in the sources block below so pdfsqueeze runs on
        # them.
        'app/nibs/About.xib',
        'app/nibs/BookmarkBar.xib',
        'app/nibs/BookmarkEditor.xib',
        'app/nibs/BookmarkNameFolder.xib',
        'app/nibs/BrowserWindow.xib',
        'app/nibs/ClearBrowsingData.xib',
        'app/nibs/DownloadItem.xib',
        'app/nibs/DownloadShelf.xib',
        'app/nibs/FindBar.xib',
        'app/nibs/FirstRunDialog.xib',
        'app/nibs/HungRendererDialog.xib',
        'app/nibs/HttpAuthLoginSheet.xib',
        'app/nibs/InfoBar.xib',
        'app/nibs/InfoBarContainer.xib',
        'app/nibs/ImportProgressDialog.xib',
        'app/nibs/MainMenu.xib',
        'app/nibs/PageInfo.xib',
        'app/nibs/Preferences.xib',
        'app/nibs/SaveAccessoryView.xib',
        'app/nibs/TabContents.xib',
        'app/nibs/TabView.xib',
        'app/nibs/Toolbar.xib',
        'app/theme/alert_small.png',
        'app/theme/back_Template.pdf',
        'app/theme/bookmark_bar_folder.png',
        'app/theme/chevron.png', # TODO(jrg): get (and use) a pdf version
        'app/theme/close_bar.pdf',
        'app/theme/close_bar_h.pdf',
        'app/theme/close_bar_p.pdf',
        'app/theme/downloads_favicon.png',
        'app/theme/forward_Template.pdf',
        'app/theme/frozen_tab.png',
        'app/theme/go_Template.pdf',
        'app/theme/home_Template.pdf',
        'app/theme/menu_chrome_rtl_Template.pdf',
        'app/theme/menu_chrome_Template.pdf',
        'app/theme/menu_page_rtl_Template.pdf',
        'app/theme/menu_page_Template.pdf',
        'app/theme/nav.pdf',
        'app/theme/newtab.pdf',
        'app/theme/o2_globe.png',
        'app/theme/o2_history.png',
        'app/theme/o2_more.png',
        'app/theme/o2_search.png',
        'app/theme/o2_star.png',
        'app/theme/otr_icon.pdf',
        'app/theme/pageinfo_bad.png',
        'app/theme/pageinfo_good.png',
        'app/theme/reload_Template.pdf',
        'app/theme/sadfavicon.png',
        'app/theme/sadtab.png',
        'app/theme/star_Template.pdf',
        'app/theme/starred.pdf',
        'app/theme/stop_Template.pdf',
        '../app/resources/throbber.png',
        'app/theme/throbber_waiting.png',
        'app/app-Info.plist',
      ],
      # TODO(mark): Come up with a fancier way to do this.  It should only
      # be necessary to list app-Info.plist once, not the three times it is
      # listed here.
      'mac_bundle_resources!': [
        'app/app-Info.plist',
      ],
      'xcode_settings': {
        'INFOPLIST_FILE': 'app/app-Info.plist',
      },
      'conditions': [
        ['OS=="linux"', {
          'actions': [
            {
              'action_name': 'manpage',
              'conditions': [
                [ 'branding == "Chrome"', {
                  'variables': {
                    'name': 'Google Chrome',
                    'filename': 'google-chrome',
                  },
                }, { # else branding!="Chrome"
                  'variables': {
                    'name': 'Chromium',
                    'filename': 'chromium-browser',
                  },
                }],
              ],
              'inputs': [
                'tools/build/linux/sed.sh',
                'app/resources/manpage.1.in',
              ],
              'outputs': [
                '<(PRODUCT_DIR)/<(filename).1',
              ],
              'action': [
                'tools/build/linux/sed.sh',
                'app/resources/manpage.1.in',
                '<@(_outputs)',
                '-e', 's/@@NAME@@/<(name)/',
                '-e', 's/@@FILENAME@@/<(filename)/',
              ],
              'message': 'Generating manpage'
            },
          ],

          'conditions': [
            # All Chrome builds have breakpad symbols, but only process the
            # symbols from official builds.
            ['branding=="Chrome" and buildtype=="Official"', {
              'actions': [
                {
                  'action_name': 'dump_symbols',
                  'inputs': [
                    '<(DEPTH)/build/linux/dump_app_syms',
                    '<(DEPTH)/build/linux/dump_signature.py',
                    '<(PRODUCT_DIR)/dump_syms',
                    '<(PRODUCT_DIR)/chrome',
                  ],
                  'outputs': [
                    '<(PRODUCT_DIR)/chrome.breakpad',
                  ],
                  'action': ['<(DEPTH)/build/linux/dump_app_syms',
                             '<(PRODUCT_DIR)/dump_syms',
                             '<(PRODUCT_DIR)/chrome', '<@(_outputs)'],
                },
              ],
            }],
          ],
          'dependencies': [
            # On Linux, link the dependencies (libraries) that make up actual
            # Chromium functionality directly into the executable.
            '<@(chromium_dependencies)',
            # Needed for chrome_dll_main.cc #include of gtk/gtk.h
            '../build/linux/system.gyp:gtk',
            # Needed for chrome_dll_main.cc use of g_thread_init
            '../build/linux/system.gyp:gthread',
          ],
          'sources': [
            'app/chrome_dll_main.cc',
            'app/chrome_dll_resource.h',
          ],
          'copies': [
            {
              'destination': '<(PRODUCT_DIR)',
              'files': ['<(INTERMEDIATE_DIR)/repack/chrome.pak',
                        'tools/build/linux/chrome-wrapper',
                        '../third_party/xdg-utils/scripts/xdg-settings',
                        ],
              # The wrapper script above may need to generate a .desktop file,
              # which requires an icon. So, copy one next to the script.
              'conditions': [
                ['branding=="Chrome"', {
                  'files': ['app/theme/google_chrome/product_logo_48.png']
                }, { # else: 'branding!="Chrome"
                  'files': ['app/theme/chromium/product_logo_48.png']
                }],
              ],
            },
            {
              'destination': '<(PRODUCT_DIR)/locales',
              'files': [
                '>!@(<(repack_locales_cmd) -o -g \'<(grit_out_dir)\' -s \'<(SHARED_INTERMEDIATE_DIR)\' -x \'<(INTERMEDIATE_DIR)\' <(locales))',
              ],
            },
            {
              'destination': '<(PRODUCT_DIR)/themes',
              'files': ['<(INTERMEDIATE_DIR)/repack/default.pak'],
            },
          ],
        }],
        ['OS=="linux" and (toolkit_views==1 or chromeos==1)', {
          'dependencies': [
            '../views/views.gyp:views',
          ],
        }],
        ['OS=="mac"', {
          # 'branding' is a variable defined in common.gypi
          # (e.g. "Chromium", "Chrome")
          'conditions': [
            ['branding=="Chrome"', {
              'mac_bundle_resources': ['app/theme/google_chrome/app.icns'],
              'copies': [
                {
                  'destination': '<(PRODUCT_DIR)/<(mac_product_name).app/Contents/MacOS',
                  'files': [
                    '../third_party/ffmpeg/binaries/chrome/libavcodec.52.dylib',
                    '../third_party/ffmpeg/binaries/chrome/libavformat.52.dylib',
                    '../third_party/ffmpeg/binaries/chrome/libavutil.50.dylib',
                  ],
                },
              ],
            }, {  # else: 'branding!="Chrome"
              'mac_bundle_resources': ['app/theme/chromium/app.icns'],
              'copies': [
                {
                  'destination': '<(PRODUCT_DIR)/<(mac_product_name).app/Contents/MacOS',
                  'files': [
                    '../third_party/ffmpeg/binaries/chromium/libavcodec.52.dylib',
                    '../third_party/ffmpeg/binaries/chromium/libavformat.52.dylib',
                    '../third_party/ffmpeg/binaries/chromium/libavutil.50.dylib',
                  ],
                },
              ],
            }],
            ['mac_breakpad==1', {
              'variables': {
                # A real .dSYM is needed for dump_syms to operate on.
                'mac_real_dsym': 1,
              },
              'dependencies': [
                '../breakpad/breakpad.gyp:dump_syms',
                '../breakpad/breakpad.gyp:symupload',
              ],
              'copies': [
                {
                  'destination': '<(PRODUCT_DIR)/<(mac_product_name).app/Contents/Resources/',
                  'files': ['<(PRODUCT_DIR)/crash_inspector', '<(PRODUCT_DIR)/crash_report_sender.app'],
                },
              ],
              'postbuilds': [
                {
                  'postbuild_name': 'Dump Symbols',
                  'action': ['<(DEPTH)/build/mac/dump_app_syms',
                             '<(branding)'],
                },
              ],
            }],  # mac_breakpad
            ['mac_keystone==1', {
              'copies': [
                {
                  'destination': '<(PRODUCT_DIR)/<(mac_product_name).app/Contents/Frameworks/',
                  'files': ['../third_party/googlemac/Releases/Keystone/KeystoneRegistration.framework'],
                },
              ],
            }],  # mac_keystone
          ],
          'product_name': '<(mac_product_name)',
          'xcode_settings': {
            # chrome/app/app-Info.plist has:
            #   CFBundleIdentifier of CHROMIUM_BUNDLE_ID
            #   CFBundleName of CHROMIUM_SHORT_NAME
            # Xcode then replaces these values with the branded values we set
            # as settings on the target.
            'CHROMIUM_BUNDLE_ID': '<(mac_bundle_id)',
            'CHROMIUM_CREATOR': '<(mac_creator)',
            'CHROMIUM_SHORT_NAME': '<(branding)',
          },
          'mac_bundle_resources': [
            '<(PRODUCT_DIR)/<(mac_product_name) Helper.app',
          ],
          'dependencies': [
            'helper_app',
            # Bring in pdfsqueeze and run it on all pdfs
            '../build/temp_gyp/pdfsqueeze.gyp:pdfsqueeze',
          ],
          'rules': [
            {
              'rule_name': 'pdfsqueeze',
              'extension': 'pdf',
              'inputs': [
                '<(PRODUCT_DIR)/pdfsqueeze',
              ],
              'outputs': [
                '<(INTERMEDIATE_DIR)/pdfsqueeze/<(RULE_INPUT_ROOT).pdf',
              ],
              'action': ['<(PRODUCT_DIR)/pdfsqueeze', '<(RULE_INPUT_PATH)', '<@(_outputs)'],
              'message': 'Running pdfsqueeze on <(RULE_INPUT_PATH)',
            },
          ],
          'copies': [
            {
              'destination': '<(PRODUCT_DIR)/<(mac_product_name).app/Contents/Frameworks',
              'files': ['<(PRODUCT_DIR)/<(mac_product_name) Framework.framework'],
            },
            {
              # Copy web inspector resources to the Contents/Resources folder.
              'destination': '<(PRODUCT_DIR)/<(mac_product_name).app/Contents/Resources',
              'files': ['<(PRODUCT_DIR)/resources/inspector/'],
            },
          ],
          'postbuilds': [
            {
              # Modify the Info.plist as needed.  The script explains why this
              # is needed.  This is also done in the helper_app target.
              'postbuild_name': 'Tweak Info.plist',
              'action': ['<(DEPTH)/build/mac/tweak_app_infoplist',
                         '-b<(mac_breakpad)',
                         '-k<(mac_keystone)',
                         '-s1',  # Include Subversion information
                         '<(branding)'],
            },
            {
              'postbuild_name': 'Tweak Mac lproj folders',
              'action': ['app/tweak_mac_lproj_folders'],
            },
          ],  # postbuilds
        }, { # else: OS != "mac"
          'conditions': [
            ['branding=="Chrome"', {
              'product_name': 'chrome'
            }, {  # else: Branding!="Chrome"
              # TODO:  change to:
              #   'product_name': 'chromium'
              # whenever we convert the rest of the infrastructure
              # (buildbots etc.) to use "gyp -Dbranding=Chrome".
              # NOTE: chrome/app/theme/chromium/BRANDING and
              # chrome/app/theme/google_chrome/BRANDING have the short names,
              # etc.; should we try to extract from there instead?
              'product_name': 'chrome'
            }],
          ],
        }],
        ['OS=="linux"', {
          'conditions': [
            ['branding=="Chrome"', {
              'dependencies': [
                'installer/installer.gyp:installer_util',
              ],
            }],
          ],
          'dependencies': [
            '../sandbox/sandbox.gyp:sandbox',
          ],
        }],
        ['OS=="mac" or OS=="win"', {
          'dependencies': [
            # On Windows and Mac, make sure we've built chrome_dll, which
            # contains all of the library code with Chromium functionality.
            'chrome_dll',
          ],
        }],
        ['OS=="win"', {
          'dependencies': [
            'installer/installer.gyp:installer_util',
            'installer/installer.gyp:installer_util_strings',
            '../breakpad/breakpad.gyp:breakpad_handler',
            '../breakpad/breakpad.gyp:breakpad_sender',
            '../sandbox/sandbox.gyp:sandbox',
            '../views/views.gyp:views',
            'worker',
            'app/locales/locales.gyp:*',
          ],
          'sources': [
            'app/chrome_exe.rc',
            'app/chrome_exe_version.rc.version',
          ],
          'include_dirs': [
            '<(SHARED_INTERMEDIATE_DIR)/chrome',
          ],
          'msvs_settings': {
            'VCLinkerTool': {
              'DelayLoadDLLs': [
                'dbghelp.dll',
                'dwmapi.dll',
                'uxtheme.dll',
                'ole32.dll',
                'oleaut32.dll',
              ],
              'ImportLibrary': '$(OutDir)\\lib\\chrome_exe.lib',
              'ProgramDatabaseFile': '$(OutDir)\\chrome_exe.pdb',
              # Set /SUBSYSTEM:WINDOWS for chrome.exe itself.
              'SubSystem': '2',
            },
            'VCManifestTool': {
              'AdditionalManifestFiles': '$(ProjectDir)\\app\\chrome.exe.manifest',
            },
          },
          'actions': [
            {
              'action_name': 'version',
              'variables': {
                'version_py': 'tools/build/version.py',
                'version_path': 'VERSION',
                'template_input_path': 'app/chrome_exe_version.rc.version',
              },
              'conditions': [
                [ 'branding == "Chrome"', {
                  'variables': {
                     'branding_path': 'app/theme/google_chrome/BRANDING',
                  },
                }, { # else branding!="Chrome"
                  'variables': {
                     'branding_path': 'app/theme/chromium/BRANDING',
                  },
                }],
              ],
              'inputs': [
                '<(template_input_path)',
                '<(version_path)',
                '<(branding_path)',
              ],
              'outputs': [
                '<(SHARED_INTERMEDIATE_DIR)/chrome/chrome_exe_version.rc',
              ],
              'action': [
                'python',
                '<(version_py)',
                '-f', '<(version_path)',
                '-f', '<(branding_path)',
                '<(template_input_path)',
                '<@(_outputs)',
              ],
              'process_outputs_as_sources': 1,
              'message': 'Generating version information in <(_outputs)'
            },
            {
              'action_name': 'first_run',
              'inputs': [
                  'app/FirstRun',
              ],
              'outputs': [
                  '<(PRODUCT_DIR)/First Run',
              ],
              'action': ['cp', '-f', '<@(_inputs)', '<@(_outputs)'],
              'message': 'Copy first run complete sentinel file',
            },
          ],
        }, {  # 'OS!="win"
          'variables': {
            'repack_path': '../tools/data_pack/repack.py',
          },
          'actions': [
            {
              'action_name': 'repack_chrome',
              'variables': {
                'pak_inputs': [
                  '<(grit_out_dir)/browser_resources.pak',
                  '<(grit_out_dir)/common_resources.pak',
                  '<(grit_out_dir)/renderer_resources.pak',
                  '<(SHARED_INTERMEDIATE_DIR)/net/net_resources.pak',
                  '<(SHARED_INTERMEDIATE_DIR)/webkit/webkit_resources.pak',
                ],
              },
              'inputs': [
                '<(repack_path)',
                '<@(pak_inputs)',
              ],
              'outputs': [
                '<(INTERMEDIATE_DIR)/repack/chrome.pak',
              ],
              'action': ['python', '<(repack_path)', '<@(_outputs)', '<@(pak_inputs)'],
              'process_outputs_as_mac_bundle_resources': 1,
            },
            {
              'action_name': 'repack_theme',
              'variables': {
                'pak_inputs': [
                  '<(SHARED_INTERMEDIATE_DIR)/app/app_resources.pak',
                  '<(grit_out_dir)/theme_resources.pak',
                ],
              },
              'inputs': [
                '<(repack_path)',
                '<@(pak_inputs)',
              ],
              'outputs': [
                '<(INTERMEDIATE_DIR)/repack/theme.pak',
              ],
              'action': ['python', '<(repack_path)', '<@(_outputs)', '<@(pak_inputs)'],
              'process_outputs_as_mac_bundle_resources': 1,
              'conditions': [
                ['OS=="linux"', {
                  'outputs=': [
                    '<(INTERMEDIATE_DIR)/repack/default.pak',
                  ]
                }],
              ],
            },
            {
              'action_name': 'repack_locales',
              'process_outputs_as_mac_bundle_resources': 1,
              'variables': {
                'conditions': [
                  ['branding=="Chrome"', {
                    'branding_flag': ['-b', 'google_chrome',],
                  }, {  # else: branding!="Chrome"
                    'branding_flag': ['-b', 'chromium',],
                  }],
                ],
              },
              'inputs': [
                'tools/build/repack_locales.py',
                # NOTE: Ideally the common command args would be shared amongst
                # inputs/outputs/action, but the args include shell variables
                # which need to be passed intact, and command expansion wants
                # to expand the shell variables. Adding the explicit quoting
                # here was the only way it seemed to work.
                '>!@(<(repack_locales_cmd) -i <(branding_flag) -g \'<(grit_out_dir)\' -s \'<(SHARED_INTERMEDIATE_DIR)\' -x \'<(INTERMEDIATE_DIR)\' <(locales))',
              ],
              'outputs': [
                '>!@(<(repack_locales_cmd) -o -g \'<(grit_out_dir)\' -s \'<(SHARED_INTERMEDIATE_DIR)\' -x \'<(INTERMEDIATE_DIR)\' <(locales))',
              ],
              'action': ['<@(repack_locales_cmd)',
                '<@(branding_flag)',
                '-g', '<(grit_out_dir)',
                '-s', '<(SHARED_INTERMEDIATE_DIR)',
                '-x', '<(INTERMEDIATE_DIR)',
                '<@(locales)',
              ],
            },
          ],
          'sources!': [
            'app/chrome_exe_main.cc',
            'app/client_util.cc',
            'app/google_update_client.cc',
          ]
        }],
      ],
    },
    {
      # This target contains mocks and test utilities that don't belong in
      # production libraries but are used by more than one test executable.
      'target_name': 'test_support_common',
      'type': '<(library)',
      'dependencies': [
        'browser',
        'common',
        'renderer',
        'chrome_resources',
        'chrome_strings',
        'theme_resources',
        '../base/base.gyp:test_support_base',
        '../skia/skia.gyp:skia',
        '../testing/gmock.gyp:gmock',
        '../testing/gtest.gyp:gtest',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        # TODO:  these should live here but are currently used by
        # production code code in libbrowser (above).
        #'browser/net/url_request_mock_http_job.cc',
        #'browser/net/url_request_mock_http_job.h',
        'browser/net/url_request_mock_net_error_job.cc',
        'browser/net/url_request_mock_net_error_job.h',
        'browser/renderer_host/mock_render_process_host.cc',
        'browser/renderer_host/mock_render_process_host.h',
        'browser/renderer_host/test/test_render_view_host.cc',
        'browser/renderer_host/test/test_render_view_host.h',
        'browser/tab_contents/test_web_contents.cc',
        'browser/tab_contents/test_web_contents.h',
        'common/ipc_test_sink.cc',
        'common/ipc_test_sink.h',
        'renderer/mock_keyboard.cc',
        'renderer/mock_keyboard.h',
        'renderer/mock_keyboard_driver_win.cc',
        'renderer/mock_keyboard_driver_win.h',
        'renderer/mock_printer.cc',
        'renderer/mock_printer.h',
        'renderer/mock_render_process.h',
        'renderer/mock_render_thread.cc',
        'renderer/mock_render_thread.h',
        'test/automation/autocomplete_edit_proxy.cc',
        'test/automation/autocomplete_edit_proxy.h',
        'test/automation/automation_constants.h',
        'test/automation/automation_handle_tracker.cc',
        'test/automation/automation_handle_tracker.h',
        'test/automation/automation_proxy.cc',
        'test/automation/automation_proxy.h',
        'test/automation/browser_proxy.cc',
        'test/automation/browser_proxy.h',
        'test/automation/tab_proxy.cc',
        'test/automation/tab_proxy.h',
        'test/automation/window_proxy.cc',
        'test/automation/window_proxy.h',
        'test/chrome_process_util.cc',
        'test/chrome_process_util.h',
        'test/chrome_process_util_linux.cc',
        'test/chrome_process_util_mac.cc',
        'test/chrome_process_util_win.cc',
        'test/in_process_browser_test.cc',
        'test/in_process_browser_test.h',
        'test/perf/mem_usage.cc',
        'test/perf/mem_usage.h',
        'test/testing_profile.cc',
        'test/testing_profile.h',
        'test/ui_test_utils.cc',
        'test/ui_test_utils.h',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
        ['OS=="win"', {
          'include_dirs': [
            'third_party/wtl/include',
          ],
        }, { # OS != "win"
          'sources!': [
            'test/perf/mem_usage.cc',
            'test/perf/mem_usage.h',
          ],
        }],
      ],
    },
    {
      'target_name': 'test_support_ui',
      'type': '<(library)',
      'dependencies': [
        'test_support_common',
        'chrome_resources',
        'chrome_strings',
        'theme_resources',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'test/automated_ui_tests/automated_ui_test_base.cc',
        'test/automated_ui_tests/automated_ui_test_base.h',
        'test/testing_browser_process.h',
        'test/ui/javascript_test_util.cc',
        'test/ui/npapi_test_helper.cc',
        'test/ui/npapi_test_helper.h',
        'test/ui/run_all_unittests.cc',
        'test/ui/ui_layout_test.cc',
        'test/ui/ui_layout_test.h',
        'test/ui/ui_test.cc',
        'test/ui/ui_test.h',
        'test/ui/ui_test_suite.cc',
        'test/ui/ui_test_suite.h',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
        ['OS!="win"', {
          'sources!': [
            'test/ui/npapi_test_helper.cc',
          ],
        }],
      ],
    },
    {
      'target_name': 'test_support_unit',
      'type': '<(library)',
      'dependencies': [
        'test_support_common',
        'chrome_resources',
        'chrome_strings',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'test/unit/run_all_unittests.cc',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            # Needed for the following #include chain:
            #   test/unit/run_all_unittests.cc
            #   test/unit/chrome_test_suite.h
            #   gtk/gtk.h
            '../build/linux/system.gyp:gtk',
          ],
        }],
      ],
     },
    {
      'target_name': 'automated_ui_tests',
      'type': 'executable',
      'msvs_guid': 'D2250C20-3A94-4FB9-AF73-11BC5B73884B',
      'dependencies': [
        'browser',
        'renderer',
        'test_support_common',
        'test_support_ui',
        'theme_resources',
        '../base/base.gyp:base',
        '../skia/skia.gyp:skia',
        '../third_party/libxml/libxml.gyp:libxml',
        '../testing/gtest.gyp:gtest',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'test/automated_ui_tests/automated_ui_tests.cc',
        'test/automated_ui_tests/automated_ui_tests.h',

        'tools/build/win/precompiled_wtl.h',
        'tools/build/win/precompiled_wtl.cc',
      ],
      'conditions': [
        ['OS=="win"', {
          'include_dirs': [
            'third_party/wtl/include',
          ],
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
            },
          },
        }],
      ],
    },
    {
      'target_name': 'ui_tests',
      'type': 'executable',
      'msvs_guid': '76235B67-1C27-4627-8A33-4B2E1EF93EDE',
      'dependencies': [
        'chrome',
        'browser',
        'debugger',
        'common',
        'chrome_resources',
        'chrome_strings',
        'syncapi',
        'test_support_ui',
        '../base/base.gyp:base',
        '../net/net.gyp:net',
        '../build/temp_gyp/googleurl.gyp:googleurl',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
        '../third_party/icu38/icu38.gyp:icui18n',
        '../third_party/icu38/icu38.gyp:icuuc',
        '../third_party/libxml/libxml.gyp:libxml',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'app/chrome_main_uitest.cc',
        'browser/browser_uitest.cc',
        'browser/download/download_uitest.cc',
        'browser/download/save_page_uitest.cc',
        'browser/errorpage_uitest.cc',
        'browser/extensions/extension_uitest.cc',
        'browser/history/redirect_uitest.cc',
        'browser/iframe_uitest.cc',
        'browser/images_uitest.cc',
        'browser/in_process_webkit/dom_storage_uitest.cc',
        'browser/locale_tests_uitest.cc',
        'browser/login_prompt_uitest.cc',
        'browser/media_uitest.cc',
        'browser/metrics/metrics_service_uitest.cc',
        'browser/printing/printing_layout_uitest.cc',
        'browser/process_singleton_linux_uitest.cc',
        'browser/renderer_host/resource_dispatcher_host_uitest.cc',
        'browser/sanity_uitest.cc',
        'browser/session_history_uitest.cc',
        'browser/sessions/session_restore_uitest.cc',
        'browser/tab_contents/view_source_uitest.cc',
        'browser/tab_restore_uitest.cc',
        'browser/unload_uitest.cc',
        'browser/views/find_bar_win_uitest.cc',
        'common/logging_chrome_uitest.cc',
        'common/pref_service_uitest.cc',
        'test/automation/automation_proxy_uitest.cc',
        'test/automated_ui_tests/automated_ui_test_test.cc',
        'test/chrome_process_util_uitest.cc',
        'test/reliability/page_load_test.cc',
        'test/reliability/page_load_test.h',
        'test/ui/dom_checker_uitest.cc',
        'test/ui/history_uitest.cc',
        'test/ui/layout_plugin_uitest.cc',
        'test/ui/npapi_uitest.cc',
        'test/ui/omnibox_uitest.cc',
        'test/ui/sandbox_uitests.cc',
        'test/ui/sunspider_uitest.cc',
        'test/ui/v8_benchmark_uitest.cc',
        'worker/worker_uitest.cc',

        'tools/build/win/precompiled_wtl.h',
        'tools/build/win/precompiled_wtl.cc',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
          'sources!': [
            # TODO(port)
            'browser/login_prompt_uitest.cc',
            'test/ui/layout_plugin_uitest.cc',
          ],
        }, { # else: OS != "linux"
          'sources!': [
            'browser/process_singleton_linux_uitest.cc',
          ],
        }],
        ['OS=="linux" and toolkit_views==1', {
          'dependencies': [
            '../views/views.gyp:views',
          ],
        }],
        ['OS=="mac"', {
          'sources!': [
            # TODO(port)
            'app/chrome_main_uitest.cc',
            'browser/login_prompt_uitest.cc',
            'browser/metrics/metrics_service_uitest.cc',
            # leaves an extra window on screen after test completes.
            'browser/sessions/session_restore_uitest.cc',
            # puts up modal dialogs.
            'browser/unload_uitest.cc',
            'test/reliability/page_load_test.cc',
            'test/ui/layout_plugin_uitest.cc',
            'test/ui/omnibox_uitest.cc',
          ],
        }],
        ['OS=="win"', {
          'include_dirs': [
            'third_party/wtl/include',
          ],
          'dependencies': [
            'crash_service',  # run time dependency
            'security_tests',  # run time dependency
            'test_support_common',
            '../google_update/google_update.gyp:google_update',
            '../views/views.gyp:views',
            # run time dependency
            '../webkit/tools/test_shell/test_shell.gyp:npapi_test_plugin',
          ],
          'link_settings': {
            'libraries': [
              '-lOleAcc.lib',
            ],
          },
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
            },
          },
        }, { # else: OS != "win"
          'sources!': [
            # TODO(port)?  (Most of these include windows.h or similar.)
            'browser/extensions/extension_uitest.cc',
            'browser/media_uitest.cc',
            'browser/printing/printing_layout_uitest.cc',
            'browser/views/find_bar_win_uitest.cc',
            'common/logging_chrome_uitest.cc',
            'test/ui/npapi_uitest.cc',
            'test/ui/sandbox_uitests.cc',
            'worker/worker_uitest.cc',
          ],
        }],
      ],
    },
    {
      'target_name': 'unit_tests',
      'type': 'executable',
      'msvs_guid': 'ECFC2BEC-9FC0-4AD9-9649-5F26793F65FC',
      'dependencies': [
        'chrome',
        'browser',
        'chrome_resources',
        'chrome_strings',
        'common',
        'debugger',
        'renderer',
        'syncapi',
        'test_support_unit',
        'utility',
        '../app/app.gyp:app_resources',
        '../ipc/ipc.gyp:ipc',
        '../net/net.gyp:net_resources',
        '../net/net.gyp:net_test_support',
        '../printing/printing.gyp:printing',
        '../webkit/webkit.gyp:webkit',
        '../webkit/webkit.gyp:webkit_resources',
        '../skia/skia.gyp:skia',
        '../testing/gmock.gyp:gmock',
        '../testing/gtest.gyp:gtest',
        '../third_party/bzip2/bzip2.gyp:bzip2',
        '../third_party/icu38/icu38.gyp:icui18n',
        '../third_party/icu38/icu38.gyp:icuuc',
        '../third_party/libxml/libxml.gyp:libxml',
        '../third_party/npapi/npapi.gyp:npapi',
      ],
      'include_dirs': [
        '..',
      ],
      'defines': [
        'CLD_WINDOWS',
      ],
      'direct_dependent_settings': {
        'defines': [
          'CLD_WINDOWS',
        ],
      },
      'sources': [
        'app/breakpad_mac_stubs.mm',
        # *NO* files in chrome/app have unit tests (except keystone_glue)!!!
        # It seems a waste to have an app_unittests target, so for now
        # I add keystone_glue.m explicitly to this target.
        'app/keystone_glue.m',
        'app/keystone_glue_unittest.mm',
        # All unittests in browser, common, and renderer.
        'browser/autocomplete/autocomplete_edit_view_mac_unittest.mm',
        'browser/autocomplete/autocomplete_unittest.cc',
        'browser/autocomplete/autocomplete_popup_view_mac_unittest.mm',
        'browser/autocomplete/history_contents_provider_unittest.cc',
        'browser/autocomplete/history_url_provider_unittest.cc',
        'browser/autocomplete/keyword_provider_unittest.cc',
        'browser/autocomplete/search_provider_unittest.cc',
        'browser/back_forward_menu_model_unittest.cc',
        'browser/blocked_popup_container_unittest.cc',
        'browser/bookmarks/bookmark_codec_unittest.cc',
        'browser/bookmarks/bookmark_drag_data_unittest.cc',
        'browser/bookmarks/bookmark_folder_tree_model_unittest.cc',
        'browser/bookmarks/bookmark_html_writer_unittest.cc',
        'browser/bookmarks/bookmark_index_unittest.cc',
        'browser/bookmarks/bookmark_model_test_utils.cc',
        'browser/bookmarks/bookmark_model_test_utils.h',
        'browser/bookmarks/bookmark_model_unittest.cc',
        'browser/bookmarks/bookmark_table_model_unittest.cc',
        'browser/bookmarks/bookmark_utils_unittest.cc',
        'browser/browser_commands_unittest.cc',
        'browser/browser_theme_provider_unittest.cc',
        'browser/browser_unittest.cc',
        'browser/debugger/devtools_remote_message_unittest.cc',
        'browser/debugger/devtools_remote_listen_socket_unittest.cc',
        'browser/debugger/devtools_remote_listen_socket_unittest.h',
        'browser/child_process_security_policy_unittest.cc',
        'browser/chrome_thread_unittest.cc',
        # It is safe to list */cocoa/* files in the "common" file list
        # without an explicit exclusion since gyp is smart enough to
        # exclude them from non-Mac builds.
        'browser/cocoa/about_window_controller_unittest.mm',
        'browser/cocoa/autocomplete_text_field_cell_unittest.mm',
        'browser/cocoa/autocomplete_text_field_editor_unittest.mm',
        'browser/cocoa/autocomplete_text_field_unittest.mm',
        'browser/cocoa/base_view_unittest.mm',
        'browser/cocoa/background_gradient_view_unittest.mm',
        'browser/cocoa/blocked_popup_container_controller_unittest.mm',
        'browser/cocoa/bookmark_bar_bridge_unittest.mm',
        'browser/cocoa/bookmark_bar_controller_unittest.mm',
        'browser/cocoa/bookmark_bar_view_unittest.mm',
        'browser/cocoa/bookmark_button_cell_unittest.mm',
        'browser/cocoa/bookmark_editor_controller_unittest.mm',
        'browser/cocoa/bookmark_menu_bridge_unittest.mm',
        'browser/cocoa/bookmark_menu_cocoa_controller_unittest.mm',
        'browser/cocoa/bookmark_name_folder_controller_unittest.mm',
        'browser/cocoa/browser_window_cocoa_unittest.mm',
        'browser/cocoa/browser_window_controller_unittest.mm',
        'browser/cocoa/clear_browsing_data_controller_unittest.mm',
        'browser/cocoa/command_observer_bridge_unittest.mm',
        'browser/cocoa/custom_home_pages_model_unittest.mm',
        'browser/cocoa/download_shelf_mac_unittest.mm',
        'browser/cocoa/download_shelf_view_unittest.mm',
        'browser/cocoa/download_util_mac_unittest.mm',
        'browser/cocoa/event_utils_unittest.mm',
        'browser/cocoa/find_bar_bridge_unittest.mm',
        'browser/cocoa/find_bar_cocoa_controller_unittest.mm',
        'browser/cocoa/find_bar_view_unittest.mm',
        'browser/cocoa/fullscreen_window_unittest.mm',
        'browser/cocoa/hung_renderer_controller_unittest.mm',
        'browser/cocoa/infobar_container_controller_unittest.mm',
        'browser/cocoa/infobar_controller_unittest.mm',
        'browser/cocoa/infobar_gradient_view_unittest.mm',
        'browser/cocoa/infobar_text_field_unittest.mm',
        'browser/cocoa/location_bar_view_mac_unittest.mm',
        'browser/cocoa/gradient_button_cell_unittest.mm',
        'browser/cocoa/history_menu_bridge_unittest.mm',
        'browser/cocoa/history_menu_cocoa_controller_unittest.mm',
        'browser/cocoa/nsimage_cache_unittest.mm',
        'browser/cocoa/page_info_window_controller_unittest.mm',
        'browser/cocoa/preferences_window_controller_unittest.mm',
        'browser/cocoa/rwhvm_editcommand_helper_unittest.mm',
        'browser/cocoa/sad_tab_view_unittest.mm',
        'browser/cocoa/search_engine_list_model_unittest.mm',
        'browser/cocoa/status_bubble_mac_unittest.mm',
        'browser/cocoa/tab_cell_unittest.mm',
        'browser/cocoa/tab_controller_unittest.mm',
        'browser/cocoa/tab_strip_controller_unittest.mm',
        'browser/cocoa/tab_strip_view_unittest.mm',
        'browser/cocoa/tab_view_unittest.mm',
        'browser/cocoa/test_event_utils.h',
        'browser/cocoa/test_event_utils.mm',
        'browser/cocoa/throbber_view_unittest.mm',
        'browser/cocoa/toolbar_button_cell_unittest.mm',
        'browser/cocoa/toolbar_controller_unittest.mm',
        'browser/cocoa/toolbar_view_unittest.mm',
        'browser/cocoa/view_resizer_pong.h',
        'browser/cocoa/view_resizer_pong.mm',
        'browser/cocoa/web_drop_target_unittest.mm',
        'browser/command_updater_unittest.cc',
        'browser/debugger/devtools_manager_unittest.cc',
        'browser/dom_ui/dom_ui_theme_source_unittest.cc',
        'browser/dom_ui/dom_ui_unittest.cc',
        'browser/download/download_manager_unittest.cc',
        'browser/download/download_request_manager_unittest.cc',
        'browser/download/save_package_unittest.cc',
        'browser/encoding_menu_controller_unittest.cc',
        'browser/extensions/extension_file_util_unittest.cc',
        'browser/extensions/extension_l10n_util_unittest.cc',
        'browser/extensions/extension_messages_unittest.cc',
        'browser/extensions/extension_process_manager_unittest.cc',
        'browser/extensions/extension_ui_unittest.cc',
        'browser/extensions/extension_updater_unittest.cc',
        'browser/extensions/extensions_service_unittest.cc',
        'browser/extensions/user_script_master_unittest.cc',
        'browser/find_backend_unittest.cc',
        'browser/first_run_migration_mac_unittest.mm',
        'browser/global_keyboard_shortcuts_mac_unittest.cc',
        'browser/google_url_tracker_unittest.cc',
        'browser/google_update_settings_posix_unittest.cc',
        'browser/gtk/bookmark_editor_gtk_unittest.cc',
        'browser/gtk/go_button_gtk_unittest.cc',
        'browser/gtk/options/cookies_view_unittest.cc',
        'browser/gtk/options/languages_page_gtk_unittest.cc',
        'browser/gtk/tabs/tab_renderer_gtk_unittest.cc',
        'browser/gtk/view_id_util_unittest.cc',
        'browser/history/expire_history_backend_unittest.cc',
        'browser/history/history_backend_unittest.cc',
        'browser/history/history_querying_unittest.cc',
        'browser/history/history_types_unittest.cc',
        'browser/history/history_unittest.cc',
        'browser/history/query_parser_unittest.cc',
        'browser/history/snippet_unittest.cc',
        'browser/history/starred_url_database_unittest.cc',
        'browser/history/text_database_manager_unittest.cc',
        'browser/history/text_database_unittest.cc',
        'browser/history/thumbnail_database_unittest.cc',
        'browser/thumbnail_store_unittest.cc',
        'browser/history/url_database_unittest.cc',
        'browser/history/visit_database_unittest.cc',
        'browser/history/visit_tracker_unittest.cc',
        'browser/importer/firefox_importer_unittest.cc',
        'browser/importer/importer_unittest.cc',
        'browser/importer/safari_importer_unittest.mm',
        'browser/importer/toolbar_importer_unittest.cc',
        'browser/importer/firefox_profile_lock_unittest.cc',
        'browser/in_process_webkit/dom_storage_dispatcher_host_unittest.cc',
        'browser/in_process_webkit/webkit_context_unittest.cc',
        'browser/in_process_webkit/webkit_thread_unittest.cc',
        'browser/keychain_mock_mac.cc',
        'browser/keychain_mock_mac.h',
        'browser/login_prompt_unittest.cc',
        'browser/meta_table_helper_unittest.cc',
        'browser/metrics/metrics_log_unittest.cc',
        'browser/metrics/metrics_response_unittest.cc',
        'browser/metrics/metrics_service_unittest.cc',
        'browser/net/chrome_url_request_context_unittest.cc',
        'browser/net/dns_host_info_unittest.cc',
        'browser/net/dns_master_unittest.cc',
        'browser/net/resolve_proxy_msg_helper_unittest.cc',
        'browser/net/test_url_fetcher_factory.cc',
        'browser/net/test_url_fetcher_factory.h',
        'browser/net/url_fetcher_unittest.cc',
        'browser/net/url_fixer_upper_unittest.cc',
        'browser/password_manager/encryptor_unittest.cc',
        'browser/password_manager/login_database_unittest.cc',
        'browser/password_manager/password_form_manager_unittest.cc',
        'browser/password_manager/password_store_mac_unittest.cc',
        'browser/printing/print_job_unittest.cc',
        'browser/privacy_blacklist/blacklist_unittest.cc',
        'browser/privacy_blacklist/blacklist_io_unittest.cc',
        'browser/profile_manager_unittest.cc',
        'browser/renderer_host/audio_renderer_host_unittest.cc',
        'browser/renderer_host/file_system_accessor_unittest.cc',
        'browser/renderer_host/render_widget_host_unittest.cc',
        'browser/renderer_host/resource_dispatcher_host_unittest.cc',
        'browser/renderer_host/test/render_view_host_unittest.cc',
        'browser/renderer_host/test/site_instance_unittest.cc',
        'browser/renderer_host/web_cache_manager_unittest.cc',
        'browser/rlz/rlz_unittest.cc',
        'browser/safe_browsing/bloom_filter_unittest.cc',
        'browser/safe_browsing/chunk_range_unittest.cc',
        'browser/safe_browsing/protocol_manager_unittest.cc',
        'browser/safe_browsing/protocol_parser_unittest.cc',
        'browser/safe_browsing/safe_browsing_blocking_page_unittest.cc',
        'browser/safe_browsing/safe_browsing_database_unittest.cc',
        'browser/safe_browsing/safe_browsing_util_unittest.cc',
        'browser/search_engines/keyword_editor_controller_unittest.cc',
        'browser/search_engines/template_url_model_unittest.cc',
        'browser/search_engines/template_url_parser_unittest.cc',
        'browser/search_engines/template_url_prepopulate_data_unittest.cc',
        'browser/search_engines/template_url_scraper_unittest.cc',
        'browser/search_engines/template_url_unittest.cc',
        'browser/sessions/session_backend_unittest.cc',
        'browser/sessions/session_service_test_helper.cc',
        'browser/sessions/session_service_test_helper.h',
        'browser/sessions/session_service_unittest.cc',
        'browser/sessions/tab_restore_service_unittest.cc',
        'browser/shell_integration_unittest.cc',
        'browser/spellcheck_unittest.cc',
        'browser/ssl/ssl_host_state_unittest.cc',
        'browser/sync/glue/bookmark_model_worker_unittest.cc',
        'browser/sync/glue/http_bridge_unittest.cc',
        'browser/sync/profile_sync_service_unittest.cc',
        'browser/tab_contents/navigation_controller_unittest.cc',
        'browser/tab_contents/navigation_entry_unittest.cc',
        'browser/tab_contents/render_view_host_manager_unittest.cc',
        'browser/tab_contents/thumbnail_generator_unittest.cc',
        'browser/tab_contents/web_contents_unittest.cc',
        'browser/tabs/tab_strip_model_unittest.cc',
        'browser/task_manager_unittest.cc',
        'browser/theme_resources_util_unittest.cc',
        'browser/utility_process_host_unittest.cc',
        'browser/views/bookmark_context_menu_test.cc',
        'browser/views/bookmark_editor_view_unittest.cc',
        'browser/views/sync/sync_setup_wizard_unittest.cc',
        'browser/visitedlink_unittest.cc',
        'browser/webdata/web_database_unittest.cc',
        'browser/window_sizer_unittest.cc',
        'common/bzip2_unittest.cc',
        'common/child_process_logging_mac_unittest.mm',
        'common/chrome_plugin_unittest.cc',
        'common/common_param_traits_unittest.cc',
        'common/extensions/extension_unittest.cc',
        'common/extensions/update_manifest_unittest.cc',
        'common/extensions/url_pattern_unittest.cc',
        'common/extensions/user_script_unittest.cc',
        'common/important_file_writer_unittest.cc',
        'common/json_value_serializer_unittest.cc',
        'common/mru_cache_unittest.cc',
        'common/net/url_util_unittest.cc',
        'common/notification_service_unittest.cc',
        'common/pref_member_unittest.cc',
        'common/pref_service_unittest.cc',
        'common/property_bag_unittest.cc',
        'common/resource_dispatcher_unittest.cc',
        'common/time_format_unittest.cc',
        'common/worker_thread_ticker_unittest.cc',
        'common/zip_unittest.cc',
        'renderer/audio_message_filter_unittest.cc',
        'renderer/extensions/extension_api_client_unittest.cc',
        'renderer/extensions/json_schema_unittest.cc',
        'renderer/net/render_dns_master_unittest.cc',
        'renderer/net/render_dns_queue_unittest.cc',
        'renderer/render_process_unittest.cc',
        'renderer/render_thread_unittest.cc',
        'renderer/render_view_unittest.cc',
        'renderer/render_widget_unittest.cc',
        'renderer/renderer_main_unittest.cc',
        'test/browser_with_test_window_test.cc',
        'test/browser_with_test_window_test.h',
        'test/file_test_utils.h',
        'test/file_test_utils.cc',
        'test/render_view_test.cc',
        'test/render_view_test.h',
        'test/test_notification_tracker.cc',
        'test/test_notification_tracker.h',
        'test/v8_unit_test.cc',
        'test/v8_unit_test.h',
        '../third_party/cld/bar/toolbar/cld/i18n/encodings/compact_lang_det/compact_lang_det_unittest_small.cc',

        'tools/build/win/precompiled_wtl.h',
        'tools/build/win/precompiled_wtl.cc',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
            '../build/linux/system.gyp:nss',
            '../sandbox/sandbox.gyp:*',
          ],
          'sources!': [
            # This test is mostly about renaming downloads to safe file
            # names. As such we don't need/want to port it to linux. We
            # might want to write our own tests for the download manager
            # on linux, though.
            'browser/download/download_manager_unittest.cc',
            'browser/views/bookmark_context_menu_test.cc',
            # Compact Language Detection (cld) is not supported in linux yet.
            '../third_party/cld/bar/toolbar/cld/i18n/encodings/compact_lang_det/compact_lang_det_unittest_small.cc',
          ],
        }],
        ['OS=="linux" and (toolkit_views==1 or chromeos==1)', {
          'dependencies': [
            '../views/views.gyp:views',
          ],
          'sources': [
            '<@(views_unit_tests_sources)',
          ],
          # We must use 'sources/' instead of 'source!' as there is a
          # target-default 'sources/' including gtk_unittest and 'source/' takes
          # precedence over 'sources!'.
          'sources/': [
             ['exclude', 'browser/gtk/bookmark_editor_gtk_unittest\\.cc$'],
             ['exclude', 'browser/gtk/go_button_gtk_unittest\\.cc$'],
             ['exclude', 'browser/gtk/tabs/tab_renderer_gtk_unittest\\.cc$'],
          ],
        }],
        ['OS=="mac"', {
           # The test fetches resources which means Mac need the app bundle to
           # exist on disk so it can pull from it.
          'dependencies': [
            'chrome',
          ],
          'include_dirs': [
            '../third_party/GTM',
            '../third_party/GTM/AppKit',
          ],
          'sources!': [
            'browser/views/bookmark_context_menu_test.cc',
            'browser/back_forward_menu_model_unittest.cc',
            'browser/download/download_manager_unittest.cc',
            'browser/gtk/go_button_gtk_unittest.cc',
            'browser/gtk/tabs/tab_renderer_gtk_unittest.cc',
            'browser/tab_contents/navigation_controller_unittest.cc',
            'browser/task_manager_unittest.cc',
            'third_party/hunspell/google/hunspell_tests.cc',

            # Compact Language Detection (cld) is not supported in mac yet.
            '../third_party/cld/bar/toolbar/cld/i18n/encodings/compact_lang_det/compact_lang_det_unittest_small.cc',
          ],
          # TODO(mark): We really want this for all non-static library targets,
          # but when we tried to pull it up to the common.gypi level, it broke
          # other things like the ui, startup, and page_cycler tests. *shrug*
          'xcode_settings': {'OTHER_LDFLAGS': ['-Wl,-ObjC']},
        }, { # OS != "mac"
          'dependencies': [
            'convert_dict_lib',
            'third_party/hunspell/hunspell.gyp:hunspell',
          ],
        }],
        ['OS=="win"', {
          'defines': [
            '__STD_C',
            '_CRT_SECURE_NO_DEPRECATE',
            '_SCL_SECURE_NO_DEPRECATE',
          ],
          'dependencies': [
            'chrome_dll_version',
            'installer/installer.gyp:installer_util_strings',
            '../views/views.gyp:views',
            'test_chrome_plugin',  # run time dependency
          ],
          'include_dirs': [
            'third_party/wtl/include',
          ],
          'sources': [
            'app/chrome_dll.rc',
            'test/data/resource.rc',

            '<@(views_unit_tests_sources)',
            '<@(views_unit_tests_sources_win_specific)',

            # TODO:  It would be nice to have these pulled in
            # automatically from direct_dependent_settings in
            # their various targets (net.gyp:net_resources, etc.),
            # but that causes errors in other targets when
            # resulting .res files get referenced multiple times.
            '<(SHARED_INTERMEDIATE_DIR)/chrome/browser_resources.rc',
            '<(SHARED_INTERMEDIATE_DIR)/chrome/common_resources.rc',
            '<(SHARED_INTERMEDIATE_DIR)/chrome/renderer_resources.rc',
            '<(SHARED_INTERMEDIATE_DIR)/net/net_resources.rc',
            '<(SHARED_INTERMEDIATE_DIR)/webkit/webkit_resources.rc',
          ],
          'sources!': [
            'browser/gtk/tabs/tab_renderer_gtk_unittest.cc',
            'common/net/url_util_unittest.cc',
          ],
          'link_settings': {
            'libraries': [
              '-lcomsupp.lib',
              '-loleacc.lib',
              '-lrpcrt4.lib',
              '-lurlmon.lib',
              '-lwinmm.lib',
            ],
          },
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
              'msvs_settings': {
                'VCLinkerTool': {
                  'LinkIncremental': '<(msvs_large_module_debug_link_mode)',
                },
              },
            },
          },
        }, { # else: OS != "win"
          'sources!': [
            'browser/bookmarks/bookmark_codec_unittest.cc',
            'browser/bookmarks/bookmark_drag_data_unittest.cc',
            'browser/bookmarks/bookmark_folder_tree_model_unittest.cc',
            'browser/bookmarks/bookmark_table_model_unittest.cc',
            # Need to port browser_with_test_window_test.* first
            'browser/browser_commands_unittest.cc',
            'browser/browser_unittest.cc',
            # Need to port browser/automation/ui_controls.h
            'browser/extensions/extension_process_manager_unittest.cc',
            'browser/importer/importer_unittest.cc',
            'browser/login_prompt_unittest.cc',
            'browser/printing/print_job_unittest.cc',
            'browser/rlz/rlz_unittest.cc',
            'browser/safe_browsing/safe_browsing_blocking_page_unittest.cc',
            'browser/search_engines/template_url_scraper_unittest.cc',
            'browser/views/bookmark_editor_view_unittest.cc',
            'browser/views/find_bar_win_unittest.cc',
            'browser/views/keyword_editor_view_unittest.cc',
            'common/chrome_plugin_unittest.cc',
            'common/net/url_util_unittest.cc',
            'test/browser_with_test_window_test.cc',
            'test/browser_with_test_window_test.h',
          ],
        }],
        ['use_syncapi_stub==1', {  # These tests require a non-stub sync impl.
          'sources!': [
            'browser/sync/profile_sync_service_unittest.cc',
          ]
        }],
      ],
    },
    {
      'target_name': 'startup_tests',
      'type': 'executable',
      'msvs_guid': 'D3E6C0FD-54C7-4FF2-9AE1-72F2DAFD820C',
      'dependencies': [
        'chrome',
        'browser',
        'debugger',
        'common',
        'chrome_resources',
        'chrome_strings',
        'test_support_ui',
        '../base/base.gyp:base',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
      ],
      'sources': [
        'test/startup/feature_startup_test.cc',
        'test/startup/startup_test.cc',
        'tools/build/win/precompiled.cc',
        'tools/build/win/precompiled.h',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
        ['OS=="linux" and toolkit_views==1', {
          'dependencies': [
            '../views/views.gyp:views',
          ],
        }],
      ],
    },
    {
      # Provides a syncapi dynamic library target from checked-in binaries,
      # or from compiling a stub implementation.
      'target_name': 'syncapi',

      'conditions': [
        ['chrome_personalization==0', {
          # Empty target.
          'type': 'none',
        }],
        ['chrome_personalization==1 and use_syncapi_stub==1', {
          # Build a stub library.
          'type': 'shared_library',
          'defines': [
            'COMPILING_SYNCAPI_LIBRARY'
          ],
          'sources': [
            'browser/sync/engine/syncapi_stub.cc',
          ],
          'include_dirs': [
            '..',
          ],
          'dependencies': [
            '../base/base.gyp:base',
          ],
        }],
        ['chrome_personalization==1 and use_syncapi_stub==0', {
          'type': 'none',
          'conditions': [
            # Linux-specific rules for using syncapi binaries.
            ['OS=="linux"', {
              # TODO(timsteele):  Not sure if this linux-specific stuff
              # works anymore.
              'copies': [
                {
                  'destination': '<(PRODUCT_DIR)/lib',
                  'files': [
                    'personalization/sync/engine/<(CONFIGURATION_NAME)/libsyncapi.so',
                  ],
                },
              ],
              'link_settings': {
                'libraries': [
                  '-lsyncapi',
                ],
              },
            }],  # OS=="linux"
            # Windows-specific rules for using syncapi binaries.
            ['OS=="win"', {
              'direct_dependent_settings': {
                'link_settings': {
                  'libraries': [
                    'personalization/sync/engine/<(CONFIGURATION_NAME)/syncapi.lib',
                  ],
                },
              },
              'copies': [
                {
                  'destination': '<(PRODUCT_DIR)',
                  'files': [
                    'personalization/sync/engine/<(CONFIGURATION_NAME)/syncapi.dll',
                    'personalization/sync/engine/<(CONFIGURATION_NAME)/syncapi_dll.pdb',
                    'personalization/sync/engine/<(CONFIGURATION_NAME)/pthreads.dll',
                    'personalization/sync/engine/<(CONFIGURATION_NAME)/pthreads_dll.pdb',
                  ],
                },
              ],
            }],  # OS=="win"
          ],
        }],
        ['chrome_personalization==1 and OS=="win"', {
          'direct_dependent_settings': {  # Shared by stub and non-stub.
            'msvs_settings': {
              'VCLinkerTool': {
                'DelayLoadDLLs': [
                  'syncapi.dll',
                ],
              },
            },
          },
        }],
      ],  # chrome_personalization / use_syncapi_stub condition chain.
    },
    {
      'target_name': 'page_cycler_tests',
      'type': 'executable',
      'msvs_guid': 'C9E0BD1D-B175-4A91-8380-3FDC81FAB9D7',
      'dependencies': [
        'chrome',
        'chrome_resources',
        'chrome_strings',
        'debugger',
        'test_support_common',
        'test_support_ui',
        '../base/base.gyp:base',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
      ],
      'sources': [
        'test/page_cycler/page_cycler_test.cc',
        'tools/build/win/precompiled.cc',
        'tools/build/win/precompiled.h',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
        ['OS=="win" or (OS=="linux" and toolkit_views==1)', {
          'dependencies': [
            '../views/views.gyp:views',
          ],
        }],
      ],
    },
    {
      'target_name': 'tab_switching_test',
      'type': 'executable',
      'msvs_guid': 'A34770EA-A574-43E8-9327-F79C04770E98',
      'dependencies': [
        'chrome',
        'debugger',
        'test_support_common',
        'test_support_ui',
        'theme_resources',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'test/tab_switching/tab_switching_test.cc',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
      ],
    },
    {
      'target_name': 'memory_test',
      'type': 'executable',
      'msvs_guid': 'A5F831FD-9B9C-4FEF-9FBA-554817B734CE',
      'dependencies': [
        'chrome',
        'debugger',
        'test_support_common',
        'test_support_ui',
        'theme_resources',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'test/memory_test/memory_test.cc',
      ],
      'conditions': [
        ['OS=="linux"', {
          'dependencies': [
            '../build/linux/system.gyp:gtk',
          ],
        }],
      ],
    },
    {
      'target_name': 'url_fetch_test',
      'type': 'executable',
      'msvs_guid': '7EFD0C91-198E-4043-9E71-4A4C7879B929',
      'dependencies': [
        'chrome',
        'debugger',
        'test_support_common',
        'test_support_ui',
        'theme_resources',
        '../net/net.gyp:net',
        '../skia/skia.gyp:skia',
        '../testing/gtest.gyp:gtest',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'test/url_fetch_test/url_fetch_test.cc',
      ],
      'conditions': [
        ['OS=="win"', {
          'include_dirs': [
            'third_party/wtl/include',
          ],
          'sources': [
            'tools/build/win/precompiled_wtl.cc',
            'tools/build/win/precompiled_wtl.h',
          ],
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
            },
          },
        }], # OS="win"
      ], # conditions
    },
  ],
  'conditions': [
    ['OS=="mac" or OS=="win"', {
      'targets': [
        {
          'target_name': 'chrome_dll',
          'type': 'shared_library',
          'dependencies': [
            '<@(chromium_dependencies)',
          ],
          'conditions': [
            ['OS=="win"', {
              'product_name': 'chrome',
              'msvs_guid': 'C0A7EE2C-2A6D-45BE-BA78-6D006FDF52D9',
              'include_dirs': [
                'third_party/wtl/include',
              ],
              'dependencies': [
                # On Windows, link the dependencies (libraries) that make
                # up actual Chromium functionality into this .dll.
                'chrome_dll_version',
                'chrome_resources',
                'installer/installer.gyp:installer_util_strings',
                'theme_dll',
                'worker',
                '../printing/printing.gyp:printing',
                '../net/net.gyp:net_resources',
                '../build/util/support/support.gyp:*',
                '../third_party/cld/cld.gyp:cld',
                '../third_party/tcmalloc/tcmalloc.gyp:tcmalloc',
                '../views/views.gyp:views',
                '../webkit/webkit.gyp:webkit_resources',
                '../gears/gears.gyp:gears',
              ],
              'defines': [
                'CHROME_DLL',
                'BROWSER_DLL',
                'RENDERER_DLL',
                'PLUGIN_DLL',
              ],
              'sources': [
                'app/chrome_dll.rc',
                'app/chrome_dll_main.cc',
                'app/chrome_dll_resource.h',
                '<(SHARED_INTERMEDIATE_DIR)/chrome_dll_version/chrome_dll_version.rc',

                '../webkit/glue/resources/aliasb.cur',
                '../webkit/glue/resources/cell.cur',
                '../webkit/glue/resources/col_resize.cur',
                '../webkit/glue/resources/copy.cur',
                '../webkit/glue/resources/row_resize.cur',
                '../webkit/glue/resources/vertical_text.cur',
                '../webkit/glue/resources/zoom_in.cur',
                '../webkit/glue/resources/zoom_out.cur',

                # TODO:  It would be nice to have these pulled in
                # automatically from direct_dependent_settings in
                # their various targets (net.gyp:net_resources, etc.),
                # but that causes errors in other targets when
                # resulting .res files get referenced multiple times.
                '<(SHARED_INTERMEDIATE_DIR)/chrome/browser_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/chrome/common_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/chrome/renderer_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/net/net_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/webkit/webkit_resources.rc',

                # TODO(sgk):  left-over from pre-gyp build, figure out
                # if we still need them and/or how to update to gyp.
                #'app/check_dependents.bat',
                #'app/chrome.dll.deps',
              ],
              'msvs_settings': {
                'VCLinkerTool': {
                  'BaseAddress': '0x01c30000',
                  'DelayLoadDLLs': [
                    'crypt32.dll',
                    'cryptui.dll',
                    'winhttp.dll',
                    'wininet.dll',
                    'wsock32.dll',
                    'ws2_32.dll',
                    'winspool.drv',
                    'comdlg32.dll',
                    'imagehlp.dll',
                    'psapi.dll',
                    'urlmon.dll',
                    'imm32.dll',
                  ],
                  'ImportLibrary': '$(OutDir)\\lib\\chrome_dll.lib',
                  'ProgramDatabaseFile': '$(OutDir)\\chrome_dll.pdb',
                  # Set /SUBSYSTEM:WINDOWS for chrome.dll (for consistency).
                  'SubSystem': '2',
                },
                'VCManifestTool': {
                  'AdditionalManifestFiles': '$(ProjectDir)\\app\\chrome.dll.manifest',
                },
              },
              'configurations': {
                'Debug': {
                  'msvs_settings': {
                    'VCLinkerTool': {
                      'LinkIncremental': '<(msvs_large_module_debug_link_mode)',
                    },
                  },
                },
              },
            }],  # OS=="win"
            ['OS=="mac"', {
              # The main browser executable's name is <(mac_product_name).
              # Certain things will get confused if two modules in the
              # executable share the same name, so append " Framework" to the
              # product_name used for the framework.  This will result in
              # a name like "Chromium Framework.framework".
              'product_name': '<(mac_product_name) Framework',
              'mac_bundle': 1,
              'xcode_settings': {
                'DYLIB_INSTALL_NAME_BASE': '@executable_path/../Frameworks',
              },
              'sources': [
                'app/chrome_dll_main.cc',
                'app/chrome_dll_resource.h',
                'app/chrome_exe_main.mm',
                'app/keystone_glue.h',
                'app/keystone_glue.m',
              ],
              'dependencies': [
                '../build/util/support/support.gyp:*',
              ],

              # For now, don't put any resources into the framework.  Exclude
              # them all and push them into the bundle resources of the sole
              # app bundle, the only dependent of this target.
              # TODO(mark): Fix.
              'mac_bundle_resources/': [
                ['exclude', '.*'],
              ],
              'direct_dependent_settings': {
                'mac_bundle_resources': [
                  '../third_party/WebKit/WebCore/Resources/aliasCursor.png',
                  '../third_party/WebKit/WebCore/Resources/cellCursor.png',
                  '../third_party/WebKit/WebCore/Resources/contextMenuCursor.png',
                  '../third_party/WebKit/WebCore/Resources/copyCursor.png',
                  '../third_party/WebKit/WebCore/Resources/crossHairCursor.png',
                  '../third_party/WebKit/WebCore/Resources/eastResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/eastWestResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/helpCursor.png',
                  '../third_party/WebKit/WebCore/Resources/linkCursor.png',
                  '../third_party/WebKit/WebCore/Resources/missingImage.png',
                  '../third_party/WebKit/WebCore/Resources/moveCursor.png',
                  '../third_party/WebKit/WebCore/Resources/noDropCursor.png',
                  '../third_party/WebKit/WebCore/Resources/noneCursor.png',
                  '../third_party/WebKit/WebCore/Resources/northEastResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/northEastSouthWestResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/northResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/northWestResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/northWestSouthEastResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/notAllowedCursor.png',
                  '../third_party/WebKit/WebCore/Resources/progressCursor.png',
                  '../third_party/WebKit/WebCore/Resources/southEastResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/southResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/southWestResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/verticalTextCursor.png',
                  '../third_party/WebKit/WebCore/Resources/waitCursor.png',
                  '../third_party/WebKit/WebCore/Resources/westResizeCursor.png',
                  '../third_party/WebKit/WebCore/Resources/zoomInCursor.png',
                  '../third_party/WebKit/WebCore/Resources/zoomOutCursor.png',
                  'renderer/renderer.sb',
                ],
              },

              'conditions': [
                ['mac_breakpad==1', {
                  'variables': {
                    # A real .dSYM is needed for dump_syms to operate on.
                    'mac_real_dsym': 1,
                  },
                  'sources': [
                    'app/breakpad_mac.mm',
                    'app/breakpad_mac.h',
                  ],
                  'dependencies': [
                    '../breakpad/breakpad.gyp:breakpad',
                  ],
                }, {  # else: mac_breakpad!=1
                  # No Breakpad, put in the stubs.
                  'sources': [
                    'app/breakpad_mac_stubs.mm',
                    'app/breakpad_mac.h',
                  ],
                }],  # mac_breakpad
              ],  # conditions
            }],  # OS=="mac"
          ],  # conditions
        },  # target chrome_dll
      ],  # targets
    }],  # OS=="mac" or OS=="win"
    ['OS=="linux"', {
      'conditions': [
        # Only Chrome builds get breakpad since crash processing is internal.
        ['branding=="Chrome"', {
          'variables': {
            'linux_breakpad%': 1,
          },
        }, {
          'variables': {
            'linux_breakpad%': 0,
          },
        }],
      ],
    }],
    ['OS=="mac"',
      { 'targets': [
        {
          'target_name': 'helper_app',
          'type': 'executable',
          'product_name': '<(mac_product_name) Helper',
          'mac_bundle': 1,
          'dependencies': [
            'chrome_dll',
            'interpose_dependency_shim',
          ],
          'sources': [
            # chrome_exe_main.mm's main() is the entry point for the "chrome"
            # (browser app) target.  All it does is jump to chrome_dll's
            # ChromeMain.  This is appropriate for helper processes too,
            # because the logic to discriminate between process types at run
            # time is actually directed by the --type command line argument
            # processed by ChromeMain.  Sharing chrome_exe_main.mm with the
            # browser app will suffice for now.
            'app/chrome_exe_main.mm',
            'app/helper-Info.plist',
          ],
          # TODO(mark): Come up with a fancier way to do this.  It should only
          # be necessary to list app-Info.plist once, not the three times it is
          # listed here.
          'mac_bundle_resources!': [
            'app/helper-Info.plist',
          ],
          # TODO(mark): For now, don't put any resources into this app.  Its
          # resources directory will be a symbolic link to the browser app's
          # resources directory.
          'mac_bundle_resources/': [
            ['exclude', '.*'],
          ],
          'xcode_settings': {
            'CHROMIUM_BUNDLE_ID': '<(mac_bundle_id)',
            'CHROMIUM_SHORT_NAME': '<(branding)',
            'INFOPLIST_FILE': 'app/helper-Info.plist',
          },
          'copies': [
            {
              'destination': '<(PRODUCT_DIR)/<(mac_product_name) Helper.app/Contents/MacOS',
              'files': [
                '<(PRODUCT_DIR)/plugin_carbon_interpose.dylib',
              ],
            },
          ],
          'postbuilds': [
            {
              'postbuild_name': 'Make Symbolic Links',
              'action': ['app/make_mac_app_symlinks'],
            },
            {
              # Modify the Info.plist as needed.  The script explains why this
              # is needed.  This is also done in the chrome target.  In
              # this case, -k0 is always used because Keystone never runs
              # within the helper app.  -s0 is used to avoid placing Subversion
              # data in the helper app's Info.plist.  It will be present in
              # the main app's Info.plist, which is sufficient.
              'postbuild_name': 'Tweak Info.plist',
              'action': ['<(DEPTH)/build/mac/tweak_app_infoplist',
                         '-b<(mac_breakpad)',
                         '-k0',
                         '-s0',
                         '<(branding)'],
            },
          ],
          'conditions': [
            ['mac_breakpad==1', {
              'variables': {
                # A real .dSYM is needed for dump_syms to operate on.
                'mac_real_dsym': 1,
              },
            }],
          ],
        },
        {
          # Convenience target to build a disk image.
          'target_name': 'build_app_dmg',
          # Don't place this in the 'all' list; most won't want it.
          # In GYP, booleans are 0/1, not True/False.
          'suppress_wildcard': 1,
          'type': 'none',
          'dependencies': [
            'chrome',
          ],
          'variables': {
            'build_app_dmg_script_path': '<(DEPTH)/build/mac/build_app_dmg',
          },
          'actions': [
            {
              'inputs': [
                '<(build_app_dmg_script_path)',
                '<(PRODUCT_DIR)/<(branding).app',
              ],
              'outputs': [
                '<(PRODUCT_DIR)/<(branding).dmg',
              ],
              'action_name': 'build_app_dmg',
              'action': ['<(build_app_dmg_script_path)', '<@(branding)'],
            },
          ],  # 'actions'
        },
        {
          # Dummy target to allow chrome to require plugin_carbon_interpose to
          # build without actually linking to the resulting library.
          'target_name': 'interpose_dependency_shim',
          'type': 'executable',
          'dependencies': [
            'plugin_carbon_interpose',
          ],
          # In release, we end up with a strip step that is unhappy if there is
          # no binary. Rather than check in a new file for this temporary hack,
          # just generate a source file on the fly.
          'actions': [
            {
              'action_name': 'generate_stub_main',
              'process_outputs_as_sources': 1,
              'inputs': [],
              'outputs': [ '<(INTERMEDIATE_DIR)/dummy_main.c' ],
              'action': [
                'bash', '-c',
                'echo "int main() { return 0; }" > <(INTERMEDIATE_DIR)/dummy_main.c'
              ],
            },
          ],
        },
        {
          # dylib for interposing Carbon calls in the plugin process.
          'target_name': 'plugin_carbon_interpose',
          'type': 'shared_library',
          'dependencies': [
            'chrome_dll',
          ],
          'sources': [
            'browser/plugin_carbon_interpose_mac.cc',
          ],
          'include_dirs': [
            '..',
          ],
          'link_settings': {
            'libraries': [
              '$(SDKROOT)/System/Library/Frameworks/Carbon.framework',
            ],
          },
          'xcode_settings': {
            'DYLIB_INSTALL_NAME_BASE': '@executable_path',
          },
        },
      ]
    }, { # else: OS != "mac"
      'targets': [
        {
          'target_name': 'convert_dict',
          'type': 'executable',
          'msvs_guid': '42ECD5EC-722F-41DE-B6B8-83764C8016DF',
          'dependencies': [
            '../base/base.gyp:base',
            'convert_dict_lib',
            'third_party/hunspell/hunspell.gyp:hunspell',
          ],
          'sources': [
            'tools/convert_dict/convert_dict.cc',
          ],
        },
        {
          'target_name': 'convert_dict_lib',
          'product_name': 'convert_dict',
          'type': 'static_library',
          'msvs_guid': '1F669F6B-3F4A-4308-E496-EE480BDF0B89',
          'include_dirs': [
            '..',
          ],
          'sources': [
            'tools/convert_dict/aff_reader.cc',
            'tools/convert_dict/aff_reader.h',
            'tools/convert_dict/dic_reader.cc',
            'tools/convert_dict/dic_reader.h',
            'tools/convert_dict/hunspell_reader.cc',
            'tools/convert_dict/hunspell_reader.h',
          ],
        },
        {
          'target_name': 'flush_cache',
          'type': 'executable',
          'msvs_guid': '4539AFB3-B8DC-47F3-A491-6DAC8FD26657',
          'dependencies': [
            '../base/base.gyp:base',
            '../base/base.gyp:test_support_base',
          ],
          'sources': [
            'tools/perf/flush_cache/flush_cache.cc',
          ],
        },
        {
          'target_name': 'pbl_tool',
          'type': 'executable',
          'msvs_guid': '265C427B-D1FF-4922-A47C-0754DDFF52E1',
          'dependencies': [
            '../base/base.gyp:base',
            '../webkit/webkit.gyp:glue',
            'debugger',
            'renderer',
            'browser'
          ],
          'sources': [
            'tools/pbl_tool/pbl_tool.cc',
          ],
        },
        {
          'target_name': 'perf_tests',
          'type': 'executable',
          'msvs_guid': '9055E088-25C6-47FD-87D5-D9DD9FD75C9F',
          'dependencies': [
            'browser',
            'common',
            'debugger',
            'renderer',
            'syncapi',
            'chrome_resources',
            'chrome_strings',
            '../base/base.gyp:base',
            '../base/base.gyp:test_support_base',
            '../base/base.gyp:test_support_perf',
            '../skia/skia.gyp:skia',
            '../testing/gtest.gyp:gtest',
            '../webkit/webkit.gyp:glue',
          ],
          'sources': [
            'browser/safe_browsing/database_perftest.cc',
            'browser/safe_browsing/filter_false_positive_perftest.cc',
            'browser/visitedlink_perftest.cc',
            'common/json_value_serializer_perftest.cc',
            'test/perf/perftests.cc',
            'test/perf/url_parse_perftest.cc',
          ],
          'conditions': [
            ['OS=="linux"', {
              'dependencies': [
                '../build/linux/system.gyp:gtk',
              ],
              'sources!': [
                # TODO(port):
                'browser/safe_browsing/filter_false_positive_perftest.cc',
                'browser/visitedlink_perftest.cc',
              ],
            }],
            ['OS=="win" or (OS=="linux" and toolkit_views==1)', {
              'dependencies': [
                '../views/views.gyp:views',
              ],
            }],
            ['OS=="win"', {
              'configurations': {
                'Debug': {
                  'msvs_settings': {
                    'VCLinkerTool': {
                      'LinkIncremental': '<(msvs_large_module_debug_link_mode)',
                    },
                  },
                },
              },
            }],
          ],
        },
        # TODO: enable on mac.
        {
          'target_name': 'interactive_ui_tests',
          'type': 'executable',
          'msvs_guid': '018D4F38-6272-448F-A864-976DA09F05D0',
          'dependencies': [
            'chrome',
            'chrome_resources',
            'chrome_strings',
            'debugger',
            'test_support_common',
            'test_support_ui',
            'syncapi',
            'third_party/hunspell/hunspell.gyp:hunspell',
            '../net/net.gyp:net_resources',
            '../skia/skia.gyp:skia',
            '../third_party/icu38/icu38.gyp:icui18n',
            '../third_party/libpng/libpng.gyp:libpng',
            '../third_party/libxml/libxml.gyp:libxml',
            '../third_party/zlib/zlib.gyp:zlib',
            '../testing/gtest.gyp:gtest',
            '../third_party/npapi/npapi.gyp:npapi',
            # run time dependency
            '../webkit/tools/test_shell/test_shell.gyp:npapi_test_plugin',
            '../webkit/webkit.gyp:webkit_resources',
          ],
          'include_dirs': [
            '..',
          ],
          'sources': [
            'browser/browser_focus_uitest.cc',
            'browser/debugger/devtools_sanity_unittest.cc',
            'browser/views/bookmark_bar_view_test.cc',
            'browser/blocked_popup_container_interactive_uitest.cc',
            'browser/views/find_bar_win_interactive_uitest.cc',
            'browser/views/tabs/tab_dragging_test.cc',
            'test/interactive_ui/npapi_interactive_test.cc',
            'test/interactive_ui/view_event_test_base.cc',
            'test/interactive_ui/view_event_test_base.h',
          ],
          'conditions': [
            ['OS=="linux"', {
              'dependencies': [
                '../build/linux/system.gyp:gtk',
              ],
              'sources!': [
                # TODO(port)
                'browser/debugger/devtools_sanity_unittest.cc',
                'browser/views/bookmark_bar_view_test.cc',
                'browser/blocked_popup_container_interactive_uitest.cc',
                'browser/views/find_bar_win_interactive_uitest.cc',
                'browser/views/tabs/tab_dragging_test.cc',
                'test/interactive_ui/npapi_interactive_test.cc',
                'test/interactive_ui/view_event_test_base.cc',
                'test/interactive_ui/view_event_test_base.h',
              ],
            }],
            ['OS=="linux" and toolkit_views==1', {
              'dependencies': [
                '../views/views.gyp:views',
              ],
            }],
            ['OS=="mac"', {
              'sources!': [
                # TODO(port)
                'browser/browser_focus_uitest.cc',
                'browser/debugger/devtools_sanity_unittest.cc',
                'browser/views/bookmark_bar_view_test.cc',
                'browser/blocked_popup_container_interactive_uitest.cc',
                'browser/views/find_bar_win_interactive_uitest.cc',
                'browser/views/tabs/tab_dragging_test.cc',
                'test/interactive_ui/npapi_interactive_test.cc',
                'test/interactive_ui/view_event_test_base.cc',
                'test/interactive_ui/view_event_test_base.h',
              ],
            }],
            ['OS=="win"', {
              'include_dirs': [
                'third_party/wtl/include',
              ],
              'dependencies': [
                'chrome_dll_version',
                'crash_service',  # run time dependency
                'installer/installer.gyp:installer_util_strings',
                '../views/views.gyp:views',
              ],
              'sources': [
                '../webkit/glue/resources/aliasb.cur',
                '../webkit/glue/resources/cell.cur',
                '../webkit/glue/resources/col_resize.cur',
                '../webkit/glue/resources/copy.cur',
                '../webkit/glue/resources/row_resize.cur',
                '../webkit/glue/resources/vertical_text.cur',
                '../webkit/glue/resources/zoom_in.cur',
                '../webkit/glue/resources/zoom_out.cur',

                'app/chrome_dll.rc',
                'test/data/resource.rc',

                # TODO:  It would be nice to have these pulled in
                # automatically from direct_dependent_settings in
                # their various targets (net.gyp:net_resources, etc.),
                # but that causes errors in other targets when
                # resulting .res files get referenced multiple times.
                '<(SHARED_INTERMEDIATE_DIR)/chrome/browser_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/chrome/common_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/chrome/renderer_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/net/net_resources.rc',
                '<(SHARED_INTERMEDIATE_DIR)/webkit/webkit_resources.rc',

                'tools/build/win/precompiled_wtl.h',
                'tools/build/win/precompiled_wtl.cc',
              ],
              'configurations': {
                'Debug': {
                  'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
                  'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
                  'msvs_settings': {
                    'VCLinkerTool': {
                      'LinkIncremental': '<(msvs_large_module_debug_link_mode)',
                    },
                  },
                },
              },
            }],
          ],
        },
      ],
    }],  # OS!="mac"
    ['OS!="win"',
      { 'targets': [
        {
          # Executable that runs each browser test in a new process.
          'target_name': 'browser_tests',
          'type': 'executable',
          'dependencies': [
            'browser',
            'chrome',
            'chrome_resources',
            'debugger',
            'test_support_common',
            '../base/base.gyp:test_support_base',
            '../skia/skia.gyp:skia',
            '../testing/gtest.gyp:gtest',
            '../third_party/icu38/icu38.gyp:icui18n',
            '../third_party/icu38/icu38.gyp:icuuc',
          ],
          'include_dirs': [
            '..',
          ],
          'sources': [
            'test/browser/run_all_unittests.cc',
            'test/browser/browser_test_launcher_out_of_proc.cc',
            'test/browser/browser_test_runner.cc',
            'test/browser/browser_test_runner.h',
            'test/unit/chrome_test_suite.h',
            # browser_tests_sources is defined in 'variables' at the top of the
            # file.
            '<@(browser_tests_sources)',
          ],
          'conditions': [
            ['OS=="linux"', {
              'dependencies': [
                '../build/linux/system.gyp:gtk',
              ],
            }],
            ['OS=="mac"', {
              # The test fetches resources which means Mac need the app bundle to
              # exist on disk so it can pull from it.
              'dependencies': [
                'chrome',
              ],
              'sources': [
                'app/breakpad_mac_stubs.mm',
                'app/keystone_glue.h',
                'app/keystone_glue.m',
              ],
              # TODO(mark): We really want this for all non-static library targets,
              # but when we tried to pull it up to the common.gypi level, it broke
              # other things like the ui, startup, and page_cycler tests. *shrug*
              'xcode_settings': {'OTHER_LDFLAGS': ['-Wl,-ObjC']},
            }],
          ],
        },
      ]
    }],
    ['OS=="win"',
      { 'targets': [
        {
          # TODO(sgk):  remove this when we change the buildbots to
          # use the generated build\all.sln file to build the world.
          'target_name': 'pull_in_all',
          'type': 'none',
          'dependencies': [
            'installer/mini_installer.gyp:*',
            'installer/installer.gyp:*',
            '../app/app.gyp:*',
            '../base/base.gyp:*',
            '../ipc/ipc.gyp:*',
            '../media/media.gyp:*',
            '../net/net.gyp:*',
            '../printing/printing.gyp:*',
            '../rlz/rlz.gyp:*',
            '../sdch/sdch.gyp:*',
            '../skia/skia.gyp:*',
            '../testing/gmock.gyp:*',
            '../testing/gtest.gyp:*',
            '../third_party/bsdiff/bsdiff.gyp:*',
            '../third_party/bspatch/bspatch.gyp:*',
            '../third_party/bzip2/bzip2.gyp:*',
            '../third_party/cld/cld.gyp:cld',
            '../third_party/codesighs/codesighs.gyp:*',
            '../third_party/icu38/icu38.gyp:*',
            '../third_party/libjpeg/libjpeg.gyp:*',
            '../third_party/libpng/libpng.gyp:*',
            '../third_party/libxml/libxml.gyp:*',
            '../third_party/libxslt/libxslt.gyp:*',
            '../third_party/lzma_sdk/lzma_sdk.gyp:*',
            '../third_party/modp_b64/modp_b64.gyp:*',
            '../third_party/npapi/npapi.gyp:*',
            '../third_party/sqlite/sqlite.gyp:*',
            '../third_party/tcmalloc/tcmalloc.gyp:*',
            '../third_party/zlib/zlib.gyp:*',
            '../webkit/tools/test_shell/test_shell.gyp:*',
            '../webkit/webkit.gyp:*',

            '../build/temp_gyp/googleurl.gyp:*',

            '../breakpad/breakpad.gyp:*',
            '../courgette/courgette.gyp:*',
            '../gears/gears.gyp:*',
            '../rlz/rlz.gyp:*',
            '../sandbox/sandbox.gyp:*',
            '../tools/memory_watcher/memory_watcher.gyp:*',
            '../webkit/activex_shim/activex_shim.gyp:*',
            '../webkit/activex_shim_dll/activex_shim_dll.gyp:*',
            '../v8/tools/gyp/v8.gyp:v8_shell',
          ],
        },
        {
          'target_name': 'chrome_dll_version',
          'type': 'none',
          #'msvs_guid': '414D4D24-5D65-498B-A33F-3A29AD3CDEDC',
          'dependencies': [
            '../build/util/build_util.gyp:lastchange',
          ],
          'direct_dependent_settings': {
            'include_dirs': [
              '<(SHARED_INTERMEDIATE_DIR)/chrome_dll_version',
            ],
          },
          'actions': [
            {
              'action_name': 'version',
              'variables': {
                'lastchange_path':
                  '<(SHARED_INTERMEDIATE_DIR)/build/LASTCHANGE',
                'version_py': 'tools/build/version.py',
                'version_path': 'VERSION',
                'template_input_path': 'app/chrome_dll_version.rc.version',
              },
              'conditions': [
                [ 'branding == "Chrome"', {
                  'variables': {
                     'branding_path': 'app/theme/google_chrome/BRANDING',
                  },
                }, { # else branding!="Chrome"
                  'variables': {
                     'branding_path': 'app/theme/chromium/BRANDING',
                  },
                }],
              ],
              'inputs': [
                '<(template_input_path)',
                '<(version_path)',
                '<(branding_path)',
                '<(lastchange_path)',
              ],
              'outputs': [
                '<(SHARED_INTERMEDIATE_DIR)/chrome_dll_version/chrome_dll_version.rc',
              ],
              'action': [
                'python',
                '<(version_py)',
                '-f', '<(version_path)',
                '-f', '<(branding_path)',
                '-f', '<(lastchange_path)',
                '<(template_input_path)',
                '<@(_outputs)',
              ],
              'message': 'Generating version information in <(_outputs)'
            },
          ],
        },
        {
          'target_name': 'activex_test_control',
          'type': 'shared_library',
          'msvs_guid': '414D4D24-5D65-498B-A33F-3A29AD3CDEDC',
          'include_dirs': [
            '..',
            '<(INTERMEDIATE_DIR)',
          ],
          'link_settings': {
            'libraries': [
              '-lcomsuppw.lib',
            ],
          },
          'sources': [
            'test/activex_test_control/activex_test_control.cc',
            'test/activex_test_control/activex_test_control.def',
            'test/activex_test_control/activex_test_control.idl',
            'test/activex_test_control/activex_test_control.rc',
            'test/activex_test_control/activex_test_control.rgs',
            'test/activex_test_control/chrome_test_control.bmp',
            'test/activex_test_control/chrome_test_control.cc',
            'test/activex_test_control/chrome_test_control.h',
            'test/activex_test_control/chrome_test_control.rgs',
            'test/activex_test_control/chrome_test_control_cp.h',
            'test/activex_test_control/resource.h',
          ],
        },
        {
          'target_name': 'automation',
          'type': '<(library)',
          'msvs_guid': '1556EF78-C7E6-43C8-951F-F6B43AC0DD12',
          'dependencies': [
            'theme_resources',
            '../skia/skia.gyp:skia',
          ],
          'include_dirs': [
            '..',
          ],
          'sources': [
             'test/automation/autocomplete_edit_proxy.cc',
             'test/automation/autocomplete_edit_proxy.h',
             'test/automation/automation_constants.h',
             'test/automation/automation_handle_tracker.cc',
             'test/automation/automation_handle_tracker.h',
             'test/automation/automation_messages.h',
             'test/automation/automation_messages_internal.h',
             'test/automation/automation_proxy.cc',
             'test/automation/automation_proxy.h',
             'test/automation/browser_proxy.cc',
             'test/automation/browser_proxy.h',
             'test/automation/tab_proxy.cc',
             'test/automation/tab_proxy.h',
             'test/automation/window_proxy.cc',
             'test/automation/window_proxy.h',
          ],
        },
        {
          # Windows-only for now; this has issues with scons
          # regarding use of run_all_unittests.cc.
          # TODO(zork): add target to linux build.
          'target_name': 'sync_integration_tests',
          'type': 'executable',
            'dependencies': [
              'browser',
              'chrome',
              'chrome_resources',
              'common',
              'debugger',
              'renderer',
              'chrome_resources',
              'chrome_strings',
              'syncapi',
              'test_support_unit',
              '../printing/printing.gyp:printing',
              '../webkit/webkit.gyp:webkit',
              '../skia/skia.gyp:skia',
              '../testing/gtest.gyp:gtest',
              '../third_party/icu38/icu38.gyp:icui18n',
              '../third_party/icu38/icu38.gyp:icuuc',
              '../third_party/libxml/libxml.gyp:libxml',
              '../third_party/npapi/npapi.gyp:npapi',
            ],
            'include_dirs': [
              '..',
              '<(INTERMEDIATE_DIR)',
            ],
            'sources': [
              'tools/build/win/precompiled_wtl.cc',
              'tools/build/win/precompiled_wtl.h',
              'test/live_sync/bookmark_model_verifier.cc',
              'test/live_sync/bookmark_model_verifier.h',
              'test/live_sync/live_bookmarks_sync_test.cc',
              'test/live_sync/live_bookmarks_sync_test.h',
              'test/live_sync/profile_sync_service_test_harness.cc',
              'test/live_sync/profile_sync_service_test_harness.h',
              'test/browser/run_all_unittests.cc',
              'test/test_notification_tracker.cc',
              'test/test_notification_tracker.h',
              'test/testing_browser_process.h',
              'test/ui_test_utils.cc',
              'test/ui_test_utils.h',
              'app/chrome_dll.rc',
              'app/chrome_dll_resource.h',
              'app/chrome_dll_version.rc.version',
              'test/data/resource.h',
              'test/data/resource.rc',
              '<(SHARED_INTERMEDIATE_DIR)/chrome/browser_resources.rc',
              '<(SHARED_INTERMEDIATE_DIR)/chrome_dll_version/chrome_dll_version.rc',
              '<(SHARED_INTERMEDIATE_DIR)/chrome/common_resources.rc',
              'test/live_sync/single_client_live_bookmarks_sync_unittest.cc',
              'test/live_sync/two_client_live_bookmarks_sync_test.cc',
            ],
            'conditions': [
              # Plugin code.
              ['OS=="linux" or OS=="win"', {
                'dependencies': [
                  'plugin',
                 ],
                'export_dependent_settings': [
                  'plugin',
                ],
              }],
              # Linux-specific rules.
              ['OS=="linux"', {
                 'dependencies': [
                   '../build/linux/system.gyp:gtk',
                 ],
              }],
              # Windows-specific rules.
              ['OS=="win"', {
                'include_dirs': [
                  'third_party/wtl/include',
                 ],
                'dependencies': [
                  'chrome_dll_version',
                  'installer/installer.gyp:installer_util_strings',
                  '../views/views.gyp:views',
                ],
              }],
            ],
        },
        {
          # Shared library used by the in-proc browser tests.
          'target_name': 'browser_tests_dll',
          'type': 'shared_library',
          'product_name': 'browser_tests',
          'msvs_guid': 'D7589D0D-304E-4589-85A4-153B7D84B07F',
          'dependencies': [
            'chrome',
            'browser',
            'chrome_dll_version',
            'chrome_resources',
            'installer/installer.gyp:installer_util_strings',
            'debugger',
            'renderer',
            'syncapi',
            '../base/base.gyp:test_support_base',
            '../skia/skia.gyp:skia',
            '../testing/gtest.gyp:gtest',
            '../third_party/icu38/icu38.gyp:icui18n',
            '../third_party/icu38/icu38.gyp:icuuc',
          ],
          'include_dirs': [
            '..',
            'third_party/wtl/include',
          ],
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
              'msvs_settings': {
                'VCLinkerTool': {
                  'LinkIncremental': '<(msvs_large_module_debug_link_mode)',
                },
              },
            },
          },
          'sources': [
            'test/browser/run_all_unittests.cc',
            'test/in_process_browser_test.cc',
            'test/in_process_browser_test.h',
            'test/unit/chrome_test_suite.h',
            'test/ui_test_utils.cc',
            'app/chrome_dll.rc',
            'app/chrome_dll_resource.h',
            'app/chrome_dll_version.rc.version',
            'tools/build/win/precompiled_wtl.h',
            'tools/build/win/precompiled_wtl.cc',
            '<(SHARED_INTERMEDIATE_DIR)/chrome/browser_resources.rc',
            '<(SHARED_INTERMEDIATE_DIR)/chrome_dll_version/chrome_dll_version.rc',
            '<(SHARED_INTERMEDIATE_DIR)/chrome/common_resources.rc',
            # browser_tests_sources and browser_tests_source_win_specific are
            # defined in 'variables' at the top of the file.
            '<@(browser_tests_sources)',
            '<@(browser_tests_sources_win_specific)',
          ],
        },
        {
          # Executable that runs the browser tests in-process.
          'target_name': 'browser_tests',
          'type': 'executable',
          'msvs_guid': '9B87804D-2502-480B-95AE-5A572CE91809',
          'dependencies': [
            'browser_tests_dll',
            '../base/base.gyp:base',
          ],
          'include_dirs': [
            '..',
          ],
          'sources': [
            'test/browser/browser_test_launcher_in_proc.cc',
            'test/browser/browser_test_runner.cc',
            'test/browser/browser_test_runner.h',
          ],
          'msvs_settings': {
            'VCLinkerTool': {
              # Use a PDB name different than the one for the DLL.
              'ProgramDatabaseFile': '$(OutDir)\\browser_tests_exe.pdb',
            },
          },
        },
        {
          'target_name': 'crash_service',
          'type': 'executable',
          'msvs_guid': '89C1C190-A5D1-4EC4-BD6A-67FF2195C7CC',
          'dependencies': [
            'common',
            '../base/base.gyp:base',
            '../breakpad/breakpad.gyp:breakpad_handler',
            '../breakpad/breakpad.gyp:breakpad_sender',
          ],
          'include_dirs': [
            '..',
          ],
          'sources': [
            'tools/crash_service/crash_service.cc',
            'tools/crash_service/crash_service.h',
            'tools/crash_service/main.cc',
          ],
          'msvs_settings': {
            'VCLinkerTool': {
              'SubSystem': '2',         # Set /SUBSYSTEM:WINDOWS
            },
          },
        },
        {
          'target_name': 'generate_profile',
          'type': 'executable',
          'msvs_guid': '2E969AE9-7B12-4EDB-8E8B-48C7AE7BE357',
          'dependencies': [
            'browser',
            'debugger',
            'renderer',
            'syncapi',
            '../base/base.gyp:base',
            '../skia/skia.gyp:skia',
          ],
          'include_dirs': [
            '..',
          ],
          'sources': [
            'tools/profiles/generate_profile.cc',
            'tools/profiles/thumbnail-inl.h',
          ],
        },
        {
          'target_name': 'plugin_tests',
          'type': 'executable',
          'msvs_guid': 'A1CAA831-C507-4B2E-87F3-AEC63C9907F9',
          'dependencies': [
            'chrome_resources',
            'chrome_strings',
            'security_tests',  # run time dependency
            'test_support_common',
            'test_support_ui',
            '../skia/skia.gyp:skia',
            '../testing/gtest.gyp:gtest',
            '../third_party/libxml/libxml.gyp:libxml',
            '../third_party/libxslt/libxslt.gyp:libxslt',
            '../third_party/npapi/npapi.gyp:npapi',
          ],
          'include_dirs': [
            '..',
            'third_party/wtl/include',
          ],
          'sources': [
            'test/plugin/plugin_test.cpp',
            'tools/build/win/precompiled_wtl.h',
            'tools/build/win/precompiled_wtl.cc',
          ],
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
            },
          },
        },
        {
          'target_name': 'reliability_tests',
          'type': 'executable',
          'msvs_guid': '8A3E1774-1DE9-445C-982D-3EE37C8A752A',
          'dependencies': [
            'test_support_common',
            'test_support_ui',
            'theme_resources',
            '../skia/skia.gyp:skia',
            '../testing/gtest.gyp:gtest',
          ],
          'include_dirs': [
            '..',
          ],
          'sources': [
            'test/reliability/page_load_test.cc',
            'test/reliability/page_load_test.h',
            'test/reliability/reliability_test_suite.h',
            'test/reliability/run_all_unittests.cc',
          ],
        },
        {
          'target_name': 'security_tests',
          'type': 'shared_library',
          'msvs_guid': 'E750512D-FC7C-4C98-BF04-0A0DAF882055',
          'include_dirs': [
            '..',
          ],
          'sources': [
            'test/injection_test_dll.h',
            'test/security_tests/ipc_security_tests.cc',
            'test/security_tests/ipc_security_tests.h',
            'test/security_tests/security_tests.cc',
            '../sandbox/tests/validation_tests/commands.cc',
            '../sandbox/tests/validation_tests/commands.h',
          ],
        },
        {
          'target_name': 'selenium_tests',
          'type': 'executable',
          'msvs_guid': 'E3749617-BA3D-4230-B54C-B758E56D9FA5',
          'dependencies': [
            'chrome_resources',
            'chrome_strings',
            'test_support_common',
            'test_support_ui',
            '../skia/skia.gyp:skia',
            '../testing/gtest.gyp:gtest',
          ],
          'include_dirs': [
            '..',
            'third_party/wtl/include',
          ],
          'sources': [
            'test/selenium/selenium_test.cc',
            'tools/build/win/precompiled_wtl.h',
            'tools/build/win/precompiled_wtl.cc',
          ],
          'configurations': {
            'Debug': {
              'msvs_precompiled_header': 'tools/build/win/precompiled_wtl.h',
              'msvs_precompiled_source': 'tools/build/win/precompiled_wtl.cc',
            },
          },
        },
        {
          'target_name': 'test_chrome_plugin',
          'type': 'shared_library',
          'msvs_guid': '7F0A70F6-BE3F-4C19-B435-956AB8F30BA4',
          'dependencies': [
            '../base/base.gyp:base',
            '../build/temp_gyp/googleurl.gyp:googleurl',
          ],
          'include_dirs': [
            '..',
          ],
          'link_settings': {
            'libraries': [
              '-lwinmm.lib',
            ],
          },
          'sources': [
            'test/chrome_plugin/test_chrome_plugin.cc',
            'test/chrome_plugin/test_chrome_plugin.def',
            'test/chrome_plugin/test_chrome_plugin.h',
          ],
        },
        {
          'target_name': 'theme_dll',
          'type': 'loadable_module',
          'msvs_guid': 'FD683DD6-D9BF-4B1B-AB6D-A3AC03EDAA4D',
          'product_name': 'default',
          'dependencies': [
            'theme_resources',
            '../app/app.gyp:app_resources',
          ],
          'sources': [
            '<(grit_out_dir)/theme_resources.rc',
            '<(SHARED_INTERMEDIATE_DIR)/app/app_resources.rc',
          ],
          'msvs_settings': {
            'VCLinkerTool': {
              'BaseAddress': '0x3CE00000',
              'OutputFile': '<(PRODUCT_DIR)/themes/default.dll',
              'ResourceOnlyDLL': 'true',
            },
          },
          'configurations': {
            'Debug': {
              'msvs_settings': {
                'VCLinkerTool': {
                  'LinkIncremental': '<(msvs_large_module_debug_link_mode)',
                },
              },
            },
          },
        },
      ]},  # 'targets'
    ],  # OS=="win"
    # TODO(jrg): add in Windows code coverage targets.
    ['coverage!=0',
      { 'targets': [
        {
          'target_name': 'coverage',
          # do NOT place this in the 'all' list; most won't want it.
          # In gyp, booleans are 0/1 not True/False.
          'suppress_wildcard': 1,
          'type': 'none',
          # If you add new tests here you may need to update the croc configs.
          # E.g. build/{linux|mac}/chrome_linux.croc
          'dependencies': [
            '../base/base.gyp:base_unittests',
            '../ipc/ipc.gyp:ipc_tests',
            '../media/media.gyp:media_unittests',
            '../net/net.gyp:net_unittests',
            '../printing/printing.gyp:printing_unittests',
            'unit_tests',
          ],
          'actions': [
            {
              # 'message' for Linux/scons in particular.  Scons
              # requires the 'coverage' target be run from within
              # src/chrome.
              'message': 'Running coverage_posix.py to generate coverage numbers',
              # MSVS must have an input file and an output file.
              'inputs': [ '../tools/code_coverage/coverage_posix.py' ],
              'outputs': [ '<(PRODUCT_DIR)/coverage.info' ],
              'action_name': 'coverage',
              'action': [ 'python',
                          '../tools/code_coverage/coverage_posix.py',
                          '--directory',
                          '<(PRODUCT_DIR)',
                          '--src_root',
                          '..',
                          '--',
                          '<@(_dependencies)'],
              # Use outputs of this action as inputs for the main target build.
              # Seems as a misnomer but makes this happy on Linux (scons).
              'process_outputs_as_sources': 1,
            },
          ],  # 'actions'
        },
      ]
    }],
  ],  # 'conditions'
}

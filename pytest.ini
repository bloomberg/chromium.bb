# Copyright 2020 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# Syntax: https://docs.pytest.org/en/latest/customize.html

[pytest]
addopts =
  -m 'not (
    config_skew_test
    or leaks_process
    or legacy_slow
    or network_test
    or output_test
    or sigterm
  )'
  --strict
  --disable-pytest-warnings
  -n auto
  --quiet
python_files = *_unittest.py
python_classes = cros_test_lib\.TestCase
norecursedirs = third_party venv
markers =
  config_skew_test: Tests which check whether new config matches legacy config
  inside_only: Tests which must be run inside the chroot
  leaks_process: Tests which leak processes after running
  legacy_slow: Tests which are/were marked in run_tests.py as slow tests
  network_test: Tests which require a network connection to run
  output_test: Tests which fail due to inheriting cros_test_lib.OutputTestCase
  sigterm: Tests which exit with code 143 when run from pytest

"undefined"!=typeof chrome.dataReductionProxy&&"undefined"!=typeof chrome.dataReductionProxy.dataUsageReportingEnabled&&(chrome.dataReductionProxy.dataUsageReportingEnabled.set({value:!0}),b());
chrome.runtime.onInstalled.addListener(function(a){console.log("chrome.runtime.onInstalled details: "+JSON.stringify(a));console.log("typeof chrome.dataReductionProxy: "+typeof chrome.dataReductionProxy);if("undefined"!=typeof chrome.dataReductionProxy&&"undefined"!=typeof chrome.dataReductionProxy.dataUsageReportingEnabled)if(chrome.dataReductionProxy.dataUsageReportingEnabled.set({value:!0}),"install"==a.reason)chrome.dataReductionProxy.spdyProxyEnabled.set({value:!0}),c();else if("update"==a.reason||
"chrome_update"==a.reason)b(),chrome.storage.local.get("user_enabled_proxy",function(a){"user_enabled_proxy"in a&&(chrome.dataReductionProxy.spdyProxyEnabled.set({value:!0}),c(),chrome.storage.local.remove("user_enabled_proxy"))})});chrome.runtime.onStartup.addListener(function(){b()});
function b(){"undefined"!=typeof chrome.dataReductionProxy&&(console.log("Calling spdyProxyEnabled.get"),chrome.dataReductionProxy.spdyProxyEnabled.get({},function(a){console.log("chrome.dataReductionProxy.spdyProxyEnabled.get: "+JSON.stringify(a));(a="value"in a&&a.value)&&c()}))}function c(){console.log("Calling chrome.browserAction.setIcon");chrome.browserAction.setIcon({path:{19:"./images/proxy-enabled19.webp",38:"./images/proxy-enabled38.webp"}})};

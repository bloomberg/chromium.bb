<link rel="import" href="chrome://resources/html/polymer.html">

<link rel="import" href="browser_proxy.html">
<link rel="import" href="constants.html">
<link rel="import" href="more_permissions_item.html">
<link rel="import" href="pin_to_shelf_item.html">
<link rel="import" href="shared_style.html">
<link rel="import" href="store_client.html">
<link rel="import" href="util.html">

<dom-module id="app-management-chrome-app-detail-view">
  <template>
    <style include="app-management-shared-css"></style>
    <div>
      <div class="permission-list">
        <app-management-pin-to-shelf-item
          id="pin-to-shelf-setting"
          class="permission-card-row separated-row header-text"
          app="[[app_]]">
        </app-management-pin-to-shelf-item>

        <div id="permissions-card" class="permission-card-row"
            hide-bottom-border$="[[app_.hideMoreSettings]]">
          <div class="permission-section-header">
            <div class="header-text">$i18n{appManagementPermissionsLabel}</div>
          </div>
          <div class="indented-permission-block">
            <template is="dom-repeat"
              items="[[getPermissionMessages_(messages_)]]" as="message">
              <div class="permission-text-row">
                [[message]]
              </div>
              <div id="second-level-permissions" class="indented-permission-block">
                <template is="dom-repeat"
                    items="[[getPermissionSubmessagesByMessage_(index, messages_)]]"
                    as="submessage">
                  <div class="permission-text-row">
                    [[submessage]]
                  </div>
                </template>
              </div>
            </template>
            <template is="dom-if" if="[[!hasPermissions_(messages_)]]">
              <div id="no-permissions" class="permission-text-row">
                $i18n{appManagementNoPermissions}
              </div>
            </template>
            <app-management-more-permissions-item id="more-settings"
                class="subpermission-row" app="[[app_]]"
                hidden$="[[app_.hideMoreSettings]]">
            </app-management-more-permissions-item>
          </div>
        </div>
    </div>
  </template>
  <script src="chrome_app_detail_view.js"></script>
</dom-module>

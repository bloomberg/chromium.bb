// Copyright 2020 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

#include "build/build_config.h"
#include "chrome/browser/ui/views/web_apps/web_app_integration_test_driver.h"
#include "components/services/app_service/public/mojom/types.mojom.h"
#include "content/public/test/browser_test.h"

namespace web_app::integration_tests {
namespace {

using WebAppIntegrationBrowserTestWin = WebAppIntegrationBrowserTest;

// Manual tests:

IN_PROC_BROWSER_TEST_F(WebAppIntegrationBrowserTestWin, UninstallFromOs) {
  helper_.InstallCreateShortcutWindowed(Site::kSiteA);
  helper_.UninstallFromOs(Site::kSiteA);
  helper_.CheckAppNotInList(Site::kSiteA);
}

// Automated tests:

IN_PROC_BROWSER_TEST_F(
    WebAppIntegrationBrowserTestWin,
    WebAppIntegration_30SiteA_24_12SiteA_7SiteA_87SiteA_15SiteA_37SiteA_18_19) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.InstallCreateShortcutWindowed(Site::kSiteA);
  helper_.CheckWindowCreated();
  helper_.CheckAppInListWindowed(Site::kSiteA);
  helper_.CheckPlatformShortcutAndIcon(Site::kSiteA);
  helper_.UninstallFromOs(Site::kSiteA);
  helper_.CheckAppNotInList(Site::kSiteA);
  helper_.NavigateBrowser(Site::kSiteA);
  helper_.CheckInstallIconShown();
  helper_.CheckLaunchIconNotShown();
}

IN_PROC_BROWSER_TEST_F(
    WebAppIntegrationBrowserTestWin,
    WebAppIntegration_31SiteA_24_12SiteA_7SiteA_87SiteA_15SiteA_37SiteA_18_19) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.InstallOmniboxIcon(InstallableSite::kSiteA);
  helper_.CheckWindowCreated();
  helper_.CheckAppInListWindowed(Site::kSiteA);
  helper_.CheckPlatformShortcutAndIcon(Site::kSiteA);
  helper_.UninstallFromOs(Site::kSiteA);
  helper_.CheckAppNotInList(Site::kSiteA);
  helper_.NavigateBrowser(Site::kSiteA);
  helper_.CheckInstallIconShown();
  helper_.CheckLaunchIconNotShown();
}

IN_PROC_BROWSER_TEST_F(
    WebAppIntegrationBrowserTestWin,
    WebAppIntegration_47SiteA_24_12SiteA_7SiteA_87SiteA_15SiteA_37SiteA_18_19) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.InstallMenuOption(InstallableSite::kSiteA);
  helper_.CheckWindowCreated();
  helper_.CheckAppInListWindowed(Site::kSiteA);
  helper_.CheckPlatformShortcutAndIcon(Site::kSiteA);
  helper_.UninstallFromOs(Site::kSiteA);
  helper_.CheckAppNotInList(Site::kSiteA);
  helper_.NavigateBrowser(Site::kSiteA);
  helper_.CheckInstallIconShown();
  helper_.CheckLaunchIconNotShown();
}

IN_PROC_BROWSER_TEST_F(
    WebAppIntegrationBrowserTestWin,
    WebAppIntegration_30SiteC_12SiteC_7SiteC_87SiteC_15SiteA) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.InstallCreateShortcutWindowed(Site::kSiteC);
  helper_.CheckAppInListWindowed(Site::kSiteC);
  helper_.CheckPlatformShortcutAndIcon(Site::kSiteC);
  helper_.UninstallFromOs(Site::kSiteC);
  helper_.CheckAppNotInList(Site::kSiteA);
}

}  // namespace
}  // namespace web_app::integration_tests

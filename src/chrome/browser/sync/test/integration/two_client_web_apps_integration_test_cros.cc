// Copyright 2020 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

#include "chrome/browser/sync/test/integration/two_client_web_apps_integration_test_base.h"
#include "content/public/test/browser_test.h"

namespace web_app {

// This test is a part of the web app integration test suite, which is
// documented in //chrome/browser/ui/views/web_apps/README.md. For information
// about diagnosing, debugging and/or disabling tests, please look to the
// README file.

namespace {

using TwoClientWebAppsIntegrationTestCros = TwoClientWebAppsIntegrationTestBase;

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstCrtShctWindowedSiteA_WindowCreated_InListWinSiteA_SwitchProfileClientClient2_InListWinSiteA_TurnSyncOff) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallCreateShortcutWindowed("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckWindowCreated();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SyncTurnOff();
  helper_.AfterStateChangeAction();
}

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstOmniboxSiteA_WindowCreated_InListWinSiteA_SwitchProfileClientClient2_InListWinSiteA_TurnSyncOff) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallOmniboxIcon("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckWindowCreated();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SyncTurnOff();
  helper_.AfterStateChangeAction();
}

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstMenuOptionSiteA_WindowCreated_InListWinSiteA_SwitchProfileClientClient2_InListWinSiteA_TurnSyncOff) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallMenuOption("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckWindowCreated();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SyncTurnOff();
  helper_.AfterStateChangeAction();
}

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstCrtShctTabbedSiteA_InListTabbedSiteA_SwitchProfileClientClient2_InListTabbedSiteA_LaunchFromListSiteA_TabCreated) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallCreateShortcutTabbed("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListTabbed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListTabbed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.LaunchFromChromeApps("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckTabCreated();
  helper_.AfterStateCheckAction();
}

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstCrtShctTabbedSiteA_InListTabbedSiteA_SwitchProfileClientClient2_InListTabbedSiteA_TurnSyncOff) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallCreateShortcutTabbed("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListTabbed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListTabbed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SyncTurnOff();
  helper_.AfterStateChangeAction();
}

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstCrtShctWindowedSiteA_WindowCreated_InListWinSiteA_SwitchProfileClientClient2_InListWinSiteA_NavSiteA_InstIconNotShown_LaunchIconShown) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallCreateShortcutWindowed("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckWindowCreated();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.NavigateBrowser("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckInstallIconNotShown();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckLaunchIconShown();
  helper_.AfterStateCheckAction();
}

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstOmniboxSiteA_WindowCreated_InListWinSiteA_SwitchProfileClientClient2_InListWinSiteA_NavSiteA_InstIconNotShown_LaunchIconShown) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallOmniboxIcon("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckWindowCreated();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.NavigateBrowser("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckInstallIconNotShown();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckLaunchIconShown();
  helper_.AfterStateCheckAction();
}

IN_PROC_BROWSER_TEST_F(
    TwoClientWebAppsIntegrationTestCros,
    WebAppIntegration_InstMenuOptionSiteA_WindowCreated_InListWinSiteA_SwitchProfileClientClient2_InListWinSiteA_NavSiteA_InstIconNotShown_LaunchIconShown) {
  // Test contents are generated by script. Please do not modify!
  // See `chrome/test/webapps/README.md` for more info.
  // Sheriffs: Disabling this test is supported.
  helper_.BeforeStateChangeAction();
  helper_.InstallMenuOption("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckWindowCreated();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.SwitchProfileClients("Client2");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckAppInListWindowed("SiteA");
  helper_.AfterStateCheckAction();

  helper_.BeforeStateChangeAction();
  helper_.NavigateBrowser("SiteA");
  helper_.AfterStateChangeAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckInstallIconNotShown();
  helper_.AfterStateCheckAction();

  helper_.BeforeStateCheckAction();
  helper_.CheckLaunchIconShown();
  helper_.AfterStateCheckAction();
}

}  // namespace
}  // namespace web_app

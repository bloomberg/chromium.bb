<!DOCTYPE html>
<canvas id='c'></canvas>
<script>
var can = document.getElementById('c');
can.width = can.height = 100;
var ctx = can.transferControlToOffscreen().getContext("2d");
ctx.fillStyle = 'green';
ctx.fillRect(0, 0, 100, 100);
if (window.testRunner) {
  testRunner.setPrinting();
  testRunner.waitUntilDone();
  setTimeout(function() {
  	// The setTimeout is a synchronization barrier that guarantees
  	// the commit will be processed by the event loop before the test
  	// is done.
    testRunner.notifyDone();
  }, 0);
}
</script>

# Expectations for CompositeAfterPaint
# See: https://docs.google.com/document/d/1QCM912Dr6u38DqyQqd7pxQxDy8FFOoWMMDq7uAXqKdA/view
Bug(none) http/tests/devtools/tracing/ [ Skip ]

Bug(none) virtual/composite-after-paint/ [ Skip ]

Bug(none) virtual/gpu/fast/canvas/ [ Skip ]
Bug(none) virtual/layout_ng_block_frag/ [ Skip ]
Bug(none) virtual/layout_ng_fieldset/ [ Skip ]
Bug(none) virtual/layout_ng_flex_box/ [ Skip ]
Bug(none) virtual/prefer_compositing_to_lcd_text/compositing/overflow/ [ Skip ]
Bug(none) virtual/stable/ [ Skip ]

# For now we track the failures of the base tests of the following virtual suites.
Bug(none) virtual/exotic-color-space/images/ [ Skip ]
Bug(none) virtual/gpu-rasterization/images/ [ Skip ]
Bug(none) virtual/mouseevent_fractional/fast/events/touch/ [ Skip ]
Bug(none) virtual/scroll_customization/fast/events/touch/ [ Skip ]
Bug(none) virtual/threaded/printing/ [ Skip ]
Bug(none) virtual/threaded/http/tests/devtools/tracing/ [ Skip ]
Bug(none) virtual/controls-refresh/ [ Skip ]
Bug(none) virtual/controls-refresh-hc/ [ Skip ]

# Can't rebaseline because the file path is too long.
Bug(none) virtual/compositor_threaded_scrollbar_scrolling/paint/invalidation/scroll/sticky/invalidate-after-composited-scroll-with-sticky.html [ Skip ]

# Fail before CompositeAfterPaint but pass with it.
crbug.com/472330 fast/borders/border-image-outset-split-inline-vertical-lr.html [ Pass ]
crbug.com/736052 compositing/overflow/composited-scroll-with-fractional-translation.html [ Pass ]
crbug.com/802915 css3/blending/isolation-should-include-non-local-background.html [ Pass ]
crbug.com/363609 external/wpt/css/css-transforms/rotateY-180deg-with-overflow-scroll.html [ Pass ]
crbug.com/918155 scrollbars/overlay-scrollbar-over-child-layer.html [ Pass ]
crbug.com/887000 virtual/prefer_compositing_to_lcd_text/scrollbars/hidden-scrollbars-invisible.html [ Pass ]
crbug.com/918155 virtual/prefer_compositing_to_lcd_text/scrollbars/overlay-scrollbar-over-child-layer.html [ Pass ]
crbug.com/918155 virtual/prefer_compositing_to_lcd_text/scrollbars/overlay-scrollbar-over-child-layer-nested-2.html [ Pass ]
crbug.com/918155 virtual/prefer_compositing_to_lcd_text/scrollbars/overlay-scrollbar-over-child-layer-nested.html [ Pass ]

# Missing composited layers for elements without visible contents.
crbug.com/937573 compositing/geometry/foreground-layer.html [ Failure ]
crbug.com/937573 compositing/geometry/limit-layer-bounds-opacity-transition.html [ Failure ]
crbug.com/937573 compositing/geometry/limit-layer-bounds-overflow-root.html [ Failure ]
crbug.com/937573 compositing/geometry/limit-layer-bounds-positioned-transition.html [ Failure ]
crbug.com/937573 compositing/geometry/limit-layer-bounds-positioned.html [ Failure ]
crbug.com/937573 compositing/geometry/limit-layer-bounds-transformed.html [ Failure ]
crbug.com/937573 compositing/layer-creation/scroll-partial-update.html [ Failure ]

Bug(none) virtual/android/fullscreen/video-overlay-scroll.html [ Failure ]
Bug(none) virtual/android/rootscroller/fixed-chaining-with-implicit-pointer-events-none.html [ Failure ]
Bug(none) virtual/android/rootscroller/nested-rootscroller-browser-controls-bounds-shown.html [ Crash ]
Bug(none) virtual/android/url-bar/bottom-and-top-fixed-sticks-to-top.html [ Crash ]
Bug(none) virtual/android/url-bar/bottom-fixed-adjusted-when-showing-url-bar.html [ Crash ]

# Composited filters are not working.
crbug.com/1008501 compositing/culling/filter-occlusion-blur-large.html [ Failure ]
crbug.com/1008501 compositing/culling/filter-occlusion-blur.html [ Failure ]
crbug.com/1008501 compositing/reflections/deeply-nested-reflections.html [ Failure ]

# Wrong contentsOpaque or background color.
crbug.com/1029620 compositing/contents-opaque/control-layer.html [ Failure ]
crbug.com/1029620 compositing/contents-opaque/layer-opacity.html [ Failure ]
# Flaky result of contentsOpqaue.
crbug.com/1029620 paint/invalidation/window-resize/window-resize-child-background-image-fixed-centered.html [ Pass Failure ]

# Needs to implement logic for CompositingReasons::kAssumedOverlap.
Bug(none) compositing/layer-creation/overlap-animation-clipping.html [ Failure ]
Bug(none) compositing/layer-creation/overlap-animation-container.html [ Failure ]
Bug(none) compositing/layer-creation/overlap-animation.html [ Failure ]

# Overlap testing seems inaccurate.
Bug(none) compositing/layer-creation/overlap-transformed-3d.html [ Failure ]
Bug(none) compositing/layer-creation/overlap-transformed-layer-with-transform-body.html [ Failure ]
Bug(none) compositing/layer-creation/overlap-transformed-preserved-3d.html [ Failure ]

Bug(none) compositing/masks/mask-with-removed-filters.html [ Failure ]
crbug.com/667946 compositing/overflow/scrolls-with-respect-to-nested.html [ Failure ]
crbug.com/667946 compositing/overflow/scrolls-with-respect-to-transform.html [ Failure ]
crbug.com/667946 compositing/overflow/scrolls-with-respect-to.html [ Failure ]
Bug(none) compositing/squashing/do-not-squash-scroll-child-with-composited-descendants.html [ Failure ]
Bug(none) compositing/squashing/squash-transform-repainting-child.html [ Failure ]
Bug(none) compositing/squashing/squash-transform-repainting-transformed-child.html [ Failure ]
Bug(none) compositing/squashing/squash-transform.html [ Failure ]
Bug(none) compositing/squashing/squashed-repaints.html [ Failure ]
Bug(none) compositing/squashing/squashing-sparsity-heuristic.html [ Failure ]
Bug(none) compositing/visibility/layer-visible-content.html [ Failure ]
Bug(none) external/wpt/css/css-transforms/transform3d-backface-visibility-006.html [ Failure ]
Bug(none) external/wpt/html/rendering/non-replaced-elements/the-fieldset-and-legend-elements/fieldset-overflow.html [ Crash ]
Bug(none) external/wpt/largest-contentful-paint/invisible-images.html [ Failure ]
Bug(none) external/wpt/portals/portals-rendering.html [ Failure ]
Bug(none) fast/css/outline-offset-large.html [ Failure ]
Bug(none) fast/forms/validation-bubble-device-emulation-change.html [ Failure ]
Bug(none) fast/webgl/pixelated.html [ Failure ]
Bug(none) fast/sub-pixel/transformed-iframe-copy-on-scroll.html [ Failure ]
Bug(none) fullscreen/compositor-touch-hit-rects-fullscreen-video-controls.html [ Failure ]
Bug(none) http/tests/devtools/layers/layers-3d-view-after-update.js [ Failure ]
Bug(none) http/tests/input/discard-events-to-unstable-iframe.html [ Failure ]
Bug(none) http/tests/misc/destroy-middle-click-locked-target-crash.html [ Timeout ]
Bug(none) http/tests/misc/synthetic-gesture-initiated-in-cross-origin-frame.html [ Failure ]
Bug(none) printing/fixed-positioned-headers-and-footers-absolute-covering-some-pages.html [ Failure ]
Bug(none) printing/fixed-positioned-headers-and-footers-larger-than-page.html [ Failure ]
Bug(none) printing/offscreencanvas-2d-printing.html [ Failure ]
Bug(none) printing/webgl-repeated-printing-preservedrawingbuffer.html [ Failure ]
Bug(none) printing/webgl-repeated-printing.html [ Failure ]
Bug(none) transforms/3d/general/background-visibility-layers.html [ Failure ]
Bug(none) virtual/forced-high-contrast-colors/fast/css/forced-colors-mode/forced-colors-mode-22.html [ Crash ]
Bug(none) virtual/scalefactor200/external/wpt/largest-contentful-paint/invisible-images.html [ Failure ]
Bug(none) virtual/scalefactor200withoutzoom/external/wpt/largest-contentful-paint/invisible-images.html [ Failure ]
Bug(none) virtual/threaded-prefer-compositing/fast/scrolling/keyboard-scroll-page-scale.html [ Failure Pass ]
Bug(none) virtual/threaded-prefer-compositing/fast/scrolling/no-hover-during-scroll.html [ Failure Pass ]
Bug(none) virtual/threaded-prefer-compositing/fast/scrolling/no-hover-during-smooth-js-scroll.html [ Crash Pass ]

# Loading an image in a subframe.
crbug.com/959936 http/tests/images/image-decode-in-frame.html [ Failure ]

crbug.com/907601 virtual/threaded-prefer-compositing/fast/scrolling/events/scrollend-event-fired-after-snap.html [ Skip ]

# Less invalidations or different invalidations without pixel failures.
# Some might be good. Some might be under-invalidations for which under-invalidation
# checking failed.
Bug(none) paint/invalidation/compositing/should-invoke-deferred-compositing.html [ Failure ]
Bug(none) paint/invalidation/scroll/overflow-hidden-yet-scrolled-with-custom-scrollbar.html [ Failure ]
Bug(none) paint/invalidation/scroll/overflow-hidden-yet-scrolled.html [ Failure ]

# Under-invalidation
Bug(none) fast/events/touch/touch-rect-crash-on-unpromote-layer.html [ Crash ]

# "Missing" raster invalidation because composited layers are re-created.
crbug.com/842356 paint/invalidation/compositing/containing-block-added-individual.html [ Failure ]
crbug.com/842356 paint/invalidation/compositing/containing-block-added.html [ Failure ]
crbug.com/842356 paint/invalidation/compositing/containing-block-removed-individual.html [ Failure ]
crbug.com/842356 paint/invalidation/compositing/containing-block-removed.html [ Failure ]

# Extra raster invalidations.
Bug(none) compositing/overflow/do-not-repaint-if-scrolling-composited-layers.html [ Failure ]
Bug(none) paint/invalidation/compositing/clipping-should-not-repaint-composited-descendants.html [ Failure ]
Bug(none) paint/invalidation/compositing/should-not-repaint-composited-filter.html [ Failure ]
Bug(none) paint/invalidation/compositing/should-not-repaint-composited-opacity.html [ Failure ]
Bug(none) paint/invalidation/compositing/should-not-repaint-move-backface-hidden.html [ Failure ]
Bug(none) paint/invalidation/scroll/iframe-scroll-repaint.html [ Failure ]
Bug(none) paint/invalidation/scroll/repaint-composited-child-in-scrolled-container.html [ Failure ]
Bug(none) paint/invalidation/position/relative-positioned-movement-repaint.html [ Failure ]

# Wrong invalidation/painting/rasterization for multicol. Different layer tree.
crbug.com/648274 paint/invalidation/multicol/multicol-as-paint-container.html [ Failure ]

# Different layer tree about squashing.
crbug.com/757977 compositing/squashing/squashed-layer-loses-graphicslayer.html [ Failure ]
crbug.com/757977 paint/invalidation/compositing/remove-squashed-layer-plus-move.html [ Failure ]
crbug.com/757977 paint/invalidation/compositing/resize-squashing-layer-that-needs-full-repaint.html [ Failure ]

# Less layers or other different layer trees.
Bug(none) paint/invalidation/compositing/iframe-inside-squashed-layer.html [ Failure ]
Bug(none) paint/invalidation/compositing/overlap-test-with-filter.html [ Failure ]
Bug(none) paint/invalidation/compositing/should-not-repaint-composited-descendants.html [ Failure ]

# Subpixel or invisible color differences that look benign, but we can't rebaseline ref tests.
Bug(benign) compositing/overflow/ancestor-with-clip-path.html [ Failure ]
Bug(benign) fast/multicol/mixed-opacity-fixed-test.html [ Failure ]
Bug(benign) fast/multicol/mixed-positioning-stacking-order.html [ Failure ]
Bug(benign) fullscreen/rendering/backdrop-object.html [ Failure ]
Bug(benign) external/wpt/svg/render/reftests/blending-001.svg [ Failure ]
Bug(benign) external/wpt/svg/render/reftests/blending-002.svg [ Failure ]

# Text failures due to layerization differences
Bug(none) compositing/overflow/scroller-with-border-radius.html [ Failure ]
Bug(none) css3/blending/mix-blend-mode-isolation-remove.html [ Failure ]

# virtual/threaded variants of sub-directories and tests already skipped or marked as failing above.
Bug(none) virtual/threaded/fast/events/pinch/pinch-zoom-pan-within-zoomed-viewport.html [ Failure ]
Bug(none) virtual/threaded/fast/events/pinch/scroll-visual-viewport-send-boundary-events.html [ Timeout ]
Bug(none) virtual/threaded-prefer-compositing/fast/scroll-behavior/first-scroll-runs-on-compositor.html [ Failure ]
Bug(none) virtual/threaded/compositing/visibility/layer-visible-content.html [ Failure ]
Bug(none) virtual/threaded/synthetic_gestures/smooth-scroll-tiny-delta.html [ Failure Timeout Pass ]

crbug.com/931486 compositing/overflow/overlap-testing-ancestor-scroller-high-dpi.html [ Failure ]
crbug.com/931486 compositing/squashing/squash-above-fixed-1.html [ Failure ]
crbug.com/931486 compositing/squashing/squash-above-fixed-3.html [ Failure ]
crbug.com/931486 paint/invalidation/compositing/pointer-events-composited-scrolling.html [ Failure ]
crbug.com/931486 paint/invalidation/compositing/scrolling-neg-z-index-descendants.html [ Failure ]
crbug.com/931486 paint/invalidation/scroll/composited-iframe-scroll-repaint.html [ Failure ]
crbug.com/931486 paint/invalidation/scroll/fixed-and-absolute-position-scrolled.html [ Failure ]
crbug.com/931486 paint/invalidation/scroll/scrollbar-damage-and-full-viewport-repaint.html [ Failure ]
crbug.com/931486 scrollbars/overlay-scrollbars-within-overflow-scroll.html [ Failure ]
crbug.com/931486 scrollbars/reconstruct-coordinated-scrollbar.html [ Failure ]
crbug.com/931486 virtual/prefer_compositing_to_lcd_text/scrollbars/reconstruct-coordinated-scrollbar.html [ Failure ]

# See comment regarding this test in NeverFixTests. It also fails for other
# reasons, in particular that the composited layerization algorithm provides
# different results.
Bug(none) paint/invalidation/compositing/subpixel-offset-scaled-transform-composited.html [ Failure ]

Bug(none) paint/pagination/composited-paginated-outlined-box.html [ Failure ]
Bug(none) paint/invalidation/media-audio-no-spurious-repaints.html [ Failure ]
Bug(none) paint/invalidation/reflection/scroll-fixed-layer-with-reflection.html [ Failure ]
Bug(none) paint/invalidation/reflection/scroll-fixed-reflected-layer.html [ Failure ]
Bug(none) paint/invalidation/svg/mask-clip-target-transform.svg [ Failure ]

# Extra raster invalidation on start/end of animation. Caused by animation
# element id namespaces
crbug.com/900241 paint/invalidation/animation/opacity-animation.html [ Failure ]
crbug.com/900241 paint/invalidation/animation/transform-animation.html [ Failure ]

# These tests have additional hit test rects. These may correct and simply due
# to different layerization decisions, but this needs investigation.
crbug.com/909749 fast/events/touch/compositor-touch-hit-rects-non-composited-scroll.html [ Failure ]

# Backdrop filter
crbug.com/923429 css3/filters/backdrop-filter-plus-mask.html [ Failure ]
crbug.com/923429 css3/filters/backdrop-filter-plus-mask-large.html [ Failure ]
crbug.com/923429 virtual/scalefactor200/css3/filters/backdrop-filter-plus-mask.html [ Failure ]
crbug.com/923429 virtual/scalefactor200/css3/filters/backdrop-filter-plus-mask-large.html [ Failure ]

crbug.com/940033 virtual/threaded-prefer-compositing/fast/scrolling/wheel-scrolling-over-custom-scrollbar.html [ Pass Failure ]

# Crash during PictureLayer::GetPicture() when DisplayItemList is finished twice.
Bug(none) http/tests/devtools/layers/layer-canvas-log.js [ Crash ]
Bug(none) http/tests/devtools/layers/layer-replay-scale.js [ Crash ]
# Missing compositing reasons
Bug(none) http/tests/devtools/layers/layer-compositing-reasons.js [ Failure ]
# Missing WheelEventHandler
Bug(none) http/tests/devtools/layers/layer-scroll-rects-get.js [ Failure ]

# Scrollbar pixel snapping issues
crbug.com/979380 compositing/overflow/overflow-scroll-background-fractional-offset.html [ Failure ]
crbug.com/979380 compositing/overflow/overflow-scroll-content-fractional-offset.html [ Failure ]
crbug.com/979380 compositing/rtl/rtl-iframe-absolute-overflow-scrolled.html [ Failure ]
crbug.com/979380 compositing/rtl/rtl-iframe-fixed-overflow-scrolled.html [ Failure ]
crbug.com/979380 fast/frames/transparent-scrollbar.html [ Failure ]

# Crash on non-contiguous effect on multiple columns
Bug(none) fast/multicol/composited-layer-will-change.html [ Crash ]
Bug(none) paint/clipath/change-mask-clip-path-multicol-crash.html [ Crash ]

# Clip-path and mask.
crbug.com/979369 external/wpt/css/css-masking/clip-path-svg-content/mask-nested-clip-path-002.svg [ Failure ]
crbug.com/979369 external/wpt/css/css-masking/clip-path-svg-content/mask-nested-clip-path-panning-001.svg [ Failure ]
crbug.com/979369 svg/clip-path/deep-nested-clip-in-mask.svg [ Failure ]

# These failures need to be triaged and are being added to unblock the CQ (see: https://crbug.com/966981).
crbug.com/966981 virtual/threaded/fast/events/pinch/gesture-pinch-zoom-scroll-bubble.html [ Timeout ]
crbug.com/966981 virtual/threaded-prefer-compositing/fast/scroll-behavior/overscroll-behavior.html [ Failure ]

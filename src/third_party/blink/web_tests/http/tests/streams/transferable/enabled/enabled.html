<!DOCTYPE html>
<meta charset="utf-8">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script>
// Quick test for whether transferable streams are enabled or not, since it
// doesn't affect the symbols visible on the global object. When not enabled,
// all the tests should fail. This will help prevent accidentally shipping the
// feature.

test(() => {
  const rs = new ReadableStream();
  postMessage(rs, '*', [rs]);
}, 'postMessage of a ReadableStream should work');

test(() => {
  const ws = new WritableStream();
  postMessage(ws, '*', [ws]);
}, 'postMessage of a WritableStream should work');

test(() => {
  const ts = new TransformStream();
  postMessage(ts, '*', [ts]);
}, 'postMessage of a TransformStream should work');
</script>

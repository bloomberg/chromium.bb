<!DOCTYPE html>
<title>Credential Manager: helper page for manual testing using the Testing API.</title>
<script src="/gen/layout_test_data/mojo/public/js/mojo_bindings.js"></script>
<script src="/gen/third_party/blink/public/mojom/webauthn/virtual_authenticator.mojom.js"></script>
<script src="../resources/virtual-navigator-credentials.js"></script>
<script>

async function probe() {
  try {
    await navigator.credentials.test.authenticators();
    console.info("The Web Authentication Testing API is available under the alias `nct`.");
  } catch (e) {
    console.error(e);
    throw Error("It is likely that the Web Authentication API or the Testing API is not enabled. See instructions below.");
  }
}

var nct = navigator.credentials.test;
probe();

</script>
<body>
  <h2>Usage</h2>
  <p>
    Make sure Chromium is run with the following command line flags: --enable-features=WebAuthentication --enable-web-authentication-testing-api --enable-blink-features=MojoJS --enable-experimental-web-platform-features. See the console for debug outputs on whether the API connection was established.
  </p>
  <p>
    Then use the Testing API under the `nct` alias to set up and configure virtual authenticator devices. The testing state is shared by the entire browser (all tabs, frames, profiles).
  </p>
</body>

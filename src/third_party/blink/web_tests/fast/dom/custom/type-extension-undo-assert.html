<!DOCTYPE html>
<script src="../../../resources/js-test.js"></script>
<div id="test" contenteditable><b is="x-a" style="font-style: italic;">Hello, world!</b></div>
<script>
// This test is based on
// editing/undo/replace-by-span-then-remove.html. Fuzzing tickled an
// assert; this is the reduced test case. Bolding will swap the B for
// a SPAN; undoing and redoing the command will reapply the "is"
// attribute to the original custom element.

description('Tests that execCommand undo doesn\'t hork custom elements');

var test = document.getElementById('test');
window.getSelection().selectAllChildren(test);
document.execCommand('bold', false, null);
document.execCommand('undo', false, null);
document.execCommand('undo', false, null);

testPassed('did not crash');
var successfullyParsed = true;
</script>

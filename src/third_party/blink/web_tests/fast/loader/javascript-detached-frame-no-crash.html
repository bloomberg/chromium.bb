<!DOCTYPE html>
<script src="../../resources/js-test.js"></script>
<script>
description("Navigating to a javascript: URL from a document having html imports should not crash.");
self.jsTestIsAsync = true;
if (window.testRunner) {
    testRunner.dumpAsText();
    testRunner.waitUntilDone();
}

var iframeLoadCount = 0;
function runTest() {
    // Both the initial load and completion of the javascript: navigation will trigger a 'load'.
    if (++iframeLoadCount == 2) {
        testPassed("no crash.");
        setTimeout(finishJSTest, 0);
    }
}
</script>
<iframe onload="runTest();" src="resources/javascript-detached-frame-iframe.html"></iframe>

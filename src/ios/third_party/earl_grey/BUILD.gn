# Copyright 2016 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/ios/ios_sdk.gni")
import("//build/config/ios/rules.gni")

config("config") {
  include_dirs = [ "src/EarlGrey" ]
}

ios_framework_bundle("earl_grey") {
  output_name = "EarlGrey"
  info_plist = "Info.plist"

  testonly = true
  sources = [
    "src/EarlGrey/Action/GREYAction.h",
    "src/EarlGrey/Action/GREYActionBlock.h",
    "src/EarlGrey/Action/GREYActionBlock.m",
    "src/EarlGrey/Action/GREYActions+Internal.h",
    "src/EarlGrey/Action/GREYActions.h",
    "src/EarlGrey/Action/GREYActions.m",
    "src/EarlGrey/Action/GREYBaseAction.h",
    "src/EarlGrey/Action/GREYBaseAction.m",
    "src/EarlGrey/Action/GREYChangeStepperAction.h",
    "src/EarlGrey/Action/GREYChangeStepperAction.m",
    "src/EarlGrey/Action/GREYMultiFingerSwipeAction.h",
    "src/EarlGrey/Action/GREYMultiFingerSwipeAction.m",
    "src/EarlGrey/Action/GREYPathGestureUtils.h",
    "src/EarlGrey/Action/GREYPathGestureUtils.m",
    "src/EarlGrey/Action/GREYPickerAction.h",
    "src/EarlGrey/Action/GREYPickerAction.m",
    "src/EarlGrey/Action/GREYPinchAction.h",
    "src/EarlGrey/Action/GREYPinchAction.m",
    "src/EarlGrey/Action/GREYScrollAction.h",
    "src/EarlGrey/Action/GREYScrollAction.m",
    "src/EarlGrey/Action/GREYScrollActionError.h",
    "src/EarlGrey/Action/GREYScrollActionError.m",
    "src/EarlGrey/Action/GREYScrollToContentEdgeAction.h",
    "src/EarlGrey/Action/GREYScrollToContentEdgeAction.m",
    "src/EarlGrey/Action/GREYSlideAction.h",
    "src/EarlGrey/Action/GREYSlideAction.m",
    "src/EarlGrey/Action/GREYSwipeAction.h",
    "src/EarlGrey/Action/GREYSwipeAction.m",
    "src/EarlGrey/Action/GREYTapAction.h",
    "src/EarlGrey/Action/GREYTapAction.m",
    "src/EarlGrey/Action/GREYTapper.h",
    "src/EarlGrey/Action/GREYTapper.m",
    "src/EarlGrey/Additions/CAAnimation+GREYAdditions.h",
    "src/EarlGrey/Additions/CAAnimation+GREYAdditions.m",
    "src/EarlGrey/Additions/CALayer+GREYAdditions.h",
    "src/EarlGrey/Additions/CALayer+GREYAdditions.m",
    "src/EarlGrey/Additions/CGGeometry+GREYAdditions.h",
    "src/EarlGrey/Additions/CGGeometry+GREYAdditions.m",
    "src/EarlGrey/Additions/NSError+GREYAdditions.h",
    "src/EarlGrey/Additions/NSError+GREYAdditions.m",
    "src/EarlGrey/Additions/NSObject+GREYAdditions.h",
    "src/EarlGrey/Additions/NSObject+GREYAdditions.m",
    "src/EarlGrey/Additions/NSRunLoop+GREYAdditions.h",
    "src/EarlGrey/Additions/NSRunLoop+GREYAdditions.m",
    "src/EarlGrey/Additions/NSString+GREYAdditions.h",
    "src/EarlGrey/Additions/NSString+GREYAdditions.m",
    "src/EarlGrey/Additions/NSTimer+GREYAdditions.h",
    "src/EarlGrey/Additions/NSTimer+GREYAdditions.m",
    "src/EarlGrey/Additions/NSURL+GREYAdditions.h",
    "src/EarlGrey/Additions/NSURL+GREYAdditions.m",
    "src/EarlGrey/Additions/NSURLConnection+GREYAdditions.h",
    "src/EarlGrey/Additions/NSURLConnection+GREYAdditions.m",
    "src/EarlGrey/Additions/NSURLSession+GREYAdditions.h",
    "src/EarlGrey/Additions/NSURLSession+GREYAdditions.m",
    "src/EarlGrey/Additions/UIAnimation+GREYAdditions.h",
    "src/EarlGrey/Additions/UIAnimation+GREYAdditions.m",
    "src/EarlGrey/Additions/UIApplication+GREYAdditions.h",
    "src/EarlGrey/Additions/UIApplication+GREYAdditions.m",
    "src/EarlGrey/Additions/UIGestureRecognizer+GREYAdditions.h",
    "src/EarlGrey/Additions/UIGestureRecognizer+GREYAdditions.m",
    "src/EarlGrey/Additions/UIScrollView+GREYAdditions.h",
    "src/EarlGrey/Additions/UIScrollView+GREYAdditions.m",
    "src/EarlGrey/Additions/UISwitch+GREYAdditions.h",
    "src/EarlGrey/Additions/UISwitch+GREYAdditions.m",
    "src/EarlGrey/Additions/UITouch+GREYAdditions.h",
    "src/EarlGrey/Additions/UITouch+GREYAdditions.m",
    "src/EarlGrey/Additions/UIView+GREYAdditions.h",
    "src/EarlGrey/Additions/UIView+GREYAdditions.m",
    "src/EarlGrey/Additions/UIViewController+GREYAdditions.h",
    "src/EarlGrey/Additions/UIViewController+GREYAdditions.m",
    "src/EarlGrey/Additions/UIWebView+GREYAdditions.h",
    "src/EarlGrey/Additions/UIWebView+GREYAdditions.m",
    "src/EarlGrey/Additions/UIWindow+GREYAdditions.h",
    "src/EarlGrey/Additions/UIWindow+GREYAdditions.m",
    "src/EarlGrey/Additions/XCTestCase+GREYAdditions.h",
    "src/EarlGrey/Additions/XCTestCase+GREYAdditions.m",
    "src/EarlGrey/Additions/_UIModalItemsPresentingViewController_GREYAdditions.h",
    "src/EarlGrey/Additions/_UIModalItemsPresentingViewController_GREYAdditions.m",
    "src/EarlGrey/Additions/__NSCFLocalDataTask_GREYAdditions.h",
    "src/EarlGrey/Additions/__NSCFLocalDataTask_GREYAdditions.m",
    "src/EarlGrey/AppSupport/GREYIdlingResource.h",
    "src/EarlGrey/Assertion/GREYAssertion.h",
    "src/EarlGrey/Assertion/GREYAssertionBlock.h",
    "src/EarlGrey/Assertion/GREYAssertionBlock.m",
    "src/EarlGrey/Assertion/GREYAssertionDefines.h",
    "src/EarlGrey/Assertion/GREYAssertions+Internal.h",
    "src/EarlGrey/Assertion/GREYAssertions.h",
    "src/EarlGrey/Assertion/GREYAssertions.m",
    "src/EarlGrey/Common/GREYAnalytics.h",
    "src/EarlGrey/Common/GREYAnalytics.m",
    "src/EarlGrey/Common/GREYAnalyticsDelegate.h",
    "src/EarlGrey/Common/GREYAppleInternals.h",
    "src/EarlGrey/Common/GREYConfiguration.h",
    "src/EarlGrey/Common/GREYConfiguration.m",
    "src/EarlGrey/Common/GREYConstants.h",
    "src/EarlGrey/Common/GREYConstants.m",
    "src/EarlGrey/Common/GREYDefines.h",
    "src/EarlGrey/Common/GREYElementHierarchy.h",
    "src/EarlGrey/Common/GREYElementHierarchy.m",
    "src/EarlGrey/Common/GREYError+Internal.h",
    "src/EarlGrey/Common/GREYError.h",
    "src/EarlGrey/Common/GREYError.m",
    "src/EarlGrey/Common/GREYErrorConstants.h",
    "src/EarlGrey/Common/GREYErrorConstants.m",
    "src/EarlGrey/Common/GREYFailureFormatter.h",
    "src/EarlGrey/Common/GREYFailureFormatter.m",
    "src/EarlGrey/Common/GREYFailureScreenshotter.h",
    "src/EarlGrey/Common/GREYFailureScreenshotter.m",
    "src/EarlGrey/Common/GREYFatalAsserts.h",
    "src/EarlGrey/Common/GREYLogger.h",
    "src/EarlGrey/Common/GREYLogger.m",
    "src/EarlGrey/Common/GREYObjcRuntime.h",
    "src/EarlGrey/Common/GREYObjcRuntime.m",
    "src/EarlGrey/Common/GREYObjectFormatter.h",
    "src/EarlGrey/Common/GREYObjectFormatter.m",
    "src/EarlGrey/Common/GREYScreenshotUtil+Internal.h",
    "src/EarlGrey/Common/GREYScreenshotUtil.h",
    "src/EarlGrey/Common/GREYScreenshotUtil.m",
    "src/EarlGrey/Common/GREYStopwatch.h",
    "src/EarlGrey/Common/GREYStopwatch.m",
    "src/EarlGrey/Common/GREYSwizzler.h",
    "src/EarlGrey/Common/GREYSwizzler.m",
    "src/EarlGrey/Common/GREYTestCaseInvocation.h",
    "src/EarlGrey/Common/GREYTestCaseInvocation.m",
    "src/EarlGrey/Common/GREYTestHelper.h",
    "src/EarlGrey/Common/GREYTestHelper.m",
    "src/EarlGrey/Common/GREYThrowDefines.h",
    "src/EarlGrey/Common/GREYVisibilityChecker.h",
    "src/EarlGrey/Common/GREYVisibilityChecker.m",
    "src/EarlGrey/Core/EarlGreyImpl.h",
    "src/EarlGrey/Core/EarlGreyImpl.m",
    "src/EarlGrey/Core/GREYAutomationSetup.h",
    "src/EarlGrey/Core/GREYAutomationSetup.m",
    "src/EarlGrey/Core/GREYElementFinder.h",
    "src/EarlGrey/Core/GREYElementFinder.m",
    "src/EarlGrey/Core/GREYElementInteraction+Internal.h",
    "src/EarlGrey/Core/GREYElementInteraction.h",
    "src/EarlGrey/Core/GREYElementInteraction.m",
    "src/EarlGrey/Core/GREYInteraction.h",
    "src/EarlGrey/Core/GREYInteractionDataSource.h",
    "src/EarlGrey/Core/GREYKeyboard.h",
    "src/EarlGrey/Core/GREYKeyboard.m",
    "src/EarlGrey/Delegate/GREYCAAnimationDelegate.h",
    "src/EarlGrey/Delegate/GREYCAAnimationDelegate.m",
    "src/EarlGrey/Delegate/GREYNSURLConnectionDelegate.h",
    "src/EarlGrey/Delegate/GREYNSURLConnectionDelegate.m",
    "src/EarlGrey/Delegate/GREYSurrogateDelegate.h",
    "src/EarlGrey/Delegate/GREYSurrogateDelegate.m",
    "src/EarlGrey/Delegate/GREYUIWebViewDelegate.h",
    "src/EarlGrey/Delegate/GREYUIWebViewDelegate.m",
    "src/EarlGrey/EarlGrey.h",
    "src/EarlGrey/Event/GREYSyntheticEvents.h",
    "src/EarlGrey/Event/GREYSyntheticEvents.m",
    "src/EarlGrey/Event/GREYTouchInfo.h",
    "src/EarlGrey/Event/GREYTouchInfo.m",
    "src/EarlGrey/Event/GREYTouchInjector.h",
    "src/EarlGrey/Event/GREYTouchInjector.m",
    "src/EarlGrey/Event/GREYZeroToleranceTimer.h",
    "src/EarlGrey/Event/GREYZeroToleranceTimer.m",
    "src/EarlGrey/Exception/GREYDefaultFailureHandler.h",
    "src/EarlGrey/Exception/GREYDefaultFailureHandler.m",
    "src/EarlGrey/Exception/GREYFailureHandler.h",
    "src/EarlGrey/Exception/GREYFrameworkException.h",
    "src/EarlGrey/Exception/GREYFrameworkException.m",
    "src/EarlGrey/Matcher/GREYAllOf.h",
    "src/EarlGrey/Matcher/GREYAllOf.m",
    "src/EarlGrey/Matcher/GREYAnyOf.h",
    "src/EarlGrey/Matcher/GREYAnyOf.m",
    "src/EarlGrey/Matcher/GREYBaseMatcher.h",
    "src/EarlGrey/Matcher/GREYBaseMatcher.m",
    "src/EarlGrey/Matcher/GREYDescription.h",
    "src/EarlGrey/Matcher/GREYElementMatcherBlock.h",
    "src/EarlGrey/Matcher/GREYElementMatcherBlock.m",
    "src/EarlGrey/Matcher/GREYHCMatcher.h",
    "src/EarlGrey/Matcher/GREYHCMatcher.m",
    "src/EarlGrey/Matcher/GREYLayoutConstraint.h",
    "src/EarlGrey/Matcher/GREYLayoutConstraint.m",
    "src/EarlGrey/Matcher/GREYMatcher.h",
    "src/EarlGrey/Matcher/GREYMatchers.h",
    "src/EarlGrey/Matcher/GREYMatchers.m",
    "src/EarlGrey/Matcher/GREYNot.h",
    "src/EarlGrey/Matcher/GREYNot.m",
    "src/EarlGrey/Matcher/GREYStringDescription.h",
    "src/EarlGrey/Matcher/GREYStringDescription.m",
    "src/EarlGrey/Provider/GREYDataEnumerator.h",
    "src/EarlGrey/Provider/GREYDataEnumerator.m",
    "src/EarlGrey/Provider/GREYElementProvider.h",
    "src/EarlGrey/Provider/GREYElementProvider.m",
    "src/EarlGrey/Provider/GREYProvider.h",
    "src/EarlGrey/Provider/GREYUIWindowProvider.h",
    "src/EarlGrey/Provider/GREYUIWindowProvider.m",
    "src/EarlGrey/Synchronization/GREYAppStateTracker.h",
    "src/EarlGrey/Synchronization/GREYAppStateTracker.m",
    "src/EarlGrey/Synchronization/GREYAppStateTrackerObject.h",
    "src/EarlGrey/Synchronization/GREYAppStateTrackerObject.m",
    "src/EarlGrey/Synchronization/GREYCondition.h",
    "src/EarlGrey/Synchronization/GREYCondition.m",
    "src/EarlGrey/Synchronization/GREYDispatchQueueIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYDispatchQueueIdlingResource.m",
    "src/EarlGrey/Synchronization/GREYDispatchQueueTracker.h",
    "src/EarlGrey/Synchronization/GREYDispatchQueueTracker.m",
    "src/EarlGrey/Synchronization/GREYManagedObjectContextIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYManagedObjectContextIdlingResource.m",
    "src/EarlGrey/Synchronization/GREYNSTimerIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYNSTimerIdlingResource.m",
    "src/EarlGrey/Synchronization/GREYObjectDeallocationTracker.h",
    "src/EarlGrey/Synchronization/GREYObjectDeallocationTracker.m",
    "src/EarlGrey/Synchronization/GREYOperationQueueIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYOperationQueueIdlingResource.m",
    "src/EarlGrey/Synchronization/GREYRunLoopSpinner.h",
    "src/EarlGrey/Synchronization/GREYRunLoopSpinner.m",
    "src/EarlGrey/Synchronization/GREYSyncAPI.h",
    "src/EarlGrey/Synchronization/GREYSyncAPI.m",
    "src/EarlGrey/Synchronization/GREYTimedIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYTimedIdlingResource.m",
    "src/EarlGrey/Synchronization/GREYUIThreadExecutor+Internal.h",
    "src/EarlGrey/Synchronization/GREYUIThreadExecutor.h",
    "src/EarlGrey/Synchronization/GREYUIThreadExecutor.m",
    "src/EarlGrey/Synchronization/GREYUIWebViewIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYUIWebViewIdlingResource.m",
    "src/EarlGrey/Traversal/GREYTraversal.h",
    "src/EarlGrey/Traversal/GREYTraversal.m",
    "src/EarlGrey/Traversal/GREYTraversalBFS.h",
    "src/EarlGrey/Traversal/GREYTraversalBFS.m",
    "src/EarlGrey/Traversal/GREYTraversalDFS.h",
    "src/EarlGrey/Traversal/GREYTraversalDFS.m",
  ]
  public_headers = [
    "src/EarlGrey/Action/GREYAction.h",
    "src/EarlGrey/Action/GREYActionBlock.h",
    "src/EarlGrey/Action/GREYActions.h",
    "src/EarlGrey/Action/GREYBaseAction.h",
    "src/EarlGrey/Action/GREYScrollActionError.h",
    "src/EarlGrey/AppSupport/GREYIdlingResource.h",
    "src/EarlGrey/Assertion/GREYAssertion.h",
    "src/EarlGrey/Assertion/GREYAssertionBlock.h",
    "src/EarlGrey/Assertion/GREYAssertionDefines.h",
    "src/EarlGrey/Assertion/GREYAssertions.h",
    "src/EarlGrey/Common/GREYAppleInternals.h",
    "src/EarlGrey/Common/GREYConfiguration.h",
    "src/EarlGrey/Common/GREYConstants.h",
    "src/EarlGrey/Common/GREYDefines.h",
    "src/EarlGrey/Common/GREYElementHierarchy.h",
    "src/EarlGrey/Common/GREYScreenshotUtil.h",
    "src/EarlGrey/Common/GREYTestHelper.h",
    "src/EarlGrey/Core/EarlGreyImpl.h",
    "src/EarlGrey/Core/GREYElementFinder.h",
    "src/EarlGrey/Core/GREYElementInteraction.h",
    "src/EarlGrey/Core/GREYInteraction.h",
    "src/EarlGrey/Core/GREYKeyboard.h",
    "src/EarlGrey/EarlGrey.h",
    "src/EarlGrey/Exception/GREYFailureHandler.h",
    "src/EarlGrey/Exception/GREYFrameworkException.h",
    "src/EarlGrey/Matcher/GREYAllOf.h",
    "src/EarlGrey/Matcher/GREYAnyOf.h",
    "src/EarlGrey/Matcher/GREYBaseMatcher.h",
    "src/EarlGrey/Matcher/GREYDescription.h",
    "src/EarlGrey/Matcher/GREYElementMatcherBlock.h",
    "src/EarlGrey/Matcher/GREYLayoutConstraint.h",
    "src/EarlGrey/Matcher/GREYMatcher.h",
    "src/EarlGrey/Matcher/GREYMatchers.h",
    "src/EarlGrey/Matcher/GREYNot.h",
    "src/EarlGrey/Provider/GREYDataEnumerator.h",
    "src/EarlGrey/Provider/GREYProvider.h",
    "src/EarlGrey/Synchronization/GREYCondition.h",
    "src/EarlGrey/Synchronization/GREYDispatchQueueIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYManagedObjectContextIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYNSTimerIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYOperationQueueIdlingResource.h",
    "src/EarlGrey/Synchronization/GREYSyncAPI.h",
    "src/EarlGrey/Synchronization/GREYUIThreadExecutor.h",
  ]
  deps = [
    "//build/config/ios:xctest",
    "//ios/third_party/fishhook",
    "//ios/third_party/webkit",
  ]
  public_deps = [ "//ios/third_party/ochamcrest:ochamcrest+link" ]

  frameworks = [
    "CoreData.framework",
    "CoreGraphics.framework",
    "Foundation.framework",
    "IOKit.framework",
    "QuartzCore.framework",
    "UIKit.framework",
    "XCTest.framework",
  ]

  configs -= [
    "//build/config/gcc:symbol_visibility_hidden",
    "//build/config/compiler:chromium_code",
  ]
  configs += [
    ":config",
    "//build/config/compiler:no_chromium_code",
    "//build/config/compiler:enable_arc",
    "//build/config/gcc:symbol_visibility_default",
  ]
}

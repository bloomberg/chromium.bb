<link rel="import" href="../../../html/polymer.html">

<link rel="import" href="../../../html/i18n_behavior.html">
<link rel="import" href="../../../cr_elements/cr_input/cr_input.html">
<link rel="import" href="base_page.html">
<link rel="import" href="cellular_setup_delegate.html">

<dom-module id="activation-code-page">
  <template>
    <style>
      [slot='page-body'] {
        height: 300px;
        margin-top: -20px;
      }

      :host cr-button {
        --ripple-opacity: 0;
      }

      #esimQrCodeDetection {
        background-color: var(--google-grey-refresh-100);
        border-radius: 4px;
        height: 130px;
        margin: 20px 0 30px 0;
        overflow: hidden;
        position: relative;
      }

      cr-button {
        border: none;
        box-shadow: none;
      }

      cr-button:hover {
        background-color: transparent;
      }

      #scanSuccessMessage {
        color: green;
        font-size: medium;
      }

      #scanSuccessMessage:hover {
        cursor: default;
      }

      .center {
        left: 50%;
        position: absolute;
        top: 50%;
        transform: translateY(-50%) translateX(-50%);
      }

      .label {
        font-weight: 500;
      }

      .button-image {
        height: 20px;
        margin-inline-end: 8px;
        width: 20px;
      }

      #useCameraAgainButton {
        font-weight: 500;
        left: 50%;
        margin-top: 16px;
        transform: translateX(-50%);
      }

      #scanSuccessImage {
        height: 20px;
        position: absolute;
        width: 20px;
       }

       #scanSuccessMessage {
        padding-inline-end: 0;
        padding-inline-start: 30px;
      }

      #switchCameraButton {
        background-color: rgba(0, 0, 0, 0.04);
        border-radius: 4px;
        color: var(--google-grey-refresh-300);
        margin: 8px;
        padding: 8px;
        position: absolute;
        right: 0;
        z-index: 2;
      }

      #switchCameraButton img {
        filter: brightness(2.1);
      }
    </style>
    <base-page>
      <div slot="page-body">
        <span id="scanQrCodeDescription">
          [[i18n('scanQRCode')]]
        </span>
        <div id="esimQrCodeDetection">
          <cr-button id="switchCameraButton"
              on-click="onSwitchCameraButtonPressed_"
              hidden$="[[isUiElementHidden_(UiElement.SWITCH_CAMERA, state_, hasMultipleCameras_)]]"
              disabled="[[isUiElementDisabled_(UiElement.SWITCH_CAMERA, state_)]]">
            <img class="button-image"
                src="activation_code_page_switch_camera.svg"
                aria-hidden="true">
            [[i18n('switchCamera')]]
          </cr-button>
          <video id="video"
              hidden$="[[isUiElementHidden_(UiElement.VIDEO, state_)]]">
          </video>
          <div class="center" id="startScanningContainer"
              hidden$="[[isUiElementHidden_(UiElement.START_SCANNING, state_)]]">
            <cr-button class="label"
                id="startScanningButton"
                on-click="startScanning_"
                aria-describedby="scanQrCodeDescription">
              <img class="button-image"
                  src="activation_code_page_camera.svg"
                  aria-hidden="true">
              [[i18n('useCamera')]]
            </cr-button>
          </div>
          <div class="center" id="scanSuccessContainer"
              hidden$="[[isUiElementHidden_(UiElement.SCAN_SUCCESS, state_)]]">
            <div>
              <img id="scanSuccessImage"
                  src="activation_code_page_checked.svg"
                  aria-hidden="true">
              <span class="label" id="scanSuccessMessage">
                [[i18n('scanQRCodeSuccess')]]
              </span>
            </div>
            <cr-button id="useCameraAgainButton"
                on-click="startScanning_">
              [[i18n('qrCodeRetry')]]
            </cr-button>
          </div>
        </div>
        <cr-input id="activationCode"
            label="[[i18n('activationCode')]]"
            value="{{activationCode_}}">
        </cr-input>
      </div>
    </base-page>
  </template>
  <script src="activation_code_page.js"></script>
</dom-module>
